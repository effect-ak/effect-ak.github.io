var Ib=Object.defineProperty;var Vl=e=>{throw TypeError(e)};var Mb=(e,t,n)=>t in e?Ib(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var u=(e,t,n)=>Mb(e,typeof t!="symbol"?t+"":t,n),Hl=(e,t,n)=>t.has(e)||Vl("Cannot "+n);var Wl=(e,t,n)=>(Hl(e,t,"read from private field"),n?n.call(e):t.get(e)),zl=(e,t,n)=>t.has(e)?Vl("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Gl=(e,t,n,r)=>(Hl(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Ac=!1,Nc=!1,hn=[],Rc=-1;function Ab(e){Nb(e)}function Nb(e){hn.includes(e)||hn.push(e),Cb()}function Rb(e){let t=hn.indexOf(e);t!==-1&&t>Rc&&hn.splice(t,1)}function Cb(){!Nc&&!Ac&&(Ac=!0,queueMicrotask(Pb))}function Pb(){Ac=!1,Nc=!0;for(let e=0;e<hn.length;e++)hn[e](),Rc=e;hn.length=0,Rc=-1,Nc=!1}var _r,Mn,br,Dh,Cc=!0;function Fb(e){Cc=!1,e(),Cc=!0}function jb(e){_r=e.reactive,br=e.release,Mn=t=>e.effect(t,{scheduler:n=>{Cc?Ab(n):n()}}),Dh=e.raw}function Yl(e){Mn=e}function Lb(e){let t=()=>{};return[r=>{let s=Mn(r);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(o=>o())}),e._x_effects.add(s),t=()=>{s!==void 0&&(e._x_effects.delete(s),br(s))},s},()=>{t()}]}function Kh(e,t){let n=!0,r,s=Mn(()=>{let o=e();JSON.stringify(o),n?r=o:queueMicrotask(()=>{t(o,r),r=o}),n=!1});return()=>br(s)}var Uh=[],Bh=[],qh=[];function Db(e){qh.push(e)}function Xa(e,t){typeof t=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(t)):(t=e,Bh.push(t))}function Jh(e){Uh.push(e)}function Vh(e,t,n){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[t]||(e._x_attributeCleanups[t]=[]),e._x_attributeCleanups[t].push(n)}function Hh(e,t){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach(([n,r])=>{(t===void 0||t.includes(n))&&(r.forEach(s=>s()),delete e._x_attributeCleanups[n])})}function Kb(e){var t,n;for((t=e._x_effects)==null||t.forEach(Rb);(n=e._x_cleanups)!=null&&n.length;)e._x_cleanups.pop()()}var eu=new MutationObserver(su),tu=!1;function nu(){eu.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),tu=!0}function Wh(){Ub(),eu.disconnect(),tu=!1}var Rr=[];function Ub(){let e=eu.takeRecords();Rr.push(()=>e.length>0&&su(e));let t=Rr.length;queueMicrotask(()=>{if(Rr.length===t)for(;Rr.length>0;)Rr.shift()()})}function se(e){if(!tu)return e();Wh();let t=e();return nu(),t}var ru=!1,Io=[];function Bb(){ru=!0}function qb(){ru=!1,su(Io),Io=[]}function su(e){if(ru){Io=Io.concat(e);return}let t=[],n=new Set,r=new Map,s=new Map;for(let o=0;o<e.length;o++)if(!e[o].target._x_ignoreMutationObserver&&(e[o].type==="childList"&&(e[o].removedNodes.forEach(i=>{i.nodeType===1&&i._x_marker&&n.add(i)}),e[o].addedNodes.forEach(i=>{if(i.nodeType===1){if(n.has(i)){n.delete(i);return}i._x_marker||t.push(i)}})),e[o].type==="attributes")){let i=e[o].target,c=e[o].attributeName,a=e[o].oldValue,l=()=>{r.has(i)||r.set(i,[]),r.get(i).push({name:c,value:i.getAttribute(c)})},f=()=>{s.has(i)||s.set(i,[]),s.get(i).push(c)};i.hasAttribute(c)&&a===null?l():i.hasAttribute(c)?(f(),l()):f()}s.forEach((o,i)=>{Hh(i,o)}),r.forEach((o,i)=>{Uh.forEach(c=>c(i,o))});for(let o of n)t.some(i=>i.contains(o))||Bh.forEach(i=>i(o));for(let o of t)o.isConnected&&qh.forEach(i=>i(o));t=null,n=null,r=null,s=null}function zh(e){return Os(Gn(e))}function ks(e,t,n){return e._x_dataStack=[t,...Gn(n||e)],()=>{e._x_dataStack=e._x_dataStack.filter(r=>r!==t)}}function Gn(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?Gn(e.host):e.parentNode?Gn(e.parentNode):[]}function Os(e){return new Proxy({objects:e},Jb)}var Jb={ownKeys({objects:e}){return Array.from(new Set(e.flatMap(t=>Object.keys(t))))},has({objects:e},t){return t==Symbol.unscopables?!1:e.some(n=>Object.prototype.hasOwnProperty.call(n,t)||Reflect.has(n,t))},get({objects:e},t,n){return t=="toJSON"?Vb:Reflect.get(e.find(r=>Reflect.has(r,t))||{},t,n)},set({objects:e},t,n,r){const s=e.find(i=>Object.prototype.hasOwnProperty.call(i,t))||e[e.length-1],o=Object.getOwnPropertyDescriptor(s,t);return o!=null&&o.set&&(o!=null&&o.get)?o.set.call(r,n)||!0:Reflect.set(s,t,n)}};function Vb(){return Reflect.ownKeys(this).reduce((t,n)=>(t[n]=Reflect.get(this,n),t),{})}function Gh(e){let t=r=>typeof r=="object"&&!Array.isArray(r)&&r!==null,n=(r,s="")=>{Object.entries(Object.getOwnPropertyDescriptors(r)).forEach(([o,{value:i,enumerable:c}])=>{if(c===!1||i===void 0||typeof i=="object"&&i!==null&&i.__v_skip)return;let a=s===""?o:`${s}.${o}`;typeof i=="object"&&i!==null&&i._x_interceptor?r[o]=i.initialize(e,a,o):t(i)&&i!==r&&!(i instanceof Element)&&n(i,a)})};return n(e)}function Yh(e,t=()=>{}){let n={initialValue:void 0,_x_interceptor:!0,initialize(r,s,o){return e(this.initialValue,()=>Hb(r,s),i=>Pc(r,s,i),s,o)}};return t(n),r=>{if(typeof r=="object"&&r!==null&&r._x_interceptor){let s=n.initialize.bind(n);n.initialize=(o,i,c)=>{let a=r.initialize(o,i,c);return n.initialValue=a,s(o,i,c)}}else n.initialValue=r;return n}}function Hb(e,t){return t.split(".").reduce((n,r)=>n[r],e)}function Pc(e,t,n){if(typeof t=="string"&&(t=t.split(".")),t.length===1)e[t[0]]=n;else{if(t.length===0)throw error;return e[t[0]]||(e[t[0]]={}),Pc(e[t[0]],t.slice(1),n)}}var Zh={};function gt(e,t){Zh[e]=t}function Fc(e,t){let n=Wb(t);return Object.entries(Zh).forEach(([r,s])=>{Object.defineProperty(e,`$${r}`,{get(){return s(t,n)},enumerable:!1})}),e}function Wb(e){let[t,n]=rp(e),r={interceptor:Yh,...t};return Xa(e,n),r}function zb(e,t,n,...r){try{return n(...r)}catch(s){cs(s,e,t)}}function cs(e,t,n=void 0){e=Object.assign(e??{message:"No error message given."},{el:t,expression:n}),console.warn(`Alpine Expression Error: ${e.message}

${n?'Expression: "'+n+`"

`:""}`,t),setTimeout(()=>{throw e},0)}var po=!0;function Qh(e){let t=po;po=!1;let n=e();return po=t,n}function pn(e,t,n={}){let r;return Ce(e,t)(s=>r=s,n),r}function Ce(...e){return Xh(...e)}var Xh=ep;function Gb(e){Xh=e}function ep(e,t){let n={};Fc(n,e);let r=[n,...Gn(e)],s=typeof t=="function"?Yb(r,t):Qb(r,t,e);return zb.bind(null,e,t,s)}function Yb(e,t){return(n=()=>{},{scope:r={},params:s=[]}={})=>{let o=t.apply(Os([r,...e]),s);Mo(n,o)}}var rc={};function Zb(e,t){if(rc[e])return rc[e];let n=Object.getPrototypeOf(async function(){}).constructor,r=/^[\n\s]*if.*\(.*\)/.test(e.trim())||/^(let|const)\s/.test(e.trim())?`(async()=>{ ${e} })()`:e,o=(()=>{try{let i=new n(["__self","scope"],`with (scope) { __self.result = ${r} }; __self.finished = true; return __self.result;`);return Object.defineProperty(i,"name",{value:`[Alpine] ${e}`}),i}catch(i){return cs(i,t,e),Promise.resolve()}})();return rc[e]=o,o}function Qb(e,t,n){let r=Zb(t,n);return(s=()=>{},{scope:o={},params:i=[]}={})=>{r.result=void 0,r.finished=!1;let c=Os([o,...e]);if(typeof r=="function"){let a=r(r,c).catch(l=>cs(l,n,t));r.finished?(Mo(s,r.result,c,i,n),r.result=void 0):a.then(l=>{Mo(s,l,c,i,n)}).catch(l=>cs(l,n,t)).finally(()=>r.result=void 0)}}}function Mo(e,t,n,r,s){if(po&&typeof t=="function"){let o=t.apply(n,r);o instanceof Promise?o.then(i=>Mo(e,i,n,r)).catch(i=>cs(i,s,t)):e(o)}else typeof t=="object"&&t instanceof Promise?t.then(o=>e(o)):e(t)}var ou="x-";function Sr(e=""){return ou+e}function Xb(e){ou=e}var Ao={};function de(e,t){return Ao[e]=t,{before(n){if(!Ao[n]){console.warn(String.raw`Cannot find directive \`${n}\`. \`${e}\` will use the default order of execution`);return}const r=an.indexOf(n);an.splice(r>=0?r:an.indexOf("DEFAULT"),0,e)}}}function eS(e){return Object.keys(Ao).includes(e)}function iu(e,t,n){if(t=Array.from(t),e._x_virtualDirectives){let o=Object.entries(e._x_virtualDirectives).map(([c,a])=>({name:c,value:a})),i=tp(o);o=o.map(c=>i.find(a=>a.name===c.name)?{name:`x-bind:${c.name}`,value:`"${c.value}"`}:c),t=t.concat(o)}let r={};return t.map(ip((o,i)=>r[o]=i)).filter(ap).map(rS(r,n)).sort(sS).map(o=>nS(e,o))}function tp(e){return Array.from(e).map(ip()).filter(t=>!ap(t))}var jc=!1,Vr=new Map,np=Symbol();function tS(e){jc=!0;let t=Symbol();np=t,Vr.set(t,[]);let n=()=>{for(;Vr.get(t).length;)Vr.get(t).shift()();Vr.delete(t)},r=()=>{jc=!1,n()};e(n),r()}function rp(e){let t=[],n=c=>t.push(c),[r,s]=Lb(e);return t.push(s),[{Alpine:$s,effect:r,cleanup:n,evaluateLater:Ce.bind(Ce,e),evaluate:pn.bind(pn,e)},()=>t.forEach(c=>c())]}function nS(e,t){let n=()=>{},r=Ao[t.type]||n,[s,o]=rp(e);Vh(e,t.original,o);let i=()=>{e._x_ignore||e._x_ignoreSelf||(r.inline&&r.inline(e,t,s),r=r.bind(r,e,t,s),jc?Vr.get(np).push(r):r())};return i.runCleanups=o,i}var sp=(e,t)=>({name:n,value:r})=>(n.startsWith(e)&&(n=n.replace(e,t)),{name:n,value:r}),op=e=>e;function ip(e=()=>{}){return({name:t,value:n})=>{let{name:r,value:s}=cp.reduce((o,i)=>i(o),{name:t,value:n});return r!==t&&e(r,t),{name:r,value:s}}}var cp=[];function cu(e){cp.push(e)}function ap({name:e}){return up().test(e)}var up=()=>new RegExp(`^${ou}([^:^.]+)\\b`);function rS(e,t){return({name:n,value:r})=>{let s=n.match(up()),o=n.match(/:([a-zA-Z0-9\-_:]+)/),i=n.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],c=t||e[n]||n;return{type:s?s[1]:null,value:o?o[1]:null,modifiers:i.map(a=>a.replace(".","")),expression:r,original:c}}}var Lc="DEFAULT",an=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Lc,"teleport"];function sS(e,t){let n=an.indexOf(e.type)===-1?Lc:e.type,r=an.indexOf(t.type)===-1?Lc:t.type;return an.indexOf(n)-an.indexOf(r)}function Xr(e,t,n={}){e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0,cancelable:!0}))}function wn(e,t){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(s=>wn(s,t));return}let n=!1;if(t(e,()=>n=!0),n)return;let r=e.firstElementChild;for(;r;)wn(r,t),r=r.nextElementSibling}function Xe(e,...t){console.warn(`Alpine Warning: ${e}`,...t)}var Zl=!1;function oS(){Zl&&Xe("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Zl=!0,document.body||Xe("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Xr(document,"alpine:init"),Xr(document,"alpine:initializing"),nu(),Db(t=>Ct(t,wn)),Xa(t=>vr(t)),Jh((t,n)=>{iu(t,n).forEach(r=>r())});let e=t=>!ai(t.parentElement,!0);Array.from(document.querySelectorAll(dp().join(","))).filter(e).forEach(t=>{Ct(t)}),Xr(document,"alpine:initialized"),setTimeout(()=>{uS()})}var au=[],lp=[];function fp(){return au.map(e=>e())}function dp(){return au.concat(lp).map(e=>e())}function hp(e){au.push(e)}function pp(e){lp.push(e)}function ai(e,t=!1){return wr(e,n=>{if((t?dp():fp()).some(s=>n.matches(s)))return!0})}function wr(e,t){if(e){if(t(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),!!e.parentElement)return wr(e.parentElement,t)}}function iS(e){return fp().some(t=>e.matches(t))}var mp=[];function cS(e){mp.push(e)}var aS=1;function Ct(e,t=wn,n=()=>{}){wr(e,r=>r._x_ignore)||tS(()=>{t(e,(r,s)=>{r._x_marker||(n(r,s),mp.forEach(o=>o(r,s)),iu(r,r.attributes).forEach(o=>o()),r._x_ignore||(r._x_marker=aS++),r._x_ignore&&s())})})}function vr(e,t=wn){t(e,n=>{Kb(n),Hh(n),delete n._x_marker})}function uS(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,n,r])=>{eS(n)||r.some(s=>{if(document.querySelector(s))return Xe(`found "${s}", but missing ${t} plugin`),!0})})}var Dc=[],uu=!1;function lu(e=()=>{}){return queueMicrotask(()=>{uu||setTimeout(()=>{Kc()})}),new Promise(t=>{Dc.push(()=>{e(),t()})})}function Kc(){for(uu=!1;Dc.length;)Dc.shift()()}function lS(){uu=!0}function fu(e,t){return Array.isArray(t)?Ql(e,t.join(" ")):typeof t=="object"&&t!==null?fS(e,t):typeof t=="function"?fu(e,t()):Ql(e,t)}function Ql(e,t){let n=s=>s.split(" ").filter(o=>!e.classList.contains(o)).filter(Boolean),r=s=>(e.classList.add(...s),()=>{e.classList.remove(...s)});return t=t===!0?t="":t||"",r(n(t))}function fS(e,t){let n=c=>c.split(" ").filter(Boolean),r=Object.entries(t).flatMap(([c,a])=>a?n(c):!1).filter(Boolean),s=Object.entries(t).flatMap(([c,a])=>a?!1:n(c)).filter(Boolean),o=[],i=[];return s.forEach(c=>{e.classList.contains(c)&&(e.classList.remove(c),i.push(c))}),r.forEach(c=>{e.classList.contains(c)||(e.classList.add(c),o.push(c))}),()=>{i.forEach(c=>e.classList.add(c)),o.forEach(c=>e.classList.remove(c))}}function ui(e,t){return typeof t=="object"&&t!==null?dS(e,t):hS(e,t)}function dS(e,t){let n={};return Object.entries(t).forEach(([r,s])=>{n[r]=e.style[r],r.startsWith("--")||(r=pS(r)),e.style.setProperty(r,s)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{ui(e,n)}}function hS(e,t){let n=e.getAttribute("style",t);return e.setAttribute("style",t),()=>{e.setAttribute("style",n||"")}}function pS(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Uc(e,t=()=>{}){let n=!1;return function(){n?t.apply(this,arguments):(n=!0,e.apply(this,arguments))}}de("transition",(e,{value:t,modifiers:n,expression:r},{evaluate:s})=>{typeof r=="function"&&(r=s(r)),r!==!1&&(!r||typeof r=="boolean"?gS(e,n,t):mS(e,r,t))});function mS(e,t,n){gp(e,fu,""),{enter:s=>{e._x_transition.enter.during=s},"enter-start":s=>{e._x_transition.enter.start=s},"enter-end":s=>{e._x_transition.enter.end=s},leave:s=>{e._x_transition.leave.during=s},"leave-start":s=>{e._x_transition.leave.start=s},"leave-end":s=>{e._x_transition.leave.end=s}}[n](t)}function gS(e,t,n){gp(e,ui);let r=!t.includes("in")&&!t.includes("out")&&!n,s=r||t.includes("in")||["enter"].includes(n),o=r||t.includes("out")||["leave"].includes(n);t.includes("in")&&!r&&(t=t.filter((b,S)=>S<t.indexOf("out"))),t.includes("out")&&!r&&(t=t.filter((b,S)=>S>t.indexOf("out")));let i=!t.includes("opacity")&&!t.includes("scale"),c=i||t.includes("opacity"),a=i||t.includes("scale"),l=c?0:1,f=a?Cr(t,"scale",95)/100:1,d=Cr(t,"delay",0)/1e3,p=Cr(t,"origin","center"),m="opacity, transform",y=Cr(t,"duration",150)/1e3,E=Cr(t,"duration",75)/1e3,g="cubic-bezier(0.4, 0.0, 0.2, 1)";s&&(e._x_transition.enter.during={transformOrigin:p,transitionDelay:`${d}s`,transitionProperty:m,transitionDuration:`${y}s`,transitionTimingFunction:g},e._x_transition.enter.start={opacity:l,transform:`scale(${f})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),o&&(e._x_transition.leave.during={transformOrigin:p,transitionDelay:`${d}s`,transitionProperty:m,transitionDuration:`${E}s`,transitionTimingFunction:g},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:l,transform:`scale(${f})`})}function gp(e,t,n={}){e._x_transition||(e._x_transition={enter:{during:n,start:n,end:n},leave:{during:n,start:n,end:n},in(r=()=>{},s=()=>{}){Bc(e,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},r,s)},out(r=()=>{},s=()=>{}){Bc(e,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},r,s)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,t,n,r){const s=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let o=()=>s(n);if(t){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(n):o():e._x_transition?e._x_transition.in(n):o();return}e._x_hidePromise=e._x_transition?new Promise((i,c)=>{e._x_transition.out(()=>{},()=>i(r)),e._x_transitioning&&e._x_transitioning.beforeCancel(()=>c({isFromCancelledTransition:!0}))}):Promise.resolve(r),queueMicrotask(()=>{let i=yp(e);i?(i._x_hideChildren||(i._x_hideChildren=[]),i._x_hideChildren.push(e)):s(()=>{let c=a=>{let l=Promise.all([a._x_hidePromise,...(a._x_hideChildren||[]).map(c)]).then(([f])=>f==null?void 0:f());return delete a._x_hidePromise,delete a._x_hideChildren,l};c(e).catch(a=>{if(!a.isFromCancelledTransition)throw a})})})};function yp(e){let t=e.parentNode;if(t)return t._x_hidePromise?t:yp(t)}function Bc(e,t,{during:n,start:r,end:s}={},o=()=>{},i=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(n).length===0&&Object.keys(r).length===0&&Object.keys(s).length===0){o(),i();return}let c,a,l;yS(e,{start(){c=t(e,r)},during(){a=t(e,n)},before:o,end(){c(),l=t(e,s)},after:i,cleanup(){a(),l()}})}function yS(e,t){let n,r,s,o=Uc(()=>{se(()=>{n=!0,r||t.before(),s||(t.end(),Kc()),t.after(),e.isConnected&&t.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(i){this.beforeCancels.push(i)},cancel:Uc(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();o()}),finish:o},se(()=>{t.start(),t.during()}),lS(),requestAnimationFrame(()=>{if(n)return;let i=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,c=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;i===0&&(i=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),se(()=>{t.before()}),r=!0,requestAnimationFrame(()=>{n||(se(()=>{t.end()}),Kc(),setTimeout(e._x_transitioning.finish,i+c),s=!0)})})}function Cr(e,t,n){if(e.indexOf(t)===-1)return n;const r=e[e.indexOf(t)+1];if(!r||t==="scale"&&isNaN(r))return n;if(t==="duration"||t==="delay"){let s=r.match(/([0-9]+)ms/);if(s)return s[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[r,e[e.indexOf(t)+2]].join(" "):r}var Gt=!1;function en(e,t=()=>{}){return(...n)=>Gt?t(...n):e(...n)}function _S(e){return(...t)=>Gt&&e(...t)}var _p=[];function li(e){_p.push(e)}function bS(e,t){_p.forEach(n=>n(e,t)),Gt=!0,bp(()=>{Ct(t,(n,r)=>{r(n,()=>{})})}),Gt=!1}var qc=!1;function SS(e,t){t._x_dataStack||(t._x_dataStack=e._x_dataStack),Gt=!0,qc=!0,bp(()=>{wS(t)}),Gt=!1,qc=!1}function wS(e){let t=!1;Ct(e,(r,s)=>{wn(r,(o,i)=>{if(t&&iS(o))return i();t=!0,s(o,i)})})}function bp(e){let t=Mn;Yl((n,r)=>{let s=t(n);return br(s),()=>{}}),e(),Yl(t)}function Sp(e,t,n,r=[]){switch(e._x_bindings||(e._x_bindings=_r({})),e._x_bindings[t]=n,t=r.includes("camel")?IS(t):t,t){case"value":vS(e,n);break;case"style":kS(e,n);break;case"class":ES(e,n);break;case"selected":case"checked":OS(e,t,n);break;default:wp(e,t,n);break}}function vS(e,t){if(kp(e))e.attributes.value===void 0&&(e.value=t),window.fromModel&&(typeof t=="boolean"?e.checked=mo(e.value)===t:e.checked=Xl(e.value,t));else if(du(e))Number.isInteger(t)?e.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?e.value=String(t):Array.isArray(t)?e.checked=t.some(n=>Xl(n,e.value)):e.checked=!!t;else if(e.tagName==="SELECT")xS(e,t);else{if(e.value===t)return;e.value=t===void 0?"":t}}function ES(e,t){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=fu(e,t)}function kS(e,t){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=ui(e,t)}function OS(e,t,n){wp(e,t,n),TS(e,t,n)}function wp(e,t,n){[null,void 0,!1].includes(n)&&AS(t)?e.removeAttribute(t):(vp(t)&&(n=t),$S(e,t,n))}function $S(e,t,n){e.getAttribute(t)!=n&&e.setAttribute(t,n)}function TS(e,t,n){e[t]!==n&&(e[t]=n)}function xS(e,t){const n=[].concat(t).map(r=>r+"");Array.from(e.options).forEach(r=>{r.selected=n.includes(r.value)})}function IS(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}function Xl(e,t){return e==t}function mo(e){return[1,"1","true","on","yes",!0].includes(e)?!0:[0,"0","false","off","no",!1].includes(e)?!1:e?!!e:null}var MS=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function vp(e){return MS.has(e)}function AS(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function NS(e,t,n){return e._x_bindings&&e._x_bindings[t]!==void 0?e._x_bindings[t]:Ep(e,t,n)}function RS(e,t,n,r=!0){if(e._x_bindings&&e._x_bindings[t]!==void 0)return e._x_bindings[t];if(e._x_inlineBindings&&e._x_inlineBindings[t]!==void 0){let s=e._x_inlineBindings[t];return s.extract=r,Qh(()=>pn(e,s.expression))}return Ep(e,t,n)}function Ep(e,t,n){let r=e.getAttribute(t);return r===null?typeof n=="function"?n():n:r===""?!0:vp(t)?!![t,"true"].includes(r):r}function du(e){return e.type==="checkbox"||e.localName==="ui-checkbox"||e.localName==="ui-switch"}function kp(e){return e.type==="radio"||e.localName==="ui-radio"}function Op(e,t){var n;return function(){var r=this,s=arguments,o=function(){n=null,e.apply(r,s)};clearTimeout(n),n=setTimeout(o,t)}}function $p(e,t){let n;return function(){let r=this,s=arguments;n||(e.apply(r,s),n=!0,setTimeout(()=>n=!1,t))}}function Tp({get:e,set:t},{get:n,set:r}){let s=!0,o,i=Mn(()=>{let c=e(),a=n();if(s)r(sc(c)),s=!1;else{let l=JSON.stringify(c),f=JSON.stringify(a);l!==o?r(sc(c)):l!==f&&t(sc(a))}o=JSON.stringify(e()),JSON.stringify(n())});return()=>{br(i)}}function sc(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}function CS(e){(Array.isArray(e)?e:[e]).forEach(n=>n($s))}var sn={},ef=!1;function PS(e,t){if(ef||(sn=_r(sn),ef=!0),t===void 0)return sn[e];sn[e]=t,Gh(sn[e]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&sn[e].init()}function FS(){return sn}var xp={};function jS(e,t){let n=typeof t!="function"?()=>t:t;return e instanceof Element?Ip(e,n()):(xp[e]=n,()=>{})}function LS(e){return Object.entries(xp).forEach(([t,n])=>{Object.defineProperty(e,t,{get(){return(...r)=>n(...r)}})}),e}function Ip(e,t,n){let r=[];for(;r.length;)r.pop()();let s=Object.entries(t).map(([i,c])=>({name:i,value:c})),o=tp(s);return s=s.map(i=>o.find(c=>c.name===i.name)?{name:`x-bind:${i.name}`,value:`"${i.value}"`}:i),iu(e,s,n).map(i=>{r.push(i.runCleanups),i()}),()=>{for(;r.length;)r.pop()()}}var Mp={};function DS(e,t){Mp[e]=t}function KS(e,t){return Object.entries(Mp).forEach(([n,r])=>{Object.defineProperty(e,n,{get(){return(...s)=>r.bind(t)(...s)},enumerable:!1})}),e}var US={get reactive(){return _r},get release(){return br},get effect(){return Mn},get raw(){return Dh},version:"3.14.9",flushAndStopDeferringMutations:qb,dontAutoEvaluateFunctions:Qh,disableEffectScheduling:Fb,startObservingMutations:nu,stopObservingMutations:Wh,setReactivityEngine:jb,onAttributeRemoved:Vh,onAttributesAdded:Jh,closestDataStack:Gn,skipDuringClone:en,onlyDuringClone:_S,addRootSelector:hp,addInitSelector:pp,interceptClone:li,addScopeToNode:ks,deferMutations:Bb,mapAttributes:cu,evaluateLater:Ce,interceptInit:cS,setEvaluator:Gb,mergeProxies:Os,extractProp:RS,findClosest:wr,onElRemoved:Xa,closestRoot:ai,destroyTree:vr,interceptor:Yh,transition:Bc,setStyles:ui,mutateDom:se,directive:de,entangle:Tp,throttle:$p,debounce:Op,evaluate:pn,initTree:Ct,nextTick:lu,prefixed:Sr,prefix:Xb,plugin:CS,magic:gt,store:PS,start:oS,clone:SS,cloneNode:bS,bound:NS,$data:zh,watch:Kh,walk:wn,data:DS,bind:jS},$s=US;function BS(e,t){const n=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return s=>!!n[s]}var qS=Object.freeze({}),JS=Object.prototype.hasOwnProperty,fi=(e,t)=>JS.call(e,t),mn=Array.isArray,es=e=>Ap(e)==="[object Map]",VS=e=>typeof e=="string",hu=e=>typeof e=="symbol",di=e=>e!==null&&typeof e=="object",HS=Object.prototype.toString,Ap=e=>HS.call(e),Np=e=>Ap(e).slice(8,-1),pu=e=>VS(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,WS=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},zS=WS(e=>e.charAt(0).toUpperCase()+e.slice(1)),Rp=(e,t)=>e!==t&&(e===e||t===t),Jc=new WeakMap,Pr=[],bt,gn=Symbol("iterate"),Vc=Symbol("Map key iterate");function GS(e){return e&&e._isEffect===!0}function YS(e,t=qS){GS(e)&&(e=e.raw);const n=XS(e,t);return t.lazy||n(),n}function ZS(e){e.active&&(Cp(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var QS=0;function XS(e,t){const n=function(){if(!n.active)return e();if(!Pr.includes(n)){Cp(n);try{return tw(),Pr.push(n),bt=n,e()}finally{Pr.pop(),Pp(),bt=Pr[Pr.length-1]}}};return n.id=QS++,n.allowRecurse=!!t.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=e,n.deps=[],n.options=t,n}function Cp(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var Yn=!0,mu=[];function ew(){mu.push(Yn),Yn=!1}function tw(){mu.push(Yn),Yn=!0}function Pp(){const e=mu.pop();Yn=e===void 0?!0:e}function ft(e,t,n){if(!Yn||bt===void 0)return;let r=Jc.get(e);r||Jc.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=new Set),s.has(bt)||(s.add(bt),bt.deps.push(s),bt.options.onTrack&&bt.options.onTrack({effect:bt,target:e,type:t,key:n}))}function Yt(e,t,n,r,s,o){const i=Jc.get(e);if(!i)return;const c=new Set,a=f=>{f&&f.forEach(d=>{(d!==bt||d.allowRecurse)&&c.add(d)})};if(t==="clear")i.forEach(a);else if(n==="length"&&mn(e))i.forEach((f,d)=>{(d==="length"||d>=r)&&a(f)});else switch(n!==void 0&&a(i.get(n)),t){case"add":mn(e)?pu(n)&&a(i.get("length")):(a(i.get(gn)),es(e)&&a(i.get(Vc)));break;case"delete":mn(e)||(a(i.get(gn)),es(e)&&a(i.get(Vc)));break;case"set":es(e)&&a(i.get(gn));break}const l=f=>{f.options.onTrigger&&f.options.onTrigger({effect:f,target:e,key:n,type:t,newValue:r,oldValue:s,oldTarget:o}),f.options.scheduler?f.options.scheduler(f):f()};c.forEach(l)}var nw=BS("__proto__,__v_isRef,__isVue"),Fp=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(hu)),rw=jp(),sw=jp(!0),tf=ow();function ow(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=X(this);for(let o=0,i=this.length;o<i;o++)ft(r,"get",o+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(X)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){ew();const r=X(this)[t].apply(this,n);return Pp(),r}}),e}function jp(e=!1,t=!1){return function(r,s,o){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_raw"&&o===(e?t?bw:Up:t?_w:Kp).get(r))return r;const i=mn(r);if(!e&&i&&fi(tf,s))return Reflect.get(tf,s,o);const c=Reflect.get(r,s,o);return(hu(s)?Fp.has(s):nw(s))||(e||ft(r,"get",s),t)?c:Hc(c)?!i||!pu(s)?c.value:c:di(c)?e?Bp(c):bu(c):c}}var iw=cw();function cw(e=!1){return function(n,r,s,o){let i=n[r];if(!e&&(s=X(s),i=X(i),!mn(n)&&Hc(i)&&!Hc(s)))return i.value=s,!0;const c=mn(n)&&pu(r)?Number(r)<n.length:fi(n,r),a=Reflect.set(n,r,s,o);return n===X(o)&&(c?Rp(s,i)&&Yt(n,"set",r,s,i):Yt(n,"add",r,s)),a}}function aw(e,t){const n=fi(e,t),r=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&Yt(e,"delete",t,void 0,r),s}function uw(e,t){const n=Reflect.has(e,t);return(!hu(t)||!Fp.has(t))&&ft(e,"has",t),n}function lw(e){return ft(e,"iterate",mn(e)?"length":gn),Reflect.ownKeys(e)}var fw={get:rw,set:iw,deleteProperty:aw,has:uw,ownKeys:lw},dw={get:sw,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},gu=e=>di(e)?bu(e):e,yu=e=>di(e)?Bp(e):e,_u=e=>e,hi=e=>Reflect.getPrototypeOf(e);function Zs(e,t,n=!1,r=!1){e=e.__v_raw;const s=X(e),o=X(t);t!==o&&!n&&ft(s,"get",t),!n&&ft(s,"get",o);const{has:i}=hi(s),c=r?_u:n?yu:gu;if(i.call(s,t))return c(e.get(t));if(i.call(s,o))return c(e.get(o));e!==s&&e.get(t)}function Qs(e,t=!1){const n=this.__v_raw,r=X(n),s=X(e);return e!==s&&!t&&ft(r,"has",e),!t&&ft(r,"has",s),e===s?n.has(e):n.has(e)||n.has(s)}function Xs(e,t=!1){return e=e.__v_raw,!t&&ft(X(e),"iterate",gn),Reflect.get(e,"size",e)}function nf(e){e=X(e);const t=X(this);return hi(t).has.call(t,e)||(t.add(e),Yt(t,"add",e,e)),this}function rf(e,t){t=X(t);const n=X(this),{has:r,get:s}=hi(n);let o=r.call(n,e);o?Dp(n,r,e):(e=X(e),o=r.call(n,e));const i=s.call(n,e);return n.set(e,t),o?Rp(t,i)&&Yt(n,"set",e,t,i):Yt(n,"add",e,t),this}function sf(e){const t=X(this),{has:n,get:r}=hi(t);let s=n.call(t,e);s?Dp(t,n,e):(e=X(e),s=n.call(t,e));const o=r?r.call(t,e):void 0,i=t.delete(e);return s&&Yt(t,"delete",e,void 0,o),i}function of(){const e=X(this),t=e.size!==0,n=es(e)?new Map(e):new Set(e),r=e.clear();return t&&Yt(e,"clear",void 0,void 0,n),r}function eo(e,t){return function(r,s){const o=this,i=o.__v_raw,c=X(i),a=t?_u:e?yu:gu;return!e&&ft(c,"iterate",gn),i.forEach((l,f)=>r.call(s,a(l),a(f),o))}}function to(e,t,n){return function(...r){const s=this.__v_raw,o=X(s),i=es(o),c=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,l=s[e](...r),f=n?_u:t?yu:gu;return!t&&ft(o,"iterate",a?Vc:gn),{next(){const{value:d,done:p}=l.next();return p?{value:d,done:p}:{value:c?[f(d[0]),f(d[1])]:f(d),done:p}},[Symbol.iterator](){return this}}}}function Bt(e){return function(...t){{const n=t[0]?`on key "${t[0]}" `:"";console.warn(`${zS(e)} operation ${n}failed: target is readonly.`,X(this))}return e==="delete"?!1:this}}function hw(){const e={get(o){return Zs(this,o)},get size(){return Xs(this)},has:Qs,add:nf,set:rf,delete:sf,clear:of,forEach:eo(!1,!1)},t={get(o){return Zs(this,o,!1,!0)},get size(){return Xs(this)},has:Qs,add:nf,set:rf,delete:sf,clear:of,forEach:eo(!1,!0)},n={get(o){return Zs(this,o,!0)},get size(){return Xs(this,!0)},has(o){return Qs.call(this,o,!0)},add:Bt("add"),set:Bt("set"),delete:Bt("delete"),clear:Bt("clear"),forEach:eo(!0,!1)},r={get(o){return Zs(this,o,!0,!0)},get size(){return Xs(this,!0)},has(o){return Qs.call(this,o,!0)},add:Bt("add"),set:Bt("set"),delete:Bt("delete"),clear:Bt("clear"),forEach:eo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=to(o,!1,!1),n[o]=to(o,!0,!1),t[o]=to(o,!1,!0),r[o]=to(o,!0,!0)}),[e,n,t,r]}var[pw,mw,nC,rC]=hw();function Lp(e,t){const n=e?mw:pw;return(r,s,o)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(fi(n,s)&&s in r?n:r,s,o)}var gw={get:Lp(!1)},yw={get:Lp(!0)};function Dp(e,t,n){const r=X(n);if(r!==n&&t.call(e,r)){const s=Np(e);console.warn(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Kp=new WeakMap,_w=new WeakMap,Up=new WeakMap,bw=new WeakMap;function Sw(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ww(e){return e.__v_skip||!Object.isExtensible(e)?0:Sw(Np(e))}function bu(e){return e&&e.__v_isReadonly?e:qp(e,!1,fw,gw,Kp)}function Bp(e){return qp(e,!0,dw,yw,Up)}function qp(e,t,n,r,s){if(!di(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=s.get(e);if(o)return o;const i=ww(e);if(i===0)return e;const c=new Proxy(e,i===2?r:n);return s.set(e,c),c}function X(e){return e&&X(e.__v_raw)||e}function Hc(e){return!!(e&&e.__v_isRef===!0)}gt("nextTick",()=>lu);gt("dispatch",e=>Xr.bind(Xr,e));gt("watch",(e,{evaluateLater:t,cleanup:n})=>(r,s)=>{let o=t(r),c=Kh(()=>{let a;return o(l=>a=l),a},s);n(c)});gt("store",FS);gt("data",e=>zh(e));gt("root",e=>ai(e));gt("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=Os(vw(e))),e._x_refs_proxy));function vw(e){let t=[];return wr(e,n=>{n._x_refs&&t.push(n._x_refs)}),t}var oc={};function Jp(e){return oc[e]||(oc[e]=0),++oc[e]}function Ew(e,t){return wr(e,n=>{if(n._x_ids&&n._x_ids[t])return!0})}function kw(e,t){e._x_ids||(e._x_ids={}),e._x_ids[t]||(e._x_ids[t]=Jp(t))}gt("id",(e,{cleanup:t})=>(n,r=null)=>{let s=`${n}${r?`-${r}`:""}`;return Ow(e,s,t,()=>{let o=Ew(e,n),i=o?o._x_ids[n]:Jp(n);return r?`${n}-${i}-${r}`:`${n}-${i}`})});li((e,t)=>{e._x_id&&(t._x_id=e._x_id)});function Ow(e,t,n,r){if(e._x_id||(e._x_id={}),e._x_id[t])return e._x_id[t];let s=r();return e._x_id[t]=s,n(()=>{delete e._x_id[t]}),s}gt("el",e=>e);Vp("Focus","focus","focus");Vp("Persist","persist","persist");function Vp(e,t,n){gt(t,r=>Xe(`You can't use [$${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,r))}de("modelable",(e,{expression:t},{effect:n,evaluateLater:r,cleanup:s})=>{let o=r(t),i=()=>{let f;return o(d=>f=d),f},c=r(`${t} = __placeholder`),a=f=>c(()=>{},{scope:{__placeholder:f}}),l=i();a(l),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let f=e._x_model.get,d=e._x_model.set,p=Tp({get(){return f()},set(m){d(m)}},{get(){return i()},set(m){a(m)}});s(p)})});de("teleport",(e,{modifiers:t,expression:n},{cleanup:r})=>{e.tagName.toLowerCase()!=="template"&&Xe("x-teleport can only be used on a <template> tag",e);let s=cf(n),o=e.content.cloneNode(!0).firstElementChild;e._x_teleport=o,o._x_teleportBack=e,e.setAttribute("data-teleport-template",!0),o.setAttribute("data-teleport-target",!0),e._x_forwardEvents&&e._x_forwardEvents.forEach(c=>{o.addEventListener(c,a=>{a.stopPropagation(),e.dispatchEvent(new a.constructor(a.type,a))})}),ks(o,{},e);let i=(c,a,l)=>{l.includes("prepend")?a.parentNode.insertBefore(c,a):l.includes("append")?a.parentNode.insertBefore(c,a.nextSibling):a.appendChild(c)};se(()=>{i(o,s,t),en(()=>{Ct(o)})()}),e._x_teleportPutBack=()=>{let c=cf(n);se(()=>{i(e._x_teleport,c,t)})},r(()=>se(()=>{o.remove(),vr(o)}))});var $w=document.createElement("div");function cf(e){let t=en(()=>document.querySelector(e),()=>$w)();return t||Xe(`Cannot find x-teleport element for selector: "${e}"`),t}var Hp=()=>{};Hp.inline=(e,{modifiers:t},{cleanup:n})=>{t.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,n(()=>{t.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};de("ignore",Hp);de("effect",en((e,{expression:t},{effect:n})=>{n(Ce(e,t))}));function Wc(e,t,n,r){let s=e,o=a=>r(a),i={},c=(a,l)=>f=>l(a,f);if(n.includes("dot")&&(t=Tw(t)),n.includes("camel")&&(t=xw(t)),n.includes("passive")&&(i.passive=!0),n.includes("capture")&&(i.capture=!0),n.includes("window")&&(s=window),n.includes("document")&&(s=document),n.includes("debounce")){let a=n[n.indexOf("debounce")+1]||"invalid-wait",l=No(a.split("ms")[0])?Number(a.split("ms")[0]):250;o=Op(o,l)}if(n.includes("throttle")){let a=n[n.indexOf("throttle")+1]||"invalid-wait",l=No(a.split("ms")[0])?Number(a.split("ms")[0]):250;o=$p(o,l)}return n.includes("prevent")&&(o=c(o,(a,l)=>{l.preventDefault(),a(l)})),n.includes("stop")&&(o=c(o,(a,l)=>{l.stopPropagation(),a(l)})),n.includes("once")&&(o=c(o,(a,l)=>{a(l),s.removeEventListener(t,o,i)})),(n.includes("away")||n.includes("outside"))&&(s=document,o=c(o,(a,l)=>{e.contains(l.target)||l.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&a(l))})),n.includes("self")&&(o=c(o,(a,l)=>{l.target===e&&a(l)})),(Mw(t)||Wp(t))&&(o=c(o,(a,l)=>{Aw(l,n)||a(l)})),s.addEventListener(t,o,i),()=>{s.removeEventListener(t,o,i)}}function Tw(e){return e.replace(/-/g,".")}function xw(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}function No(e){return!Array.isArray(e)&&!isNaN(e)}function Iw(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Mw(e){return["keydown","keyup"].includes(e)}function Wp(e){return["contextmenu","click","mouse"].some(t=>e.includes(t))}function Aw(e,t){let n=t.filter(o=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(o));if(n.includes("debounce")){let o=n.indexOf("debounce");n.splice(o,No((n[o+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.includes("throttle")){let o=n.indexOf("throttle");n.splice(o,No((n[o+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.length===0||n.length===1&&af(e.key).includes(n[0]))return!1;const s=["ctrl","shift","alt","meta","cmd","super"].filter(o=>n.includes(o));return n=n.filter(o=>!s.includes(o)),!(s.length>0&&s.filter(i=>((i==="cmd"||i==="super")&&(i="meta"),e[`${i}Key`])).length===s.length&&(Wp(e.type)||af(e.key).includes(n[0])))}function af(e){if(!e)return[];e=Iw(e);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[e]=e,Object.keys(t).map(n=>{if(t[n]===e)return n}).filter(n=>n)}de("model",(e,{modifiers:t,expression:n},{effect:r,cleanup:s})=>{let o=e;t.includes("parent")&&(o=e.parentNode);let i=Ce(o,n),c;typeof n=="string"?c=Ce(o,`${n} = __placeholder`):typeof n=="function"&&typeof n()=="string"?c=Ce(o,`${n()} = __placeholder`):c=()=>{};let a=()=>{let p;return i(m=>p=m),uf(p)?p.get():p},l=p=>{let m;i(y=>m=y),uf(m)?m.set(p):c(()=>{},{scope:{__placeholder:p}})};typeof n=="string"&&e.type==="radio"&&se(()=>{e.hasAttribute("name")||e.setAttribute("name",n)});var f=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||t.includes("lazy")?"change":"input";let d=Gt?()=>{}:Wc(e,f,t,p=>{l(ic(e,t,p,a()))});if(t.includes("fill")&&([void 0,null,""].includes(a())||du(e)&&Array.isArray(a())||e.tagName.toLowerCase()==="select"&&e.multiple)&&l(ic(e,t,{target:e},a())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=d,s(()=>e._x_removeModelListeners.default()),e.form){let p=Wc(e.form,"reset",[],m=>{lu(()=>e._x_model&&e._x_model.set(ic(e,t,{target:e},a())))});s(()=>p())}e._x_model={get(){return a()},set(p){l(p)}},e._x_forceModelUpdate=p=>{p===void 0&&typeof n=="string"&&n.match(/\./)&&(p=""),window.fromModel=!0,se(()=>Sp(e,"value",p)),delete window.fromModel},r(()=>{let p=a();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(p)})});function ic(e,t,n,r){return se(()=>{if(n instanceof CustomEvent&&n.detail!==void 0)return n.detail!==null&&n.detail!==void 0?n.detail:n.target.value;if(du(e))if(Array.isArray(r)){let s=null;return t.includes("number")?s=cc(n.target.value):t.includes("boolean")?s=mo(n.target.value):s=n.target.value,n.target.checked?r.includes(s)?r:r.concat([s]):r.filter(o=>!Nw(o,s))}else return n.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return t.includes("number")?Array.from(n.target.selectedOptions).map(s=>{let o=s.value||s.text;return cc(o)}):t.includes("boolean")?Array.from(n.target.selectedOptions).map(s=>{let o=s.value||s.text;return mo(o)}):Array.from(n.target.selectedOptions).map(s=>s.value||s.text);{let s;return kp(e)?n.target.checked?s=n.target.value:s=r:s=n.target.value,t.includes("number")?cc(s):t.includes("boolean")?mo(s):t.includes("trim")?s.trim():s}}})}function cc(e){let t=e?parseFloat(e):null;return Rw(t)?t:e}function Nw(e,t){return e==t}function Rw(e){return!Array.isArray(e)&&!isNaN(e)}function uf(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}de("cloak",e=>queueMicrotask(()=>se(()=>e.removeAttribute(Sr("cloak")))));pp(()=>`[${Sr("init")}]`);de("init",en((e,{expression:t},{evaluate:n})=>typeof t=="string"?!!t.trim()&&n(t,{},!1):n(t,{},!1)));de("text",(e,{expression:t},{effect:n,evaluateLater:r})=>{let s=r(t);n(()=>{s(o=>{se(()=>{e.textContent=o})})})});de("html",(e,{expression:t},{effect:n,evaluateLater:r})=>{let s=r(t);n(()=>{s(o=>{se(()=>{e.innerHTML=o,e._x_ignoreSelf=!0,Ct(e),delete e._x_ignoreSelf})})})});cu(sp(":",op(Sr("bind:"))));var zp=(e,{value:t,modifiers:n,expression:r,original:s},{effect:o,cleanup:i})=>{if(!t){let a={};LS(a),Ce(e,r)(f=>{Ip(e,f,s)},{scope:a});return}if(t==="key")return Cw(e,r);if(e._x_inlineBindings&&e._x_inlineBindings[t]&&e._x_inlineBindings[t].extract)return;let c=Ce(e,r);o(()=>c(a=>{a===void 0&&typeof r=="string"&&r.match(/\./)&&(a=""),se(()=>Sp(e,t,a,n))})),i(()=>{e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedStyles&&e._x_undoAddedStyles()})};zp.inline=(e,{value:t,modifiers:n,expression:r})=>{t&&(e._x_inlineBindings||(e._x_inlineBindings={}),e._x_inlineBindings[t]={expression:r,extract:!1})};de("bind",zp);function Cw(e,t){e._x_keyExpression=t}hp(()=>`[${Sr("data")}]`);de("data",(e,{expression:t},{cleanup:n})=>{if(Pw(e))return;t=t===""?"{}":t;let r={};Fc(r,e);let s={};KS(s,r);let o=pn(e,t,{scope:s});(o===void 0||o===!0)&&(o={}),Fc(o,e);let i=_r(o);Gh(i);let c=ks(e,i);i.init&&pn(e,i.init),n(()=>{i.destroy&&pn(e,i.destroy),c()})});li((e,t)=>{e._x_dataStack&&(t._x_dataStack=e._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function Pw(e){return Gt?qc?!0:e.hasAttribute("data-has-alpine-state"):!1}de("show",(e,{modifiers:t,expression:n},{effect:r})=>{let s=Ce(e,n);e._x_doHide||(e._x_doHide=()=>{se(()=>{e.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{se(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let o=()=>{e._x_doHide(),e._x_isShown=!1},i=()=>{e._x_doShow(),e._x_isShown=!0},c=()=>setTimeout(i),a=Uc(d=>d?i():o(),d=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,d,i,o):d?c():o()}),l,f=!0;r(()=>s(d=>{!f&&d===l||(t.includes("immediate")&&(d?c():o()),a(d),l=d,f=!1)}))});de("for",(e,{expression:t},{effect:n,cleanup:r})=>{let s=jw(t),o=Ce(e,s.items),i=Ce(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},n(()=>Fw(e,s,o,i)),r(()=>{Object.values(e._x_lookup).forEach(c=>se(()=>{vr(c),c.remove()})),delete e._x_prevKeys,delete e._x_lookup})});function Fw(e,t,n,r){let s=i=>typeof i=="object"&&!Array.isArray(i),o=e;n(i=>{Lw(i)&&i>=0&&(i=Array.from(Array(i).keys(),g=>g+1)),i===void 0&&(i=[]);let c=e._x_lookup,a=e._x_prevKeys,l=[],f=[];if(s(i))i=Object.entries(i).map(([g,b])=>{let S=lf(t,b,g,i);r(w=>{f.includes(w)&&Xe("Duplicate key on x-for",e),f.push(w)},{scope:{index:g,...S}}),l.push(S)});else for(let g=0;g<i.length;g++){let b=lf(t,i[g],g,i);r(S=>{f.includes(S)&&Xe("Duplicate key on x-for",e),f.push(S)},{scope:{index:g,...b}}),l.push(b)}let d=[],p=[],m=[],y=[];for(let g=0;g<a.length;g++){let b=a[g];f.indexOf(b)===-1&&m.push(b)}a=a.filter(g=>!m.includes(g));let E="template";for(let g=0;g<f.length;g++){let b=f[g],S=a.indexOf(b);if(S===-1)a.splice(g,0,b),d.push([E,g]);else if(S!==g){let w=a.splice(g,1)[0],O=a.splice(S-1,1)[0];a.splice(g,0,O),a.splice(S,0,w),p.push([w,O])}else y.push(b);E=b}for(let g=0;g<m.length;g++){let b=m[g];b in c&&(se(()=>{vr(c[b]),c[b].remove()}),delete c[b])}for(let g=0;g<p.length;g++){let[b,S]=p[g],w=c[b],O=c[S],v=document.createElement("div");se(()=>{O||Xe('x-for ":key" is undefined or invalid',o,S,c),O.after(v),w.after(O),O._x_currentIfEl&&O.after(O._x_currentIfEl),v.before(w),w._x_currentIfEl&&w.after(w._x_currentIfEl),v.remove()}),O._x_refreshXForScope(l[f.indexOf(S)])}for(let g=0;g<d.length;g++){let[b,S]=d[g],w=b==="template"?o:c[b];w._x_currentIfEl&&(w=w._x_currentIfEl);let O=l[S],v=f[S],k=document.importNode(o.content,!0).firstElementChild,$=_r(O);ks(k,$,o),k._x_refreshXForScope=x=>{Object.entries(x).forEach(([M,q])=>{$[M]=q})},se(()=>{w.after(k),en(()=>Ct(k))()}),typeof v=="object"&&Xe("x-for key cannot be an object, it must be a string or an integer",o),c[v]=k}for(let g=0;g<y.length;g++)c[y[g]]._x_refreshXForScope(l[f.indexOf(y[g])]);o._x_prevKeys=f})}function jw(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,n=/^\s*\(|\)\s*$/g,r=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,s=e.match(r);if(!s)return;let o={};o.items=s[2].trim();let i=s[1].replace(n,"").trim(),c=i.match(t);return c?(o.item=i.replace(t,"").trim(),o.index=c[1].trim(),c[2]&&(o.collection=c[2].trim())):o.item=i,o}function lf(e,t,n,r){let s={};return/^\[.*\]$/.test(e.item)&&Array.isArray(t)?e.item.replace("[","").replace("]","").split(",").map(i=>i.trim()).forEach((i,c)=>{s[i]=t[c]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(t)&&typeof t=="object"?e.item.replace("{","").replace("}","").split(",").map(i=>i.trim()).forEach(i=>{s[i]=t[i]}):s[e.item]=t,e.index&&(s[e.index]=n),e.collection&&(s[e.collection]=r),s}function Lw(e){return!Array.isArray(e)&&!isNaN(e)}function Gp(){}Gp.inline=(e,{expression:t},{cleanup:n})=>{let r=ai(e);r._x_refs||(r._x_refs={}),r._x_refs[t]=e,n(()=>delete r._x_refs[t])};de("ref",Gp);de("if",(e,{expression:t},{effect:n,cleanup:r})=>{e.tagName.toLowerCase()!=="template"&&Xe("x-if can only be used on a <template> tag",e);let s=Ce(e,t),o=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let c=e.content.cloneNode(!0).firstElementChild;return ks(c,{},e),se(()=>{e.after(c),en(()=>Ct(c))()}),e._x_currentIfEl=c,e._x_undoIf=()=>{se(()=>{vr(c),c.remove()}),delete e._x_currentIfEl},c},i=()=>{e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)};n(()=>s(c=>{c?o():i()})),r(()=>e._x_undoIf&&e._x_undoIf())});de("id",(e,{expression:t},{evaluate:n})=>{n(t).forEach(s=>kw(e,s))});li((e,t)=>{e._x_ids&&(t._x_ids=e._x_ids)});cu(sp("@",op(Sr("on:"))));de("on",en((e,{value:t,modifiers:n,expression:r},{cleanup:s})=>{let o=r?Ce(e,r):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(t)||e._x_forwardEvents.push(t));let i=Wc(e,t,n,c=>{o(()=>{},{scope:{$event:c},params:[c]})});s(()=>i())}));pi("Collapse","collapse","collapse");pi("Intersect","intersect","intersect");pi("Focus","trap","focus");pi("Mask","mask","mask");function pi(e,t,n){de(t,r=>Xe(`You can't use [x-${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,r))}$s.setEvaluator(ep);$s.setReactivityEngine({reactive:bu,effect:YS,release:ZS,raw:X});var Dw=$s,An=Dw;const Kw=e=>typeof e=="function",h=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):n=>t(n,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(n,r){return arguments.length>=2?t(n,r):function(s){return t(s,n)}};case 3:return function(n,r,s){return arguments.length>=3?t(n,r,s):function(o){return t(o,n,r)}};case 4:return function(n,r,s,o){return arguments.length>=4?t(n,r,s,o):function(i){return t(i,n,r,s)}};case 5:return function(n,r,s,o,i){return arguments.length>=5?t(n,r,s,o,i):function(c){return t(c,n,r,s,o)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(r){return t(r,...n)}}}},te=e=>e,mi=e=>()=>e,ff=mi(!0),zc=mi(!1),Yp=mi(void 0),Uw=Yp;function _(e,t,n,r,s,o,i,c,a){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return s(r(n(t(e))));case 6:return o(s(r(n(t(e)))));case 7:return i(o(s(r(n(t(e))))));case 8:return c(i(o(s(r(n(t(e)))))));case 9:return a(c(i(o(s(r(n(t(e))))))));default:{let l=arguments[0];for(let f=1;f<arguments.length;f++)l=arguments[f](l);return l}}}const Su=e=>(t,n)=>t===n||e(t,n),Bw=h(2,(e,t)=>Su((n,r)=>e(t(n),t(r)))),qw=e=>Su((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0});let Jw="3.15.4";const gi=()=>Jw,no=`effect/GlobalValue/globalStoreId/${gi()}`;let Fr;const J=(e,t)=>(Fr||(globalThis[no]??(globalThis[no]=new Map),Fr=globalThis[no]),Fr.has(e)||Fr.set(e,t()),Fr.get(e)),qe=e=>typeof e=="string",Pt=e=>typeof e=="number",Zn=e=>typeof e=="boolean",yi=e=>typeof e=="bigint",Gc=e=>typeof e=="symbol",Ts=Kw,Vw=e=>e===void 0,Hw=e=>!1,wu=e=>typeof e=="object"&&e!==null,tn=e=>wu(e)||Ts(e),F=h(2,(e,t)=>tn(e)&&t in e),Zp=h(2,(e,t)=>F(e,"_tag")&&e._tag===t),Fn=e=>e==null,Ww=e=>e!=null,zw=e=>e instanceof Date,Qp=e=>F(e,Symbol.iterator),Gw=e=>wu(e)&&!Array.isArray(e),Yw=e=>F(e,"then")&&Ts(e.then),_i=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;let Xp=class em{constructor(t){u(this,"self");u(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new em(this.self)}};const Zw=335903614,Qw=4150755663,Xw=1481765933,ev=1284865837,tv=9007199254740992,nv=134217728;class rv{constructor(t,n,r,s){u(this,"_state");return Fn(n)&&Fn(t)?(n=Math.random()*4294967295>>>0,t=0):Fn(n)&&(n=t,t=0),Fn(s)&&Fn(r)?(s=this._state?this._state[3]:Qw,r=this._state?this._state[2]:Zw):Fn(s)&&(s=r,r=0),this._state=new Int32Array([0,0,r>>>0,((s||0)|1)>>>0]),this._next(),df(this._state,this._state[0],this._state[1],t>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){const t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*nv+n)/tv}_next(){const t=this._state[0]>>>0,n=this._state[1]>>>0;sv(this._state,t,n,Xw,ev),df(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=t>>>18,s=(n>>>18|t<<14)>>>0;r=(r^t)>>>0,s=(s^n)>>>0;const o=(s>>>27|r<<5)>>>0,i=t>>>27,c=(-i>>>0&31)>>>0;return(o>>>i|o<<c)>>>0}}function sv(e,t,n,r,s){let o=(n>>>16)*(s&65535)>>>0,i=(n&65535)*(s>>>16)>>>0,c=(n&65535)*(s&65535)>>>0,a=(n>>>16)*(s>>>16)+((i>>>16)+(o>>>16))>>>0;i=i<<16>>>0,c=c+i>>>0,c>>>0<i>>>0&&(a=a+1>>>0),o=o<<16>>>0,c=c+o>>>0,c>>>0<o>>>0&&(a=a+1>>>0),a=a+Math.imul(n,r)>>>0,a=a+Math.imul(t,s)>>>0,e[0]=a,e[1]=c}function df(e,t,n,r,s){let o=t+r>>>0;const i=n+s>>>0;i>>>0<n>>>0&&(o=o+1|0),e[0]=o,e[1]=i}const Yc=Symbol.for("effect/Utils/YieldWrap");var Es;class xs{constructor(t){zl(this,Es);Gl(this,Es,t)}[Yc](){return Wl(this,Es)}}Es=new WeakMap;function ov(e){if(typeof e=="object"&&e!==null&&Yc in e)return e[Yc]();throw new Error(_i("yieldWrapGet"))}const Ye=J("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),tm={effect_internal_function:e=>e()},iv={effect_internal_function:e=>{try{return e()}finally{}}};var Wd;const cv=((Wd=tm.effect_internal_function(()=>new Error().stack))==null?void 0:Wd.includes("effect_internal_function"))===!0,Re=cv?tm.effect_internal_function:iv.effect_internal_function,ac=J(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),K=Symbol.for("effect/Hash"),I=e=>{if(Ye.enabled===!0)return 0;switch(typeof e){case"number":return Si(e);case"bigint":return le(e.toString(10));case"boolean":return le(String(e));case"symbol":return le(String(e));case"string":return le(e);case"undefined":return le("undefined");case"function":case"object":return e===null?le("null"):e instanceof Date?I(e.toISOString()):e instanceof URL?I(e.href):av(e)?e[K]():vu(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},vu=e=>(ac.has(e)||ac.set(e,Si(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),ac.get(e)),V=e=>t=>t*53^e,bi=e=>e&3221225471|e>>>1&1073741824,av=e=>F(e,K),Si=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return bi(t)},le=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return bi(t)},uv=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=_(le(t[r]),V(I(e[t[r]])));return bi(n)},nm=e=>uv(e,Object.keys(e)),Is=e=>{let t=6151;for(let n=0;n<e.length;n++)t=_(t,V(I(e[n])));return bi(t)},ie=function(){if(arguments.length===1){const n=arguments[0];return function(r){return Object.defineProperty(n,K,{value(){return r},enumerable:!1}),r}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,K,{value(){return t},enumerable:!1}),t},L=Symbol.for("effect/Equal");function U(){return arguments.length===1?e=>Ro(e,arguments[0]):Ro(arguments[0],arguments[1])}function Ro(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if(n==="object"||n==="function"){if(e!==null&&t!==null){if(Co(e)&&Co(t))return I(e)===I(t)&&e[L](t)?!0:Ye.enabled&&Ye.tester?Ye.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString();if(e instanceof URL&&t instanceof URL)return e.href===t.href}if(Ye.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((r,s)=>Ro(r,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const r=Object.keys(e),s=Object.keys(t);if(r.length===s.length){for(const o of r)if(!(o in t&&Ro(e[o],t[o])))return Ye.tester?Ye.tester(e,t):!1;return!0}}return Ye.tester?Ye.tester(e,t):!1}}return Ye.enabled&&Ye.tester?Ye.tester(e,t):!1}const Co=e=>F(e,L),Eu=()=>U,ne=Symbol.for("nodejs.util.inspect.custom"),ge=e=>{try{if(F(e,"toJSON")&&Ts(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(ge)}catch{return{}}return fv(e)},Ee=e=>JSON.stringify(e,null,2),Qn=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?rm(e,t):String(e)}catch{return String(e)}},rm=(e,t)=>{let n=[];const r=JSON.stringify(e,(s,o)=>typeof o=="object"&&o!==null?n.includes(o)?void 0:n.push(o)&&(yn.fiberRefs!==void 0&&sm(o)?o[ku](yn.fiberRefs):o):o,t);return n=void 0,r},ku=Symbol.for("effect/Inspectable/Redactable"),sm=e=>typeof e=="object"&&e!==null&&ku in e,yn=J("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),lv=(e,t)=>{const n=yn.fiberRefs;yn.fiberRefs=e;try{return t()}finally{yn.fiberRefs=n}},fv=e=>sm(e)&&yn.fiberRefs!==void 0?e[ku](yn.fiberRefs):e,N=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let r=0,s=t.length;r<s;r++)n=t[r](n);return n}}},ts="Async",wi="Commit",at="Failure",uc="OnFailure",Po="OnSuccess",Fo="OnSuccessAndFailure",ut="Success",om="Sync",dv="Tag",Ms="UpdateRuntimeFlags",jo="While",go="Iterator",im="WithRuntime",yo="Yield",Ou="RevertFlags",hv=Symbol.for("effect/Effect"),pv=Symbol.for("effect/Stream"),mv=Symbol.for("effect/Sink"),gv=Symbol.for("effect/Channel"),Xn={_R:e=>e,_E:e=>e,_A:e=>e,_V:gi()},yv={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},_v={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},As={[hv]:Xn,[pv]:Xn,[mv]:yv,[gv]:_v,[L](e){return this===e},[K](){return ie(this,vu(this))},[Symbol.iterator](){return new Xp(new xs(this))},pipe(){return N(this,arguments)}},$u={[K](){return ie(this,nm(this))},[L](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const r of t)if(!(r in e&&U(this[r],e[r])))return!1;return!0}},Ns={...As,_op:wi},bv={...Ns,...$u},Sv=function(){function e(){}return e.prototype=Ns,e}(),cm=Symbol.for("effect/Option"),am={...As,[cm]:{_A:e=>e},[ne](){return this.toJSON()},toString(){return Ee(this.toJSON())}},wv=Object.assign(Object.create(am),{_tag:"Some",_op:"Some",[L](e){return um(e)&&fm(e)&&U(this.value,e.value)},[K](){return ie(this,V(I(this._tag))(I(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:ge(this.value)}}}),vv=I("None"),Ev=Object.assign(Object.create(am),{_tag:"None",_op:"None",[L](e){return um(e)&&lm(e)},[K](){return vv},toJSON(){return{_id:"Option",_tag:this._tag}}}),um=e=>F(e,cm),lm=e=>e._tag==="None",fm=e=>e._tag==="Some",dm=Object.create(Ev),Zc=e=>{const t=Object.create(wv);return t.value=e,t},hm=Symbol.for("effect/Either"),pm={...As,[hm]:{_R:e=>e},[ne](){return this.toJSON()},toString(){return Ee(this.toJSON())}},kv=Object.assign(Object.create(pm),{_tag:"Right",_op:"Right",[L](e){return Tu(e)&&gm(e)&&U(this.right,e.right)},[K](){return V(I(this._tag))(I(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:ge(this.right)}}}),Ov=Object.assign(Object.create(pm),{_tag:"Left",_op:"Left",[L](e){return Tu(e)&&mm(e)&&U(this.left,e.left)},[K](){return V(I(this._tag))(I(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:ge(this.left)}}}),Tu=e=>F(e,hm),mm=e=>e._tag==="Left",gm=e=>e._tag==="Right",$v=e=>{const t=Object.create(Ov);return t.left=e,t},Tv=e=>{const t=Object.create(kv);return t.right=e,t},H=Tv,B=$v,xv=Tu,Te=mm,vt=gm,Iv=h(2,(e,t)=>Te(e)?B(t(e.left)):H(e.right)),Mv=h(2,(e,t)=>vt(e)?H(t(e.right)):B(e.left)),xu=h(2,(e,{onLeft:t,onRight:n})=>Te(e)?t(e.left):n(e.right)),Av=xu({onLeft:te,onRight:te}),ym=h(2,(e,t)=>{if(vt(e))return e.right;throw t(e.left)}),Nv=ym(()=>new Error("getOrThrow called on a Left")),_m=e=>e.length>0,bm=e=>(t,n)=>t===n?0:e(t,n),Sm=bm((e,t)=>e<t?-1:1),wm=h(2,(e,t)=>bm((n,r)=>e(t(n),t(r)))),Rv=e=>h(2,(t,n)=>e(t,n)===1),A=()=>dm,j=Zc,ve=lm,xe=fm,Je=h(2,(e,{onNone:t,onSome:n})=>ve(e)?t():n(e.value)),ke=h(2,(e,t)=>ve(e)?t():e.value),zt=h(2,(e,t)=>ve(e)?t():e),Cv=h(2,(e,t)=>ve(e)?j(t()):e),vi=e=>e==null?A():j(e),St=ke(Yp),Pv=e=>(...t)=>{try{return j(e(...t))}catch{return A()}},vm=h(2,(e,t)=>ve(e)?A():j(t(e.value))),Ei=h(2,(e,t)=>ve(e)?A():t(e.value)),Fv=h(2,(e,t)=>ve(e)?A():vi(t(e.value))),jv=e=>h(2,(t,n)=>ve(t)?!1:e(t.value,n)),Lv=Eu(),Dv=jv(Lv),Kv=h(2,(e,t)=>ve(e)?!1:t(e.value)),Uv=(...e)=>e,ki=e=>new Array(e),Bv=h(2,(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new Array(n);for(let s=0;s<n;s++)r[s]=t(s);return r}),ae=e=>Array.isArray(e)?e:Array.from(e),qv=e=>Array.isArray(e)?e:[e],Jv=h(2,(e,{onEmpty:t,onNonEmpty:n})=>oe(e)?n(e):t()),Vv=h(2,(e,{onEmpty:t,onNonEmpty:n})=>oe(e)?n(Pe(e),vn(e)):t()),Lo=h(2,(e,t)=>[t,...e]),Hv=h(2,(e,t)=>[...e,t]),Em=h(2,(e,t)=>ae(e).concat(ae(t))),Wv=Array.isArray,zv=e=>e.length===0,Gv=zv,_o=_m,oe=_m,km=(e,t)=>e<0||e>=t.length,Yv=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),Zv=h(2,(e,t)=>{const n=Math.floor(t);return km(n,e)?A():j(e[n])}),Om=h(2,(e,t)=>{const n=Math.floor(t);if(km(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]}),ns=Zv(0),Pe=Om(0),Qv=e=>oe(e)?j($m(e)):A(),$m=e=>e[e.length-1],vn=e=>e.slice(1),Xv=(e,t)=>{let n=0;for(const r of e){if(!t(r,n))break;n++}return n},e0=h(2,(e,t)=>o0(e,Xv(e,t))),t0=h(2,(e,t)=>{const n=ae(e);return n.slice(Yv(t,n),n.length)}),hf=e=>Array.from(e).reverse(),as=h(2,(e,t)=>{const n=Array.from(e);return n.sort(t),n}),n0=h(3,(e,t,n)=>Array.from(e).map(r=>[r,t(r)]).sort(([,r],[,s])=>n(r,s)).map(([r])=>r)),pf=h(2,(e,t)=>r0(e,t,Uv)),r0=h(3,(e,t,n)=>{const r=ae(e),s=ae(t);if(oe(r)&&oe(s)){const o=[n(Pe(r),Pe(s))],i=Math.min(r.length,s.length);for(let c=1;c<i;c++)o[c]=n(r[c],s[c]);return o}return[]}),s0=Eu(),o0=h(2,(e,t)=>{const n=Array.from(e),r=Math.floor(t);return oe(n)?r>=1?i0(n,r):[[],n]:[n,[]]}),i0=h(2,(e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[Hr(e),[]]:[Lo(e.slice(1,n),Pe(e)),e.slice(n)]}),Hr=e=>e.slice(),c0=h(2,(e,t)=>{const n={};for(const r of e){const s=t(r);Object.prototype.hasOwnProperty.call(n,s)?n[s].push(r):n[s]=[r]}return n}),a0=h(3,(e,t,n)=>{const r=ae(e),s=ae(t);return oe(r)?oe(s)?Oi(n)(Em(r,s)):r:s}),bo=h(2,(e,t)=>a0(e,t,s0)),er=()=>[],rt=e=>[e],qn=h(2,(e,t)=>e.map(t)),Do=h(2,(e,t)=>{if(Gv(e))return[];const n=[];for(let r=0;r<e.length;r++){const s=t(e[r],r);for(let o=0;o<s.length;o++)n.push(s[o])}return n}),u0=Do(te),l0=h(2,(e,t)=>{const n=ae(e),r=[];for(let s=0;s<n.length;s++){const o=t(n[s],s);xe(o)&&r.push(o.value)}return r}),Tm=h(3,(e,t,n)=>ae(e).reduce((r,s,o)=>n(r,s,o),t)),mf=(e,t)=>{const n=[];let r=e,s;for(;xe(s=t(r));){const[o,i]=s.value;n.push(o),r=i}return n},Iu=qw,Oi=h(2,(e,t)=>{const n=ae(e);if(oe(n)){const r=[Pe(n)],s=vn(n);for(const o of s)r.every(i=>!t(o,i))&&r.push(o);return r}return[]}),f0=e=>Oi(e,Eu()),Er=h(2,(e,t)=>ae(e).join(t)),xm=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return xm(e,t.from)}},At=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),Im=e=>{let t=!1,n;return()=>(t||(n=e(),t=!0),n)},d0=e=>{try{return e.toISOString()}catch{return String(e)}},lt=(e,t=!0)=>{if(Array.isArray(e))return`[${e.map(n=>lt(n,t)).join(",")}]`;if(zw(e))return d0(e);if(F(e,"toString")&&Ts(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();if(qe(e))return JSON.stringify(e);if(Pt(e)||e==null||Zn(e)||Gc(e))return String(e);if(yi(e))return String(e)+"n";if(Qp(e))return`${e.constructor.name}(${lt(Array.from(e),t)})`;try{t&&JSON.stringify(e);const n=`{${At(e).map(s=>`${qe(s)?JSON.stringify(s):String(s)}:${lt(e[s],!1)}`).join(",")}}`,r=e.constructor.name;return e.constructor!==Object.prototype.constructor?`${r}(${n})`:n}catch{return"<circular structure>"}},Mm=e=>typeof e=="string"?JSON.stringify(e):String(e),Am=e=>Array.isArray(e),h0=e=>!Array.isArray(e),gf=e=>`[${Mm(e)}]`,Nm=e=>Am(e)?e.map(gf).join(""):gf(e),Lt=(e,t,n,r)=>{let s=e;return n&&oe(n)&&(s+=`
at path: ${Nm(n)}`),t!==void 0&&(s+=`
details: ${t}`),r&&(s+=`
schema (${r._tag}): ${r}`),s},p0=(e,t,n)=>Lt("Unsupported schema",e,t,n),Rm=(e,t,n)=>Lt("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,n),yf=e=>p0(void 0,void 0,e),m0=e=>Lt("Unsupported key schema",void 0,void 0,e),g0=e=>Lt("Unsupported literal",`literal value: ${lt(e)}`),_f=e=>Lt("Duplicate index signature",`${e} index signature`),y0=Lt("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),_0=Lt("Invalid element","A required element cannot follow an optional element. ts(1257)"),bf=e=>Lt("Duplicate property signature transformation",`Duplicate key ${lt(e)}`),Cm=e=>Lt("Duplicate property signature",`Duplicate key ${lt(e)}`),b0=Symbol.for("effect/SchemaId/MinLength"),tr=Sm,Ko=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),S0=Symbol.for("effect/annotation/Brand"),w0=Symbol.for("effect/annotation/SchemaId"),Pm=Symbol.for("effect/annotation/Message"),Mu=Symbol.for("effect/annotation/MissingMessage"),Au=Symbol.for("effect/annotation/Identifier"),Dt=Symbol.for("effect/annotation/Title"),Jn=Symbol.for("effect/annotation/AutoTitle"),Rs=Symbol.for("effect/annotation/Description"),Fm=Symbol.for("effect/annotation/Examples"),jm=Symbol.for("effect/annotation/Default"),Lm=Symbol.for("effect/annotation/JSONSchema"),Dm=Symbol.for("effect/annotation/Arbitrary"),Km=Symbol.for("effect/annotation/Pretty"),Um=Symbol.for("effect/annotation/Equivalence"),v0=Symbol.for("effect/annotation/Documentation"),Bm=Symbol.for("effect/annotation/Concurrency"),qm=Symbol.for("effect/annotation/Batching"),Jm=Symbol.for("effect/annotation/ParseIssueTitle"),Vm=Symbol.for("effect/annotation/ParseOptions"),Hm=Symbol.for("effect/annotation/DecodingFallback"),Uo=Symbol.for("effect/annotation/Surrogate"),E0=Symbol.for("effect/annotation/StableFilter"),Fe=h(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?j(e.annotations[t]):A()),k0=Fe(S0),O0=Fe(Pm),$0=Fe(Mu),Wm=Fe(Dt),zm=Fe(Jn),$i=Fe(Au),Gm=Fe(Rs),T0=Fe(Bm),x0=Fe(qm),I0=Fe(Jm),M0=Fe(Vm),A0=Fe(Hm),Ym=Fe(Uo),N0=Fe(E0),R0=e=>Kv(N0(e),t=>t===!0),Nu=Symbol.for("effect/annotation/JSONIdentifier"),C0=Fe(Nu),P0=e=>zt(C0(e),()=>$i(e));class Ti{constructor(t,n,r,s={}){u(this,"typeParameters");u(this,"decodeUnknown");u(this,"encodeUnknown");u(this,"annotations");u(this,"_tag","Declaration");this.typeParameters=t,this.decodeUnknown=n,this.encodeUnknown=r,this.annotations=s}toString(){return ke(Ot(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:_e(this.annotations)}}}const Kt=e=>t=>t._tag===e;let Qc=class{constructor(t,n={}){u(this,"literal");u(this,"annotations");u(this,"_tag","Literal");this.literal=t,this.annotations=n}toString(){return ke(Ot(this),()=>lt(this.literal))}toJSON(){return{_tag:this._tag,literal:yi(this.literal)?String(this.literal):this.literal,annotations:_e(this.annotations)}}};const rs=Kt("Literal");class F0{constructor(t,n={}){u(this,"symbol");u(this,"annotations");u(this,"_tag","UniqueSymbol");this.symbol=t,this.annotations=n}toString(){return ke(Ot(this),()=>lt(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:_e(this.annotations)}}}class j0{constructor(t={}){u(this,"annotations");u(this,"_tag","UndefinedKeyword");this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:_e(this.annotations)}}}const us=new j0({[Dt]:"undefined"});class L0{constructor(t={}){u(this,"annotations");u(this,"_tag","NeverKeyword");this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:_e(this.annotations)}}}const Ru=new L0({[Dt]:"never"});class D0{constructor(t={}){u(this,"annotations");u(this,"_tag","UnknownKeyword");this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:_e(this.annotations)}}}const K0=new D0({[Dt]:"unknown"});class U0{constructor(t={}){u(this,"annotations");u(this,"_tag","AnyKeyword");this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:_e(this.annotations)}}}const B0=new U0({[Dt]:"any"});class q0{constructor(t={}){u(this,"annotations");u(this,"_tag","StringKeyword");this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:_e(this.annotations)}}}const Xc=new q0({[Dt]:"string",[Rs]:"a string"}),ea=Kt("StringKeyword");class J0{constructor(t={}){u(this,"annotations");u(this,"_tag","NumberKeyword");this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:_e(this.annotations)}}}const ta=new J0({[Dt]:"number",[Rs]:"a number"}),Sf=Kt("NumberKeyword");class V0{constructor(t={}){u(this,"annotations");u(this,"_tag","BooleanKeyword");this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:_e(this.annotations)}}}const wf=new V0({[Dt]:"boolean",[Rs]:"a boolean"}),vf=Kt("BooleanKeyword"),H0=Kt("SymbolKeyword");let Cs=class{constructor(t,n={}){u(this,"type");u(this,"annotations");this.type=t,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:_e(this.annotations)}}toString(){return String(this.type)}};class Nn extends Cs{constructor(n,r,s={}){super(n,s);u(this,"isOptional");this.isOptional=r}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:_e(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const Cu=e=>e.map(t=>t.type);class xi{constructor(t,n,r,s={}){u(this,"elements");u(this,"rest");u(this,"isReadonly");u(this,"annotations");u(this,"_tag","TupleType");this.elements=t,this.rest=n,this.isReadonly=r,this.annotations=s;let o=!1,i=!1;for(const c of t)if(c.isOptional)o=!0;else if(o){i=!0;break}if(i||o&&n.length>1)throw new Error(_0)}toString(){return ke(Ot(this),()=>W0(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:_e(this.annotations)}}}const W0=e=>{const t=e.elements.map(String).join(", ");return Vv(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,r)=>{const s=String(n),o=s.includes(" | ")?`(${s})`:s;if(r.length>0){const i=r.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${o}[], ${i}]`:`readonly [...${o}[], ${i}]`}else return e.elements.length>0?`readonly [${t}, ...${o}[]]`:`ReadonlyArray<${s}>`}})};class Se extends Nn{constructor(n,r,s,o,i){super(r,s,i);u(this,"name");u(this,"isReadonly");this.name=n,this.isReadonly=o}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:_e(this.annotations)}}}const Zm=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return Zm(e.from)}return!1};class Ps{constructor(t,n,r){u(this,"type");u(this,"isReadonly");u(this,"parameter");if(this.type=n,this.isReadonly=r,Zm(t))this.parameter=t;else throw new Error(y0)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class Nt{constructor(t,n,r={}){u(this,"annotations");u(this,"_tag","TypeLiteral");u(this,"propertySignatures");u(this,"indexSignatures");this.annotations=r;const s={};for(let i=0;i<t.length;i++){const c=t[i].name;if(Object.prototype.hasOwnProperty.call(s,c))throw new Error(Cm(c));s[c]=null}const o={string:!1,symbol:!1};for(let i=0;i<n.length;i++){const c=rg(n[i].parameter);if(ea(c)){if(o.string)throw new Error(_f("string"));o.string=!0}else if(H0(c)){if(o.symbol)throw new Error(_f("symbol"));o.symbol=!0}}this.propertySignatures=t,this.indexSignatures=n}toString(){return ke(Ot(this),()=>z0(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:_e(this.annotations)}}}const Ef=e=>e.map(String).join("; "),z0=e=>{if(e.propertySignatures.length>0){const t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${Ef(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${Ef(e.indexSignatures)} }`:"{}"},kf=Kt("TypeLiteral"),G0=as(wm(tr,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),Y0={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},Qm=e=>Do(e,t=>Fu(t)?Qm(t.types):[t]),Z0=e=>{const t=G0(e),n=[],r={},s=[];for(const o of t)switch(o._tag){case"NeverKeyword":break;case"AnyKeyword":return[B0];case"UnknownKeyword":return[K0];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{r[o._tag]||(r[o._tag]=o,n.push(o));break}case"Literal":{const i=typeof o.literal;switch(i){case"string":case"number":case"bigint":case"boolean":{const c=Y0[i];!r[c]&&!s.includes(o.literal)&&(s.push(o.literal),n.push(o));break}case"object":{s.includes(o.literal)||(s.push(o.literal),n.push(o));break}}break}case"UniqueSymbol":{!r.SymbolKeyword&&!s.includes(o.symbol)&&(s.push(o.symbol),n.push(o));break}case"TupleType":{r.ObjectKeyword||n.push(o);break}case"TypeLiteral":{o.propertySignatures.length===0&&o.indexSignatures.length===0?r["{}"]||(r["{}"]=o,n.push(o)):r.ObjectKeyword||n.push(o);break}default:n.push(o)}return n};var Mt;let De=(Mt=class{constructor(t,n={}){u(this,"types");u(this,"annotations");u(this,"_tag","Union");this.types=t,this.annotations=n}toString(){return ke(Ot(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:_e(this.annotations)}}},u(Mt,"make",(t,n)=>Pu(t)?new Mt(t,n):t.length===1?t[0]:Ru),u(Mt,"unify",(t,n)=>Mt.make(Z0(Qm(t)),n)),Mt);const Q0=(e,t)=>e.map(t),Pu=e=>e.length>1,Fu=Kt("Union"),lc=J(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class ls{constructor(t,n={}){u(this,"f");u(this,"annotations");u(this,"_tag","Suspend");this.f=t,this.annotations=n,this.f=Im(t)}toString(){return Ot(this).pipe(zt(()=>Ei(Pv(this.f)(),t=>Ot(t))),ke(()=>"<suspended schema>"))}toJSON(){const t=this.f();let n=lc.get(t);return n||(lc.set(t,{_tag:this._tag}),n={_tag:this._tag,ast:t.toJSON(),annotations:_e(this.annotations)},lc.set(t,n),n)}}let ju=class{constructor(t,n,r={}){u(this,"from");u(this,"filter");u(this,"annotations");u(this,"_tag","Refinement");this.from=t,this.filter=n,this.annotations=r}toString(){return $i(this).pipe(ke(()=>Je(sg(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:t=>Vn(this.from)?String(this.from)+" & "+t:t})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:_e(this.annotations)}}};const Vn=Kt("Refinement"),fc={};let un=class{constructor(t,n,r,s={}){u(this,"from");u(this,"to");u(this,"transformation");u(this,"annotations");u(this,"_tag","Transformation");this.from=t,this.to=n,this.transformation=r,this.annotations=s}toString(){return ke(Ot(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:_e(this.annotations)}}};const X0=Kt("Transformation");class Xm{constructor(t,n){u(this,"decode");u(this,"encode");u(this,"_tag","FinalTransformation");this.decode=t,this.encode=n}}const eE=e=>t=>t._tag===e;class tE{constructor(){u(this,"_tag","ComposeTransformation")}}const nE=new tE;let rE=class{constructor(t,n,r,s){u(this,"from");u(this,"to");u(this,"decode");u(this,"encode");this.from=t,this.to=n,this.decode=r,this.encode=s}};const sE=e=>e.decode===te&&e.encode===te;class na{constructor(t){u(this,"propertySignatureTransformations");u(this,"_tag","TypeLiteralTransformation");this.propertySignatureTransformations=t;const n={},r={};for(const s of t){const o=s.from;if(n[o])throw new Error(bf(o));n[o]=!0;const i=s.to;if(r[i])throw new Error(bf(i));r[i]=!0}}}const ra=eE("TypeLiteralTransformation"),nr=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={...e.annotations,...t},s=Ym(e);return xe(s)&&(r[Uo]=nr(s.value,t)),n.annotations.value=r,Object.create(Object.getPrototypeOf(e),n)},oE="[\\s\\S]*",iE="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",eg=(e,t)=>{switch(e._tag){case"Literal":return Ko(String(e.literal));case"StringKeyword":return oE;case"NumberKeyword":return iE;case"TemplateLiteral":return tg(e);case"Union":return e.types.map(n=>eg(n)).join("|")}},cE=(e,t,n,r)=>Fu(e)?`(${t})`:t,tg=(e,t,n)=>{let r="";if(e.head!==""){const s=Ko(e.head);r+=s}for(const s of e.spans){const o=eg(s.type);if(r+=cE(s.type,o),s.literal!==""){const i=Ko(s.literal);r+=i}}return r},aE=e=>new RegExp(`^${tg(e)}$`),Of=(e,t)=>{const n=[],r=[],s=o=>{switch(o._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":r.push(new Ps(o,t,!0));break;case"Literal":if(qe(o.literal)||Pt(o.literal))n.push(new Se(o.literal,t,!1,!0));else throw new Error(g0(o.literal));break;case"Enums":{for(const[i,c]of o.enums)n.push(new Se(c,t,!1,!0));break}case"UniqueSymbol":n.push(new Se(o.symbol,t,!1,!0));break;case"Union":o.types.forEach(s);break;default:throw new Error(m0(o))}};return s(e),{propertySignatures:n,indexSignatures:r}},dc=e=>De.make([e,us]),Wr=(e,t)=>{switch(e._tag){case"TupleType":return new xi(e.elements.map(n=>new Nn(dc(n.type),!0)),Jv(e.rest,{onEmpty:()=>e.rest,onNonEmpty:n=>[new Cs(De.make([...Cu(n),us]))]}),e.isReadonly);case"TypeLiteral":return new Nt(e.propertySignatures.map(n=>new Se(n.name,dc(n.type),!0,n.isReadonly,n.annotations)),e.indexSignatures.map(n=>new Ps(n.parameter,dc(n.type),n.isReadonly)));case"Union":return De.make(e.types.map(n=>Wr(n)));case"Suspend":return new ls(()=>Wr(e.f()));case"Declaration":case"Refinement":throw new Error(yf(e));case"Transformation":{if(ra(e.transformation)&&e.transformation.propertySignatureTransformations.every(sE))return new un(Wr(e.from),Wr(e.to),e.transformation);throw new Error(yf(e))}}return e},ng=e=>t=>{let n;for(const r of e)Object.prototype.hasOwnProperty.call(t.annotations,r)&&(n===void 0&&(n={}),n[r]=t.annotations[r]);return n},uE=e=>t=>{const n={...t.annotations};for(const r of e)delete n[r];return n},lE=ng([Fm,jm,Lm,Dm,Km,Um]),ue=e=>{switch(e._tag){case"Declaration":{const t=Qe(e.typeParameters,ue);return t===e.typeParameters?e:new Ti(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=Qe(e.elements,s=>{const o=ue(s.type);return o===s.type?s:new Nn(o,s.isOptional)}),n=Cu(e.rest),r=Qe(n,ue);return t===e.elements&&r===n?e:new xi(t,r.map(s=>new Cs(s)),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=Qe(e.propertySignatures,r=>{const s=ue(r.type);return s===r.type?r:new Se(r.name,s,r.isOptional,r.isReadonly)}),n=Qe(e.indexSignatures,r=>{const s=ue(r.type);return s===r.type?r:new Ps(r.parameter,s,r.isReadonly)});return t===e.propertySignatures&&n===e.indexSignatures?e:new Nt(t,n,e.annotations)}case"Union":{const t=Qe(e.types,ue);return t===e.types?e:De.make(t,e.annotations)}case"Suspend":return new ls(()=>ue(e.f()),e.annotations);case"Refinement":{const t=ue(e.from);return t===e.from?e:new ju(t,e.filter,e.annotations)}case"Transformation":{const t=lE(e);return ue(t!==void 0?nr(e.to,t):e.to)}}return e},jn=e=>Je(P0(e),{onNone:()=>{},onSome:t=>({[Nu]:t})});function Qe(e,t){let n=!1;const r=ki(e.length);for(let s=0;s<e.length;s++){const o=e[s],i=t(o);i!==o&&(n=!0),r[s]=i}return n?r:e}const yt=(e,t)=>{switch(e._tag){case"Declaration":{const n=Qe(e.typeParameters,r=>yt(r));return n===e.typeParameters?e:new Ti(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const n=Qe(e.elements,o=>{const i=yt(o.type);return i===o.type?o:new Nn(i,o.isOptional)}),r=Cu(e.rest),s=Qe(r,o=>yt(o));return n===e.elements&&s===r?e:new xi(n,s.map(o=>new Cs(o)),e.isReadonly,jn(e))}case"TypeLiteral":{const n=Qe(e.propertySignatures,s=>{const o=yt(s.type);return o===s.type?s:new Se(s.name,o,s.isOptional,s.isReadonly)}),r=Qe(e.indexSignatures,s=>{const o=yt(s.type);return o===s.type?s:new Ps(s.parameter,o,s.isReadonly)});return n===e.propertySignatures&&r===e.indexSignatures?e:new Nt(n,r,jn(e))}case"Union":{const n=Qe(e.types,r=>yt(r));return n===e.types?e:De.make(n,jn(e))}case"Suspend":return new ls(()=>yt(e.f()),jn(e));case"Refinement":{const n=yt(e.from),r=jn(e);return r?nr(n,r):n}case"Transformation":{const n=jn(e);return yt(n?nr(e.from,n):e.from)}}return e},sa=e=>yt(e),_e=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},rg=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return rg(e.from)}},Rn=e=>ke(Ot(e),()=>e._tag);function fE(e){return Je(k0(e),{onNone:()=>"",onSome:t=>t.map(n=>` & Brand<${lt(n)}>`).join("")})}const sg=e=>Wm(e).pipe(zt(()=>Gm(e)),zt(()=>zm(e)),vm(t=>t+fE(e))),Ot=e=>zt($i(e),()=>sg(e)),dE=Symbol.for("effect/Context/Tag"),Bo=Symbol.for("effect/Context/Reference"),hE="effect/STM",pE=Symbol.for(hE),og={...As,_op:"Tag",[pE]:Xn,[dE]:{_Service:e=>e,_Identifier:e=>e},toString(){return Ee(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[ne](){return this.toJSON()},of(e){return e},context(e){return cg(this,e)}},mE={...og,[Bo]:Bo},gE=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const r=Object.create(og);return Object.defineProperty(r,"stack",{get(){return n.stack}}),r.key=e,r},yE=()=>(e,t)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;Error.stackTraceLimit=n;function s(){}return Object.setPrototypeOf(s,mE),s.key=e,s.defaultValue=t.defaultValue,Object.defineProperty(s,"stack",{get(){return r.stack}}),s},ig=Symbol.for("effect/Context"),_E={[ig]:{_Services:e=>e},[L](e){if(SE(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!U(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[K](){return ie(this,Si(this.unsafeMap.size))},pipe(){return N(this,arguments)},toString(){return Ee(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(ge)}},[ne](){return this.toJSON()}},rr=e=>{const t=Object.create(_E);return t.unsafeMap=e,t},bE=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const n=e.stack.split(`
`);if(n.length>2){const r=n[2].match(/at (.*)/);r&&(t.message=t.message+` (defined at ${r[1]})`)}}if(t.stack){const n=t.stack.split(`
`);n.splice(1,3),t.stack=n.join(`
`)}return t},SE=e=>F(e,ig),wE=e=>F(e,Bo),vE=rr(new Map),EE=()=>vE,cg=(e,t)=>rr(new Map([[e.key,t]])),kE=h(3,(e,t,n)=>{const r=new Map(e.unsafeMap);return r.set(t.key,n),rr(r)}),hc=J("effect/Context/defaultValueCache",()=>new Map),Lu=e=>{if(hc.has(e.key))return hc.get(e.key);const t=e.defaultValue();return hc.set(e.key,t),t},OE=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):Lu(t),ag=h(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(Bo in t)return Lu(t);throw bE(t)}return e.unsafeMap.get(t.key)}),$E=ag,TE=h(2,(e,t)=>e.unsafeMap.has(t.key)?Zc(e.unsafeMap.get(t.key)):wE(t)?Zc(Lu(t)):dm),xE=h(2,(e,t)=>{const n=new Map(e.unsafeMap);for(const[r,s]of t.unsafeMap)n.set(r,s);return rr(n)}),Cn=gE,Du=EE,IE=cg,jr=kE,ug=$E,lg=ag,Fs=TE,fg=xE,dg=yE,hg=Symbol.for("effect/Chunk");function ME(e,t,n,r,s){for(let o=t;o<Math.min(e.length,t+s);o++)n[r+o-t]=e[o];return n}const pg=[],AE=e=>Su((t,n)=>t.length===n.length&&_n(t).every((r,s)=>e(r,Hn(n,s)))),NE=AE(U),RE={[hg]:{_A:e=>e},toString(){return Ee(this.toJSON())},toJSON(){return{_id:"Chunk",values:_n(this).map(ge)}},[ne](){return this.toJSON()},[L](e){return mg(e)&&NE(this,e)},[K](){return ie(this,Is(_n(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return pg[Symbol.iterator]();default:return _n(this)[Symbol.iterator]()}},pipe(){return N(this,arguments)}},he=e=>{const t=Object.create(RE);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=wt,t.right=wt;break}case"ISingleton":{t.length=1,t.depth=0,t.left=wt,t.right=wt;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=wt,t.right=wt;break}}return t},mg=e=>F(e,hg),wt=he({_tag:"IEmpty"}),Ft=()=>wt,pc=(...e)=>FE(e),Ve=e=>he({_tag:"ISingleton",a:e}),gg=e=>mg(e)?e:Ii(ae(e)),oa=(e,t,n)=>{switch(e.backing._tag){case"IArray":{ME(e.backing.array,0,t,n,e.length);break}case"IConcat":{oa(e.left,t,n),oa(e.right,t,n+e.left.length);break}case"ISingleton":{t[n]=e.backing.a;break}case"ISlice":{let r=0,s=n;for(;r<e.length;)t[s]=Hn(e,r),r+=1,s+=1;break}}},CE=e=>{switch(e.backing._tag){case"IEmpty":return pg;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return oa(e,t,0),e.backing={_tag:"IArray",array:t},e.left=wt,e.right=wt,e.depth=0,t}}},_n=CE,PE=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return he({_tag:"IArray",array:hf(e.backing.array)});case"IConcat":return he({_tag:"IConcat",left:sr(e.backing.right),right:sr(e.backing.left)});case"ISlice":return Ii(hf(_n(e)))}},sr=PE,Ii=e=>e.length===0?Ft():e.length===1?Ve(e[0]):he({_tag:"IArray",array:e}),FE=e=>Ii(e),Hn=h(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Hn(e.left,t):Hn(e.right,t-e.left.length);case"ISlice":return Hn(e.backing.chunk,t+e.backing.offset)}}),jE=h(2,(e,t)=>ot(e,Ve(t))),dt=h(2,(e,t)=>ot(Ve(t),e)),ia=h(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return wt;switch(e.backing._tag){case"ISlice":return he({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?ia(e.right,t-e.left.length):he({_tag:"IConcat",left:ia(e.left,t),right:e.right});default:return he({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),ot=h(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return he({_tag:"IConcat",left:e,right:t});if(n<-1)if(e.left.depth>=e.right.depth){const r=ot(e.right,t);return he({_tag:"IConcat",left:e.left,right:r})}else{const r=ot(e.right.right,t);if(r.depth===e.depth-3){const s=he({_tag:"IConcat",left:e.right.left,right:r});return he({_tag:"IConcat",left:e.left,right:s})}else{const s=he({_tag:"IConcat",left:e.left,right:e.right.left});return he({_tag:"IConcat",left:s,right:r})}}else if(t.right.depth>=t.left.depth){const r=ot(e,t.left);return he({_tag:"IConcat",left:r,right:t.right})}else{const r=ot(e,t.left.left);if(r.depth===t.depth-3){const s=he({_tag:"IConcat",left:r,right:t.left.right});return he({_tag:"IConcat",left:s,right:t.right})}else{const s=he({_tag:"IConcat",left:t.left.right,right:t.right});return he({_tag:"IConcat",left:r,right:s})}}}),LE=e=>e.length===0,or=e=>e.length>0,yg=e=>Hn(e,0),ir=yg,ln=e=>ia(e,1),ca=Symbol.for("effect/Duration"),_g=BigInt(0),$f=BigInt(24),ro=BigInt(60),aa=BigInt(1e3),Tf=BigInt(1e6),xf=BigInt(1e9),DE=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,jt=e=>{if(bg(e))return e;if(Pt(e))return fs(e);if(yi(e))return mc(e);if(Array.isArray(e)&&e.length===2&&e.every(Pt))return e[0]===-1/0||e[1]===-1/0||Number.isNaN(e[0])||Number.isNaN(e[1])?Sg:e[0]===1/0||e[1]===1/0?qE:mc(BigInt(Math.round(e[0]*1e9))+BigInt(Math.round(e[1])));if(qe(e)){const t=DE.exec(e);if(t){const[n,r,s]=t,o=Number(r);switch(s){case"nano":case"nanos":return mc(BigInt(r));case"micro":case"micros":return JE(BigInt(r));case"milli":case"millis":return fs(o);case"second":case"seconds":return VE(o);case"minute":case"minutes":return HE(o);case"hour":case"hours":return WE(o);case"day":case"days":return zE(o);case"week":case"weeks":return GE(o)}}}throw new Error("Invalid DurationInput")},If={_tag:"Millis",millis:0},KE={_tag:"Infinity"},UE={[ca]:ca,[K](){return ie(this,nm(this.value))},[L](e){return bg(e)&&rk(this,e)},toString(){return`Duration(${ok(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:QE(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[ne](){return this.toJSON()},pipe(){return N(this,arguments)}},tt=e=>{const t=Object.create(UE);return Pt(e)?isNaN(e)||e<=0?t.value=If:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=KE:e<=_g?t.value=If:t.value={_tag:"Nanos",nanos:e},t},bg=e=>F(e,ca),BE=e=>{switch(e.value._tag){case"Millis":return e.value.millis===0;case"Nanos":return e.value.nanos===_g;case"Infinity":return!1}},Sg=tt(0),qE=tt(1/0),mc=e=>tt(e),JE=e=>tt(e*aa),fs=e=>tt(e),VE=e=>tt(e*1e3),HE=e=>tt(e*6e4),WE=e=>tt(e*36e5),zE=e=>tt(e*864e5),GE=e=>tt(e*6048e5),ua=e=>wg(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6}),YE=e=>wg(e,{onMillis:t=>t/864e5,onNanos:t=>Number(t)/864e11}),ZE=e=>{const t=jt(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},QE=e=>{const t=jt(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/xf),Number(t.value.nanos%xf)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},wg=h(2,(e,t)=>{const n=jt(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}}),Mi=h(3,(e,t,n)=>{const r=jt(e),s=jt(t);if(r.value._tag==="Infinity"||s.value._tag==="Infinity")return n.onMillis(ua(r),ua(s));if(r.value._tag==="Nanos"||s.value._tag==="Nanos"){const o=r.value._tag==="Nanos"?r.value.nanos:BigInt(Math.round(r.value.millis*1e6)),i=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6));return n.onNanos(o,i)}return n.onMillis(r.value.millis,s.value.millis)}),XE=(e,t)=>Mi(e,t,{onMillis:(n,r)=>n===r,onNanos:(n,r)=>n===r}),ek=h(2,(e,t)=>Mi(e,t,{onMillis:(n,r)=>tt(n-r),onNanos:(n,r)=>tt(n-r)})),tk=h(2,(e,t)=>Mi(e,t,{onMillis:(n,r)=>n<=r,onNanos:(n,r)=>n<=r})),nk=h(2,(e,t)=>Mi(e,t,{onMillis:(n,r)=>n>=r,onNanos:(n,r)=>n>=r})),rk=h(2,(e,t)=>XE(jt(e),jt(t))),sk=e=>{const t=jt(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=ZE(t),r=n/Tf,s=r/aa,o=s/ro,i=o/ro,c=i/$f;return{days:Number(c),hours:Number(i%$f),minutes:Number(o%ro),seconds:Number(s%ro),millis:Number(r%aa),nanos:Number(n%Tf)}},ok=e=>{const t=jt(e);if(t.value._tag==="Infinity")return"Infinity";if(BE(t))return"0";const n=sk(t),r=[];return n.days!==0&&r.push(`${n.days}d`),n.hours!==0&&r.push(`${n.hours}h`),n.minutes!==0&&r.push(`${n.minutes}m`),n.seconds!==0&&r.push(`${n.seconds}s`),n.millis!==0&&r.push(`${n.millis}ms`),n.nanos!==0&&r.push(`${n.nanos}ns`),r.join(" ")},En=5,Ku=Math.pow(2,En),ik=Ku-1,ck=Ku/2,ak=Ku/4;function uk(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function cr(e,t){return t>>>e&ik}function Bn(e){return 1<<e}function vg(e,t){return uk(e&t-1)}const lk=(e,t)=>({value:e,previous:t});function Wn(e,t,n,r){let s=r;if(!e){const o=r.length;s=new Array(o);for(let i=0;i<o;++i)s[i]=r[i]}return s[t]=n,s}function Eg(e,t,n){const r=n.length-1;let s=0,o=0,i=n;if(e)s=o=t;else for(i=new Array(r);s<t;)i[o++]=n[s++];for(++s;s<=r;)i[o++]=n[s++];return e&&(i.length=r),i}function fk(e,t,n,r){const s=r.length;if(e){let a=s;for(;a>=t;)r[a--]=r[a];return r[t]=n,r}let o=0,i=0;const c=new Array(s+1);for(;o<t;)c[i++]=r[o++];for(c[t]=n;o<s;)c[++i]=r[o++];return c}class Zt{constructor(){u(this,"_tag","EmptyNode")}modify(t,n,r,s,o,i){const c=r(A());return ve(c)?new Zt:(++i.value,new bn(t,s,o,c))}}function it(e){return Zp(e,"EmptyNode")}function dk(e){return it(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Ai(e,t){return it(e)?!1:t===e.edit}class bn{constructor(t,n,r,s){u(this,"edit");u(this,"hash");u(this,"key");u(this,"value");u(this,"_tag","LeafNode");this.edit=t,this.hash=n,this.key=r,this.value=s}modify(t,n,r,s,o,i){if(U(o,this.key)){const a=r(this.value);return a===this.value?this:ve(a)?(--i.value,new Zt):Ai(this,t)?(this.value=a,this):new bn(t,s,o,a)}const c=r(A());return ve(c)?this:(++i.value,kg(t,n,this.hash,this,s,new bn(t,s,o,c)))}}class Uu{constructor(t,n,r){u(this,"edit");u(this,"hash");u(this,"children");u(this,"_tag","CollisionNode");this.edit=t,this.hash=n,this.children=r}modify(t,n,r,s,o,i){if(s===this.hash){const a=Ai(this,t),l=this.updateCollisionList(a,t,this.hash,this.children,r,o,i);return l===this.children?this:l.length>1?new Uu(t,this.hash,l):l[0]}const c=r(A());return ve(c)?this:(++i.value,kg(t,n,this.hash,this,s,new bn(t,s,o,c)))}updateCollisionList(t,n,r,s,o,i,c){const a=s.length;for(let f=0;f<a;++f){const d=s[f];if("key"in d&&U(i,d.key)){const p=d.value,m=o(p);return m===p?s:ve(m)?(--c.value,Eg(t,f,s)):Wn(t,f,new bn(n,r,i,m),s)}}const l=o(A());return ve(l)?s:(++c.value,Wn(t,a,new bn(n,r,i,l),s))}}class ar{constructor(t,n,r){u(this,"edit");u(this,"mask");u(this,"children");u(this,"_tag","IndexedNode");this.edit=t,this.mask=n,this.children=r}modify(t,n,r,s,o,i){const c=this.mask,a=this.children,l=cr(n,s),f=Bn(l),d=vg(c,f),p=c&f,m=Ai(this,t);if(!p){const S=new Zt().modify(t,n+En,r,s,o,i);return S?a.length>=ck?pk(t,l,S,c,a):new ar(t,c|f,fk(m,d,S,a)):this}const y=a[d],E=y.modify(t,n+En,r,s,o,i);if(y===E)return this;let g=c,b;if(it(E)){if(g&=~f,!g)return new Zt;if(a.length<=2&&dk(a[d^1]))return a[d^1];b=Eg(m,d,a)}else b=Wn(m,d,E,a);return m?(this.mask=g,this.children=b,this):new ar(t,g,b)}}class Bu{constructor(t,n,r){u(this,"edit");u(this,"size");u(this,"children");u(this,"_tag","ArrayNode");this.edit=t,this.size=n,this.children=r}modify(t,n,r,s,o,i){let c=this.size;const a=this.children,l=cr(n,s),f=a[l],d=(f||new Zt).modify(t,n+En,r,s,o,i);if(f===d)return this;const p=Ai(this,t);let m;if(it(f)&&!it(d))++c,m=Wn(p,l,d,a);else if(!it(f)&&it(d)){if(--c,c<=ak)return hk(t,c,l,a);m=Wn(p,l,new Zt,a)}else m=Wn(p,l,d,a);return p?(this.size=c,this.children=m,this):new Bu(t,c,m)}}function hk(e,t,n,r){const s=new Array(t-1);let o=0,i=0;for(let c=0,a=r.length;c<a;++c)if(c!==n){const l=r[c];l&&!it(l)&&(s[o++]=l,i|=1<<c)}return new ar(e,i,s)}function pk(e,t,n,r,s){const o=[];let i=r,c=0;for(let a=0;i;++a)i&1&&(o[a]=s[c++]),i>>>=1;return o[t]=n,new Bu(e,c+1,o)}function mk(e,t,n,r,s,o){if(n===s)return new Uu(e,n,[o,r]);const i=cr(t,n),c=cr(t,s);if(i===c)return a=>new ar(e,Bn(i)|Bn(c),[a]);{const a=i<c?[r,o]:[o,r];return new ar(e,Bn(i)|Bn(c),a)}}function kg(e,t,n,r,s,o){let i,c=t;for(;;){const a=mk(e,c,n,r,s,o);if(typeof a=="function")i=lk(a,i),c=c+En;else{let l=a;for(;i!=null;)l=i.value(l),i=i.previous;return l}}}const Og="effect/HashMap",la=Symbol.for(Og),gk={[la]:la,[Symbol.iterator](){return new Ni(this,(e,t)=>[e,t])},[K](){let e=I(Og);for(const t of this)e^=_(I(t[0]),V(I(t[1])));return ie(this,e)},[L](e){if(bk(e)){if(e._size!==this._size)return!1;for(const t of this){const n=_(e,Ju(t[0],I(t[0])));if(ve(n))return!1;if(!U(t[1],n.value))return!1}return!0}return!1},toString(){return Ee(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(ge)}},[ne](){return this.toJSON()},pipe(){return N(this,arguments)}},qu=(e,t,n,r)=>{const s=Object.create(gk);return s._editable=e,s._edit=t,s._root=n,s._size=r,s};class Ni{constructor(t,n){u(this,"map");u(this,"f");u(this,"v");this.map=t,this.f=n,this.v=$g(this.map._root,this.f,void 0)}next(){if(ve(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=qo(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new Ni(this.map,this.f)}}const qo=e=>e?Tg(e[0],e[1],e[2],e[3],e[4]):A(),$g=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return xe(e.value)?j({value:t(e.key,e.value.value),cont:n}):qo(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return Tg(r.length,r,0,t,n)}default:return qo(n)}},Tg=(e,t,n,r,s)=>{for(;n<e;){const o=t[n++];if(o&&!it(o))return $g(o,r,[e,t,n,r,s])}return qo(s)},yk=qu(!1,0,new Zt,0),Ri=()=>yk,_k=e=>{const t=Ig(Ri());for(const n of e)ds(t,n[0],n[1]);return kk(t)},bk=e=>F(e,la),Sk=e=>e&&it(e._root),wk=h(2,(e,t)=>Ju(e,t,I(t))),Ju=h(3,(e,t,n)=>{let r=e._root,s=0;for(;;)switch(r._tag){case"LeafNode":return U(t,r.key)?r.value:A();case"CollisionNode":{if(n===r.hash){const o=r.children;for(let i=0,c=o.length;i<c;++i){const a=o[i];if("key"in a&&U(t,a.key))return a.value}}return A()}case"IndexedNode":{const o=cr(s,n),i=Bn(o);if(r.mask&i){r=r.children[vg(r.mask,i)],s+=En;break}return A()}case"ArrayNode":{if(r=r.children[cr(s,n)],r){s+=En;break}return A()}default:return A()}}),vk=h(2,(e,t)=>xe(Ju(e,t,I(t)))),ds=h(3,(e,t,n)=>Vu(e,t,()=>j(n))),Ek=h(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:qu(e._editable,e._edit,t,n)),xg=e=>new Ni(e,t=>t),fa=e=>e._size,Ig=e=>qu(!0,e._edit+1,e._root,e._size),kk=e=>(e._editable=!1,e),Vu=h(3,(e,t,n)=>Ok(e,t,I(t),n)),Ok=h(4,(e,t,n,r)=>{const s={value:e._size},o=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,s);return _(e,Ek(o,s.value))}),Mf=h(2,(e,t)=>Vu(e,t,A)),$k=h(2,(e,t)=>Ci(e,Ri(),(n,r,s)=>ds(n,s,t(r,s)))),Tk=h(2,(e,t)=>Ci(e,void 0,(n,r,s)=>t(r,s))),Ci=h(3,(e,t,n)=>{const r=e._root;if(r._tag==="LeafNode")return xe(r.value)?n(t,r.value.value,r.key):t;if(r._tag==="EmptyNode")return t;const s=[r.children];let o;for(;o=s.pop();)for(let i=0,c=o.length;i<c;){const a=o[i++];a&&!it(a)&&(a._tag==="LeafNode"?xe(a.value)&&(t=n(t,a.value.value,a.key)):s.push(a.children))}return t}),Mg="effect/HashSet",da=Symbol.for(Mg),xk={[da]:da,[Symbol.iterator](){return xg(this._keyMap)},[K](){return ie(this,V(I(this._keyMap))(I(Mg)))},[L](e){return Ik(e)?fa(this._keyMap)===fa(e._keyMap)&&U(this._keyMap,e._keyMap):!1},toString(){return Ee(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(ge)}},[ne](){return this.toJSON()},pipe(){return N(this,arguments)}},Pi=e=>{const t=Object.create(xk);return t._keyMap=e,t},Ik=e=>F(e,da),Mk=Pi(Ri()),Fi=()=>Mk,Ak=e=>{const t=Hu(Fi());for(const n of e)hs(t,n);return Wu(t)},Nk=(...e)=>{const t=Hu(Fi());for(const n of e)hs(t,n);return Wu(t)},Rk=h(2,(e,t)=>vk(e._keyMap,t)),Ck=e=>fa(e._keyMap),Hu=e=>Pi(Ig(e._keyMap)),Wu=e=>(e._keyMap._editable=!1,e),Ag=h(2,(e,t)=>{const n=Hu(e);return t(n),Wu(n)}),hs=h(2,(e,t)=>e._keyMap._editable?(ds(t,!0)(e._keyMap),e):Pi(ds(t,!0)(e._keyMap))),Ng=h(2,(e,t)=>e._keyMap._editable?(Mf(t)(e._keyMap),e):Pi(Mf(t)(e._keyMap))),Pk=h(2,(e,t)=>Ag(e,n=>{for(const r of t)Ng(n,r)})),Fk=h(2,(e,t)=>Ag(Fi(),n=>{jk(e,r=>hs(n,r));for(const r of t)hs(n,r)})),jk=h(2,(e,t)=>Tk(e._keyMap,(n,r)=>t(r))),Lk=h(3,(e,t,n)=>Ci(e._keyMap,t,(r,s,o)=>n(r,o))),kn=Fi,Dk=Ak,zu=Nk,Kk=Rk,Rg=Ck,ss=hs,Cg=Ng,Af=Pk,ps=Fk,Jo=Lk,Nf=Symbol.for("effect/MutableRef"),Uk={[Nf]:Nf,toString(){return Ee(this.toJSON())},toJSON(){return{_id:"MutableRef",current:ge(this.current)}},[ne](){return this.toJSON()},pipe(){return N(this,arguments)}},Pg=e=>{const t=Object.create(Uk);return t.current=e,t},ji=e=>e.current,Fg=h(2,(e,t)=>(e.current=t,e)),Gu="effect/FiberId",ms=Symbol.for(Gu),Vo="None",ha="Runtime",Bk="Composite",qk=le(`${Gu}-${Vo}`);var zd;let Jk=class{constructor(){u(this,zd,ms);u(this,"_tag",Vo);u(this,"id",-1);u(this,"startTimeMillis",-1)}[(zd=ms,K)](){return qk}[L](t){return jg(t)&&t._tag===Vo}toString(){return Ee(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[ne](){return this.toJSON()}};var Gd;class Vk{constructor(t,n){u(this,"id");u(this,"startTimeMillis");u(this,Gd,ms);u(this,"_tag",ha);this.id=t,this.startTimeMillis=n}[(Gd=ms,K)](){return ie(this,le(`${Gu}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[L](t){return jg(t)&&t._tag===ha&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return Ee(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[ne](){return this.toJSON()}}const Hk=new Jk,jg=e=>F(e,ms),pa=e=>{switch(e._tag){case Vo:return kn();case ha:return zu(e.id);case Bk:return _(pa(e.left),ps(pa(e.right)))}},Rf=J(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Pg(0)),Lg=e=>Array.from(pa(e)).map(n=>`#${n}`).join(","),Wk=()=>{const e=ji(Rf);return _(Rf,Fg(e+1)),new Vk(e,Date.now())},On=Hk,zk=Lg,Dg=Wk,Yu=Ri,Gk=_k,Yk=Sk,Kg=wk,Ug=ds,Bg=xg,Zk=Vu,Qk=$k,qg=Ci,gs=Symbol.for("effect/List"),ma=e=>ae(e),Xk=e=>Bw(Iu(e),ma),eO=Xk(U),tO={[gs]:gs,_tag:"Cons",toString(){return Ee(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:ma(this).map(ge)}},[ne](){return this.toJSON()},[L](e){return Vg(e)&&this._tag===e._tag&&eO(this,e)},[K](){return ie(this,Is(ma(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},pipe(){return N(this,arguments)}},Ho=(e,t)=>{const n=Object.create(tO);return n.head=e,n.tail=t,n},nO=le("Nil"),rO={[gs]:gs,_tag:"Nil",toString(){return Ee(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[ne](){return this.toJSON()},[K](){return nO},[L](e){return Vg(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return N(this,arguments)}},Jg=Object.create(rO),Vg=e=>F(e,gs),Rt=e=>e._tag==="Nil",sO=e=>e._tag==="Cons",oO=()=>Jg,$n=(e,t)=>Ho(e,t),ur=oO,Zu=e=>Ho(e,Jg),iO=h(2,(e,t)=>aO(t,e)),cO=h(2,(e,t)=>$n(t,e)),aO=h(2,(e,t)=>{if(Rt(e))return t;if(Rt(t))return e;{const n=Ho(t.head,e);let r=n,s=t.tail;for(;!Rt(s);){const o=Ho(s.head,e);r.tail=o,r=o,s=s.tail}return n}}),uO=h(3,(e,t,n)=>{let r=t,s=e;for(;!Rt(s);)r=n(r,s.head),s=s.tail;return r}),lO=e=>{let t=ur(),n=e;for(;!Rt(n);)t=cO(t,n.head),n=n.tail;return t},Li=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=$u,e}(),fO=Symbol.for("effect/DifferContextPatch");function Cf(e){return e}const js={...Li.prototype,[fO]:{_Value:Cf,_Patch:Cf}},dO=Object.assign(Object.create(js),{_tag:"Empty"}),hO=Object.create(dO),Hg=()=>hO,pO=Object.assign(Object.create(js),{_tag:"AndThen"}),mO=(e,t)=>{const n=Object.create(pO);return n.first=e,n.second=t,n},gO=Object.assign(Object.create(js),{_tag:"AddService"}),yO=(e,t)=>{const n=Object.create(gO);return n.key=e,n.service=t,n},_O=Object.assign(Object.create(js),{_tag:"RemoveService"}),bO=e=>{const t=Object.create(_O);return t.key=e,t},SO=Object.assign(Object.create(js),{_tag:"UpdateService"}),wO=(e,t)=>{const n=Object.create(SO);return n.key=e,n.update=t,n},vO=(e,t)=>{const n=new Map(e.unsafeMap);let r=Hg();for(const[s,o]of t.unsafeMap.entries())if(n.has(s)){const i=n.get(s);n.delete(s),U(i,o)||(r=So(wO(s,()=>o))(r))}else n.delete(s),r=So(yO(s,o))(r);for(const[s]of n.entries())r=So(bO(s))(r);return r},So=h(2,(e,t)=>mO(e,t)),EO=h(2,(e,t)=>{if(e._tag==="Empty")return t;let n=!1,r=Ve(e);const s=new Map(t.unsafeMap);for(;or(r);){const i=ir(r),c=ln(r);switch(i._tag){case"Empty":{r=c;break}case"AddService":{s.set(i.key,i.service),r=c;break}case"AndThen":{r=dt(dt(c,i.second),i.first);break}case"RemoveService":{s.delete(i.key),r=c;break}case"UpdateService":{s.set(i.key,i.update(s.get(i.key))),n=!0,r=c;break}}}if(!n)return rr(s);const o=new Map;for(const[i]of t.unsafeMap)s.has(i)&&(o.set(i,s.get(i)),s.delete(i));for(const[i,c]of s)o.set(i,c);return rr(o)}),kO=Symbol.for("effect/DifferHashSetPatch");function gc(e){return e}const Di={...Li.prototype,[kO]:{_Value:gc,_Key:gc,_Patch:gc}},OO=Object.assign(Object.create(Di),{_tag:"Empty"}),$O=Object.create(OO),Wg=()=>$O,TO=Object.assign(Object.create(Di),{_tag:"AndThen"}),xO=(e,t)=>{const n=Object.create(TO);return n.first=e,n.second=t,n},IO=Object.assign(Object.create(Di),{_tag:"Add"}),MO=e=>{const t=Object.create(IO);return t.value=e,t},AO=Object.assign(Object.create(Di),{_tag:"Remove"}),NO=e=>{const t=Object.create(AO);return t.value=e,t},RO=(e,t)=>{const[n,r]=Jo([e,Wg()],([s,o],i)=>Kk(i)(s)?[Cg(i)(s),o]:[s,ga(MO(i))(o)])(t);return Jo(r,(s,o)=>ga(NO(o))(s))(n)},ga=h(2,(e,t)=>xO(e,t)),CO=h(2,(e,t)=>{if(e._tag==="Empty")return t;let n=t,r=Ve(e);for(;or(r);){const s=ir(r),o=ln(r);switch(s._tag){case"Empty":{r=o;break}case"AndThen":{r=dt(s.first)(dt(s.second)(o));break}case"Add":{n=ss(s.value)(n),r=o;break}case"Remove":n=Cg(s.value)(n),r=o}}return n}),PO=Symbol.for("effect/DifferReadonlyArrayPatch");function Pf(e){return e}const Ls={...Li.prototype,[PO]:{_Value:Pf,_Patch:Pf}},FO=Object.assign(Object.create(Ls),{_tag:"Empty"}),jO=Object.create(FO),zg=()=>jO,LO=Object.assign(Object.create(Ls),{_tag:"AndThen"}),DO=(e,t)=>{const n=Object.create(LO);return n.first=e,n.second=t,n},KO=Object.assign(Object.create(Ls),{_tag:"Append"}),UO=e=>{const t=Object.create(KO);return t.values=e,t},BO=Object.assign(Object.create(Ls),{_tag:"Slice"}),qO=(e,t)=>{const n=Object.create(BO);return n.from=e,n.until=t,n},JO=Object.assign(Object.create(Ls),{_tag:"Update"}),VO=(e,t)=>{const n=Object.create(JO);return n.index=e,n.patch=t,n},HO=e=>{let t=0,n=zg();for(;t<e.oldValue.length&&t<e.newValue.length;){const r=e.oldValue[t],s=e.newValue[t],o=e.differ.diff(r,s);U(o,e.differ.empty)||(n=wo(n,VO(t,o))),t=t+1}return t<e.oldValue.length&&(n=wo(n,qO(0,t))),t<e.newValue.length&&(n=wo(n,UO(t0(t)(e.newValue)))),n},wo=h(2,(e,t)=>DO(e,t)),WO=h(3,(e,t,n)=>{if(e._tag==="Empty")return t;let r=t.slice(),s=rt(e);for(;_o(s);){const o=Pe(s),i=vn(s);switch(o._tag){case"Empty":{s=i;break}case"AndThen":{i.unshift(o.first,o.second),s=i;break}case"Append":{for(const c of o.values)r.push(c);s=i;break}case"Slice":{r=r.slice(o.from,o.until),s=i;break}case"Update":{r[o.index]=n.patch(o.patch,r[o.index]),s=i;break}}}return r}),zO=Symbol.for("effect/Differ"),GO={[zO]:{_P:te,_V:te},pipe(){return N(this,arguments)}},kr=e=>{const t=Object.create(GO);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},YO=()=>kr({empty:Hg(),combine:(e,t)=>So(t)(e),diff:(e,t)=>vO(e,t),patch:(e,t)=>EO(t)(e)}),ZO=()=>kr({empty:Wg(),combine:(e,t)=>ga(t)(e),diff:(e,t)=>RO(e,t),patch:(e,t)=>CO(t)(e)}),QO=e=>kr({empty:zg(),combine:(t,n)=>wo(t,n),diff:(t,n)=>HO({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>WO(t,n,e)}),Gg=()=>XO((e,t)=>t),XO=e=>kr({empty:te,combine:(t,n)=>t===te?n:n===te?t:r=>n(t(r)),diff:(t,n)=>U(t,n)?te:mi(n),patch:(t,n)=>e(n,t(n))}),ys=255,Yg=8,ya=e=>e&ys,_a=e=>e>>Yg&ys,Ds=(e,t)=>(e&ys)+((t&e&ys)<<Yg),e$=Ds(0,0),t$=e=>Ds(e,e),n$=e=>Ds(e,0),r$=h(2,(e,t)=>Ds(ya(e)&~t,_a(e))),s$=h(2,(e,t)=>e|t),o$=e=>~e>>>0&ys,i$=0,Or=1,c$=2,Zg=4,ba=16,Qg=32,a$=e=>Ki(e,Qg),u$=h(2,(e,t)=>e|t),Jt=e=>Xg(e)&&!f$(e),Xg=e=>Ki(e,Or),Ki=h(2,(e,t)=>(e&t)!==0),ey=(...e)=>e.reduce((t,n)=>t|n,0),l$=ey(i$),Ff=e=>Ki(e,Zg),f$=e=>Ki(e,ba),vo=h(2,(e,t)=>Ds(e^t,t)),Eo=h(2,(e,t)=>e&(o$(ya(t))|_a(t))|ya(t)&_a(t)),jf=kr({empty:e$,diff:(e,t)=>vo(e,t),combine:(e,t)=>s$(t)(e),patch:(e,t)=>Eo(t,e)}),d$=t$,ty=n$,Lf=r$,ny=(e,t)=>({_tag:"Par",left:e,right:t}),so=(e,t)=>({_tag:"Seq",left:e,right:t}),h$=e=>{let t=Zu(e),n=ur();for(;;){const[r,s]=uO(t,[ry(),ur()],([o,i],c)=>{const[a,l]=p$(c);return[b$(o,a),iO(i,l)]});if(n=m$(n,r),Rt(s))return lO(n);t=s}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},p$=e=>{let t=e,n=ry(),r=ur(),s=ur();for(;;)switch(t._tag){case"Empty":{if(Rt(r))return[n,s];t=r.head,r=r.tail;break}case"Par":{r=$n(t.right,r),t=t.left;break}case"Seq":{const o=t.left,i=t.right;switch(o._tag){case"Empty":{t=i;break}case"Par":{const c=o.left,a=o.right;t=ny(so(c,i),so(a,i));break}case"Seq":{const c=o.left,a=o.right;t=so(c,so(a,i));break}case"Single":{t=o,s=$n(i,s);break}}break}case"Single":{if(n=_$(n,t),Rt(r))return[n,s];t=r.head,r=r.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},m$=(e,t)=>{if(Rt(e))return Zu(yc(t));if(S$(t))return e;const n=$$(e.head),r=w$(t);return n.length===1&&r.length===1&&U(n[0],r[0])?$n(O$(e.head,yc(t)),e.tail):$n(yc(t),e)},g$=Symbol.for("effect/RequestBlock/RequestBlockParallel"),y$={_R:e=>e};var Yd;Yd=g$;class Qu{constructor(t){u(this,"map");u(this,Yd,y$);this.map=t}}const ry=()=>new Qu(Yu()),_$=(e,t)=>new Qu(Zk(e.map,t.dataSource,n=>Cv(vm(n,jE(t.blockedRequest)),()=>Ve(t.blockedRequest)))),b$=(e,t)=>new Qu(qg(e.map,t.map,(n,r,s)=>Ug(n,s,Je(Kg(n,s),{onNone:()=>r,onSome:o=>ot(r,o)})))),S$=e=>Yk(e.map),w$=e=>Array.from(Bg(e.map)),yc=e=>k$(Qk(e.map,t=>Ve(t))),v$=Symbol.for("effect/RequestBlock/RequestBlockSequential"),E$={_R:e=>e};var Zd;Zd=v$;class sy{constructor(t){u(this,"map");u(this,Zd,E$);this.map=t}}const k$=e=>new sy(e),O$=(e,t)=>new sy(qg(t.map,e.map,(n,r,s)=>Ug(n,s,Je(Kg(n,s),{onNone:()=>Ft(),onSome:o=>ot(o,r)})))),$$=e=>Array.from(Bg(e.map)),T$=e=>Array.from(e.map),Ks="Die",Tn="Empty",Pn="Fail",$r="Interrupt",lr="Parallel",fr="Sequential",oy="effect/Cause",iy=Symbol.for(oy),x$={_E:e=>e},Tr={[iy]:x$,[K](){return _(I(oy),V(I(B$(this))),ie(this))},[L](e){return I$(e)&&U$(this,e)},pipe(){return N(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:ge(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:ge(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:ge(this.left),right:ge(this.right)}}},toString(){return xr(this)},[ne](){return this.toJSON()}},_s=(()=>{const e=Object.create(Tr);return e._tag=Tn,e})(),Wo=e=>{const t=Object.create(Tr);return t._tag=Pn,t.error=e,t},Et=e=>{const t=Object.create(Tr);return t._tag=Ks,t.defect=e,t},Vt=e=>{const t=Object.create(Tr);return t._tag=$r,t.fiberId=e,t},Ui=(e,t)=>{const n=Object.create(Tr);return n._tag=lr,n.left=e,n.right=t,n},et=(e,t)=>{const n=Object.create(Tr);return n._tag=fr,n.left=e,n.right=t,n},I$=e=>F(e,iy),M$=e=>e._tag===Tn,A$=e=>e._tag===Pn,N$=e=>e._tag===Tn?!0:dr(e,!0,(t,n)=>{switch(n._tag){case Tn:return j(t);case Ks:case Pn:case $r:return j(!1);default:return A()}}),R$=e=>xe(D$(e)),Xu=e=>el(void 0,J$)(e),C$=e=>sr(dr(e,Ft(),(t,n)=>n._tag===Pn?j(_(t,dt(n.error))):A())),P$=e=>sr(dr(e,Ft(),(t,n)=>n._tag===Ks?j(_(t,dt(n.defect))):A())),F$=e=>dr(e,kn(),(t,n)=>n._tag===$r?j(_(t,ss(n.fiberId))):A()),j$=e=>cy(e,t=>t._tag===Pn?j(t.error):A()),L$=e=>{const t=j$(e);switch(t._tag){case"None":return H(e);case"Some":return B(t.value)}},D$=e=>cy(e,t=>t._tag===$r?j(t.fiberId):A()),Df=e=>ay(e,{onEmpty:_s,onFail:()=>_s,onDie:Et,onInterrupt:Vt,onSequential:et,onParallel:Ui}),K$=e=>ay(e,{onEmpty:_s,onFail:Et,onDie:Et,onInterrupt:Vt,onSequential:et,onParallel:Ui}),U$=(e,t)=>{let n=Ve(e),r=Ve(t);for(;or(n)&&or(r);){const[s,o]=_(ir(n),dr([kn(),Ft()],([a,l],f)=>{const[d,p]=Sa(f);return j([_(a,ps(d)),_(l,ot(p))])})),[i,c]=_(ir(r),dr([kn(),Ft()],([a,l],f)=>{const[d,p]=Sa(f);return j([_(a,ps(d)),_(l,ot(p))])}));if(!U(s,i))return!1;n=o,r=c}return!0},B$=e=>q$(Ve(e),Ft()),q$=(e,t)=>{for(;;){const[n,r]=_(e,Tm([kn(),Ft()],([o,i],c)=>{const[a,l]=Sa(c);return[_(o,ps(a)),_(i,ot(l))]})),s=Rg(n)>0?_(t,dt(n)):t;if(LE(r))return sr(s);e=r,t=s}throw new Error(_i("Cause.flattenCauseLoop"))},cy=h(2,(e,t)=>{const n=[e];for(;n.length>0;){const r=n.pop(),s=t(r);switch(s._tag){case"None":{switch(r._tag){case fr:case lr:{n.push(r.right),n.push(r.left);break}}break}case"Some":return s}}return A()}),Sa=e=>{let t=e;const n=[];let r=kn(),s=Ft();for(;t!==void 0;)switch(t._tag){case Tn:{if(n.length===0)return[r,s];t=n.pop();break}case Pn:{if(r=ss(r,pc(t._tag,t.error)),n.length===0)return[r,s];t=n.pop();break}case Ks:{if(r=ss(r,pc(t._tag,t.defect)),n.length===0)return[r,s];t=n.pop();break}case $r:{if(r=ss(r,pc(t._tag,t.fiberId)),n.length===0)return[r,s];t=n.pop();break}case fr:{switch(t.left._tag){case Tn:{t=t.right;break}case fr:{t=et(t.left.left,et(t.left.right,t.right));break}case lr:{t=Ui(et(t.left.left,t.right),et(t.left.right,t.right));break}default:{s=dt(s,t.right),t=t.left;break}}break}case lr:{n.push(t.right),t=t.left;break}}throw new Error(_i("Cause.evaluateCauseLoop"))},J$={emptyCase:ff,failCase:zc,dieCase:zc,interruptCase:ff,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},Kf="SequentialCase",Uf="ParallelCase",ay=h(2,(e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:s,onParallel:o,onSequential:i})=>el(e,void 0,{emptyCase:()=>n,failCase:(c,a)=>r(a),dieCase:(c,a)=>t(a),interruptCase:(c,a)=>s(a),sequentialCase:(c,a,l)=>i(a,l),parallelCase:(c,a,l)=>o(a,l)})),dr=h(3,(e,t,n)=>{let r=t,s=e;const o=[];for(;s!==void 0;){const i=n(r,s);switch(r=xe(i)?i.value:r,s._tag){case fr:{o.push(s.right),s=s.left;break}case lr:{o.push(s.right),s=s.left;break}default:{s=void 0;break}}s===void 0&&o.length>0&&(s=o.pop())}return r}),el=h(3,(e,t,n)=>{const r=[e],s=[];for(;r.length>0;){const i=r.pop();switch(i._tag){case Tn:{s.push(H(n.emptyCase(t)));break}case Pn:{s.push(H(n.failCase(t,i.error)));break}case Ks:{s.push(H(n.dieCase(t,i.defect)));break}case $r:{s.push(H(n.interruptCase(t,i.fiberId)));break}case fr:{r.push(i.right),r.push(i.left),s.push(B({_tag:Kf}));break}case lr:{r.push(i.right),r.push(i.left),s.push(B({_tag:Uf}));break}}}const o=[];for(;s.length>0;){const i=s.pop();switch(i._tag){case"Left":{switch(i.left._tag){case Kf:{const c=o.pop(),a=o.pop(),l=n.sequentialCase(t,c,a);o.push(l);break}case Uf:{const c=o.pop(),a=o.pop(),l=n.parallelCase(t,c,a);o.push(l);break}}break}case"Right":{o.push(i.right);break}}}if(o.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return o.pop()}),xr=(e,t)=>Xu(e)?"All fibers interrupted without errors.":ly(e).map(function(n){return(t==null?void 0:t.renderErrorCause)!==!0||n.cause===void 0?n.stack:`${n.stack} {
${uy(n.cause,"  ")}
}`}).join(`
`),uy=(e,t)=>{const n=e.stack.split(`
`);let r=`${t}[cause]: ${n[0]}`;for(let s=1,o=n.length;s<o;s++)r+=`
${t}${n[s]}`;return e.cause&&(r+=` {
${uy(e.cause,`${t}  `)}
${t}}`),r};class zo extends globalThis.Error{constructor(n){const r=typeof n=="object"&&n!==null,s=Error.stackTraceLimit;Error.stackTraceLimit=1;super(V$(n),r&&"cause"in n&&typeof n.cause<"u"?{cause:new zo(n.cause)}:void 0);u(this,"span");this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=s,this.name=n instanceof Error?n.name:"Error",r&&(hr in n&&(this.span=n[hr]),Object.keys(n).forEach(o=>{o in this||(this[o]=n[o])})),this.stack=z$(`${this.name}: ${this.message}`,n instanceof Error&&n.stack?n.stack:"",this.span)}}const V$=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(F(e,"toString")&&Ts(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return rm(e)},H$=/\((.*)\)/g,W$=J("effect/Tracer/spanToTrace",()=>new WeakMap),z$=(e,t,n)=>{const r=[e],s=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let o=1;o<s.length;o++){if(s[o].includes(" at new BaseEffectError")||s[o].includes(" at new YieldableError")){o++;continue}if(s[o].includes("Generator.next")||s[o].includes("effect_internal_function"))break;r.push(s[o].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let o=n,i=0;for(;o&&o._tag==="Span"&&i<10;){const c=W$.get(o);if(typeof c=="function"){const a=c();if(typeof a=="string"){const l=a.matchAll(H$);let f=!1;for(const[,d]of l)f=!0,r.push(`    at ${o.name} (${d})`);f||r.push(`    at ${o.name} (${a.replace(/^at /,"")})`)}else r.push(`    at ${o.name}`)}else r.push(`    at ${o.name}`);o=St(o.parent),i++}}return r.join(`
`)},hr=Symbol.for("effect/SpanAnnotation"),ly=e=>el(e,void 0,{emptyCase:()=>[],dieCase:(t,n)=>[new zo(n)],failCase:(t,n)=>[new zo(n)],interruptCase:()=>[],parallelCase:(t,n,r)=>[...n,...r],sequentialCase:(t,n,r)=>[...n,...r]}),Bi="Pending",fy="Done",G$="effect/Deferred",Y$=Symbol.for(G$),Z$={_E:e=>e,_A:e=>e},Q$=e=>({_tag:Bi,joiners:e}),X$=e=>({_tag:fy,effect:e});class Us{constructor(t){u(this,"self");u(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new Us(this.self)}}const dy=(e,t)=>{const n=new Ie("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},eT=e=>{const t=new Ie("RunBlocked");return t.effect_instruction_i0=e,t},pr=Symbol.for("effect/Effect");class tT{constructor(t,n){u(this,"patch");u(this,"op");u(this,"_op",Ou);this.patch=t,this.op=n}}var Qd;class Ie{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,Qd,Xn);this._op=t}[(Qd=pr,L)](t){return this===t}[K](){return ie(this,vu(this))}pipe(){return N(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:ge(this.effect_instruction_i0),effect_instruction_i1:ge(this.effect_instruction_i1),effect_instruction_i2:ge(this.effect_instruction_i2)}}toString(){return Ee(this.toJSON())}[ne](){return this.toJSON()}[Symbol.iterator](){return new Us(new xs(this))}}var Xd;class hy{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,Xd,Xn);this._op=t,this._tag=t}[(Xd=pr,L)](t){return ll(t)&&t._op==="Failure"&&U(this.effect_instruction_i0,t.effect_instruction_i0)}[K](){return _(le(this._tag),V(I(this.effect_instruction_i0)),ie(this))}get cause(){return this.effect_instruction_i0}pipe(){return N(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return Ee(this.toJSON())}[ne](){return this.toJSON()}[Symbol.iterator](){return new Us(new xs(this))}}var eh;class py{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,eh,Xn);this._op=t,this._tag=t}[(eh=pr,L)](t){return ll(t)&&t._op==="Success"&&U(this.effect_instruction_i0,t.effect_instruction_i0)}[K](){return _(le(this._tag),V(I(this.effect_instruction_i0)),ie(this))}get value(){return this.effect_instruction_i0}pipe(){return N(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:ge(this.value)}}toString(){return Ee(this.toJSON())}[ne](){return this.toJSON()}[Symbol.iterator](){return new Us(new xs(this))}}const qi=e=>F(e,pr),He=e=>{const t=new Ie(im);return t.effect_instruction_i0=e,t},nT=h(3,(e,t,n)=>Hi(r=>P(e,s=>P(yy(pe(()=>r(t(s)))),o=>pe(()=>n(s,o)).pipe(mr({onFailure:i=>{switch(o._tag){case at:return ht(et(o.effect_instruction_i0,i));case ut:return ht(i)}},onSuccess:()=>o})))))),Bs=h(2,(e,t)=>P(e,()=>ee(t))),qs=e=>Bs(e,void 0),my=function(){const e=new Ie(wi);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(_i("you're not supposed to end up here"))}return e},Go=(e,t=On)=>{const n=new Ie(ts);let r;return n.effect_instruction_i0=s=>{r=e(s)},n.effect_instruction_i1=t,Ey(n,s=>qi(r)?r:pt)},gy=(e,t=On)=>pe(()=>Go(e,t)),bs=(e,t=On)=>my(e,function(){let n,r;function s(a){n?n(a):r===void 0&&(r=a)}const o=new Ie(ts);o.effect_instruction_i0=a=>{n=a,r&&a(r)},o.effect_instruction_i1=t;let i,c;return this.effect_instruction_i0.length!==1?(c=new AbortController,i=Re(()=>this.effect_instruction_i0(s,c.signal))):i=Re(()=>this.effect_instruction_i0(s)),i||c?Ey(o,a=>(c&&c.abort(),i??pt)):o}),wa=h(2,(e,t)=>nl(e,{onFailure:t,onSuccess:ee})),Bf=Symbol.for("effect/OriginalAnnotation"),tl=(e,t)=>xe(t)?new Proxy(e,{has(n,r){return r===hr||r===Bf||r in n},get(n,r){return r===hr?t.value:r===Bf?e:n[r]}}):e,qf=e=>tn(e)&&!(hr in e)?He(t=>ht(Et(tl(e,fl(t))))):ht(Et(e)),Jf=e=>rT(()=>Et(new RT(e))),Yo=e=>nl(e,{onFailure:t=>ee(B(t)),onSuccess:t=>ee(H(t))}),yy=e=>iT(e,{onFailure:Q,onSuccess:fe}),Le=e=>tn(e)&&!(hr in e)?He(t=>ht(Wo(tl(e,fl(t))))):ht(Wo(e)),_y=e=>P(C(e),Le),ht=e=>{const t=new hy(at);return t.effect_instruction_i0=e,t},rT=e=>P(C(e),ht),sT=He(e=>ee(e.id())),by=e=>He(t=>e(t.id())),P=h(2,(e,t)=>{const n=new Ie(Po);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),oT=e=>{const t=new Ie("OnStep");return t.effect_instruction_i0=e,t},Sy=e=>P(e,te),iT=h(2,(e,t)=>mr(e,{onFailure:n=>ee(t.onFailure(n)),onSuccess:n=>ee(t.onSuccess(n))})),mr=h(2,(e,t)=>{const n=new Ie(Fo);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),nl=h(2,(e,t)=>mr(e,{onFailure:n=>{if(P$(n).length>0)return ht(K$(n));const s=C$(n);return s.length>0?t.onFailure(yg(s)):ht(n)},onSuccess:t.onSuccess})),Ht=h(2,(e,t)=>pe(()=>{const n=ae(e),r=ki(n.length);let s=0;return Bs(sl({while:()=>s<n.length,body:()=>t(n[s],s),step:o=>{r[s++]=o}}),r)})),Ji=h(2,(e,t)=>pe(()=>{const n=ae(e);let r=0;return sl({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})),wy=e=>{const t=new Ie(Ms);return t.effect_instruction_i0=d$(Or),t.effect_instruction_i1=()=>e,t},Ke=h(2,(e,t)=>P(e,n=>C(()=>t(n)))),vy=h(2,(e,t)=>nl(e,{onFailure:n=>_y(()=>t.onFailure(n)),onSuccess:n=>C(()=>t.onSuccess(n))})),Vi=h(2,(e,t)=>mr(e,{onFailure:n=>{const r=L$(n);switch(r._tag){case"Left":return _y(()=>t(r.left));case"Right":return ht(r.right)}},onSuccess:ee})),rl=h(2,(e,t)=>Hi(n=>mr(n(e),{onFailure:r=>{const s=Q(r);return mr(t(s),{onFailure:o=>Q(et(r,o)),onSuccess:()=>s})},onSuccess:r=>{const s=fe(r);return Wi(t(s),s)}}))),Ey=h(2,(e,t)=>rl(e,Ry({onFailure:n=>Xu(n)?qs(t(F$(n))):pt,onSuccess:()=>pt}))),ee=e=>{const t=new py(ut);return t.effect_instruction_i0=e,t},pe=e=>{const t=new Ie(wi);return t.commit=e,t},C=e=>{const t=new Ie(om);return t.effect_instruction_i0=e,t},cT=h(e=>e.length===3||e.length===2&&!(tn(e[1])&&"onlyEffect"in e[1]),(e,t)=>P(e,n=>{const r=typeof t=="function"?t(n):t;return qi(r)?Bs(r,n):Yw(r)?Go(s=>{r.then(o=>s(ee(n)),o=>s(Le(new jT(o,"An unknown error occurred in Effect.tap"))))}):ee(n)})),aT=e=>He(t=>{const n=t.getFiberRef(Ea),r=_(n,ke(()=>t.scope()));return e(zi(Ea,j(r)))}),ky=e=>{const t=new Ie(Ms);return t.effect_instruction_i0=ty(Or),t.effect_instruction_i1=()=>e,t},Hi=e=>my(e,function(){const t=new Ie(Ms);return t.effect_instruction_i0=ty(Or),t.effect_instruction_i1=n=>Xg(n)?Re(()=>this.effect_instruction_i0(wy)):Re(()=>this.effect_instruction_i0(ky)),t}),pt=ee(void 0),uT=e=>{const t=new Ie(Ms);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},sl=e=>{const t=new Ie(jo);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},ol=e=>{const t=new Ie(yo);return typeof(e==null?void 0:e.priority)<"u"?TT(t,e.priority):t},Oy=h(2,(e,t)=>P(e,n=>Ke(t,r=>[n,r]))),$y=h(2,(e,t)=>P(e,n=>Bs(t,n))),Wi=h(2,(e,t)=>P(e,()=>t)),_c=gy(()=>{const e=setInterval(()=>{},2147483647);return C(()=>clearInterval(e))}),lT=e=>P(sT,t=>_(e,Ty(t))),Ty=h(2,(e,t)=>P(e.interruptAsFork(t),()=>e.await)),fT={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return N(this,arguments)}},dT={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return N(this,arguments)}},hT={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return N(this,arguments)}},pT={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return N(this,arguments)}},xy={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return N(this,arguments)}},Iy={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return N(this,arguments)}},mT={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return N(this,arguments)}},gT={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return N(this,arguments)}},yT="effect/FiberRef",_T=Symbol.for(yT),bT={_A:e=>e},il=e=>He(t=>fe(t.getFiberRef(e))),cl=h(2,(e,t)=>P(il(e),t)),Vf=h(2,(e,t)=>ST(e,()=>[void 0,t])),ST=h(2,(e,t)=>He(n=>{const[r,s]=t(n.getFiberRef(e));return n.setFiberRef(e,s),ee(r)})),zi=h(3,(e,t,n)=>nT($y(il(t),Vf(t,n)),()=>e,r=>Vf(t,r))),We=(e,t)=>Ir(e,{differ:Gg(),fork:(t==null?void 0:t.fork)??te,join:t==null?void 0:t.join}),wT=e=>{const t=ZO();return Ir(e,{differ:t,fork:t.empty})},vT=e=>{const t=QO(Gg());return Ir(e,{differ:t,fork:t.empty})},My=e=>{const t=YO();return Ir(e,{differ:t,fork:t.empty})},Ir=(e,t)=>({...Ns,[_T]:bT,initial:e,commit(){return il(this)},diff:(r,s)=>t.differ.diff(r,s),combine:(r,s)=>t.differ.combine(r,s),patch:r=>s=>t.differ.patch(r,s),fork:t.fork,join:t.join??((r,s)=>s)}),ET=e=>Ir(e,{differ:jf,fork:jf.empty}),Js=J(Symbol.for("effect/FiberRef/currentContext"),()=>My(Du())),Gi=J(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>We(0)),Ay=J(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>We(2048)),kT=J(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>We(Yu())),OT=J(Symbol.for("effect/FiberRef/currentLogLevel"),()=>We(xy)),$T=J(Symbol.for("effect/FiberRef/currentLogSpan"),()=>We(ur())),TT=h(2,(e,t)=>zi(e,Gi,t)),xT=J(Symbol.for("effect/FiberRef/currentConcurrency"),()=>We("unbounded")),IT=J(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>We(!0)),MT=J(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>We(j(Iy))),va=J(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>vT(er())),Ea=J(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>We(A(),{fork:()=>A(),join:(e,t)=>e})),oo=J(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>We(_s,{fork:()=>_s,join:(e,t)=>e})),AT=(e,t)=>e.addFinalizer(()=>qs(t)),NT=(e,t)=>e.close(t),Yi=(e,t)=>e.fork(t),al=function(){class e extends globalThis.Error{commit(){return Le(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[ne](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?xr(Wo(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,bv),e}(),ul=(e,t)=>{class n extends al{constructor(){super(...arguments);u(this,"_tag",t)}}return Object.assign(n.prototype,e),n.prototype.name=t,n},Hf=Symbol.for("effect/Cause/errors/RuntimeException"),RT=ul({[Hf]:Hf},"RuntimeException"),CT=Symbol.for("effect/Cause/errors/InterruptedException"),PT=e=>F(e,CT),Wf=Symbol.for("effect/Cause/errors/IllegalArgument"),FT=ul({[Wf]:Wf},"IllegalArgumentException"),zf=Symbol.for("effect/Cause/errors/NoSuchElement"),Ny=ul({[zf]:zf},"NoSuchElementException"),Gf=Symbol.for("effect/Cause/errors/UnknownException"),jT=function(){class e extends al{constructor(r,s){super(s??"An unknown error occurred",{cause:r});u(this,"_tag","UnknownException");u(this,"error");this.error=r}}return Object.assign(e.prototype,{[Gf]:Gf,name:"UnknownException"}),e}(),ll=e=>qi(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),LT=e=>e._tag==="Success",Yf=(e,t)=>BT(e,t!=null&&t.parallel?Ui:et),DT=e=>Q(Et(e)),Zf=e=>Q(Wo(e)),Q=e=>{const t=new hy(at);return t.effect_instruction_i0=e,t},KT=e=>Q(Vt(e)),bc=h(2,(e,t)=>{switch(e._tag){case at:return Q(e.effect_instruction_i0);case ut:return fe(t(e.effect_instruction_i0))}}),Ry=h(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case at:return t(e.effect_instruction_i0);case ut:return n(e.effect_instruction_i0)}}),fe=e=>{const t=new py(ut);return t.effect_instruction_i0=e,t},fn=fe(void 0),UT=h(3,(e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case at:switch(t._tag){case ut:return Q(e.effect_instruction_i0);case at:return Q(n(e.effect_instruction_i0,t.effect_instruction_i0))}case ut:switch(t._tag){case ut:return fe(r(e.effect_instruction_i0,t.effect_instruction_i0));case at:return Q(t.effect_instruction_i0)}}}),BT=(e,t)=>{const n=gg(e);return or(n)?_(ln(n),Tm(_(ir(n),bc(Ve)),(r,s)=>_(r,UT(s,{onSuccess:(o,i)=>_(o,dt(i)),onFailure:t}))),bc(sr),bc(r=>_n(r)),j):A()},qT=e=>({...Ns,[Y$]:Z$,state:Pg(Q$([])),commit(){return Cy(this)},blockingOn:e}),Cy=e=>gy(t=>{const n=ji(e.state);switch(n._tag){case fy:return t(n.effect);case Bi:return n.joiners.push(t),JT(e,t)}},e.blockingOn),Py=(e,t)=>{const n=ji(e.state);if(n._tag===Bi){Fg(e.state,X$(t));for(let r=0,s=n.joiners.length;r<s;r++)n.joiners[r](t)}},JT=(e,t)=>C(()=>{const n=ji(e.state);if(n._tag===Bi){const r=n.joiners.indexOf(t);r>=0&&n.joiners.splice(r,1)}}),VT=He(e=>fe(e.currentContext)),HT=()=>VT,Vs=e=>P(HT(),e),WT=h(2,(e,t)=>zi(Js,t)(e)),zT=h(2,(e,t)=>Vs(n=>WT(e,t(n)))),fl=e=>{const t=e.currentSpan;return t!==void 0&&t._tag==="Span"?j(t):A()},GT=LT,Qf=Symbol.for("effect/MutableHashMap"),YT={[Qf]:Qf,[Symbol.iterator](){return new dl(this)},toString(){return Ee(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(ge)}},[ne](){return this.toJSON()},pipe(){return N(this,arguments)}};class dl{constructor(t){u(this,"self");u(this,"referentialIterator");u(this,"bucketIterator");this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const t=this.referentialIterator.next();return t.done?(this.bucketIterator=new ZT(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new dl(this.self)}}class ZT{constructor(t){u(this,"backing");u(this,"currentBucket");this.backing=t}next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}}const QT=()=>{const e=Object.create(YT);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},on=h(2,(e,t)=>{if(Co(t)===!1)return e.referential.has(t)?j(e.referential.get(t)):A();const n=t[K](),r=e.buckets.get(n);return r===void 0?A():XT(e,r,t)}),XT=(e,t,n,r=!1)=>{for(let s=0,o=t.length;s<o;s++)if(n[L](t[s][0])){const i=t[s][1];return r&&(t.splice(s,1),e.bucketsSize--),j(i)}return A()},Lr=h(2,(e,t)=>xe(on(e,t))),Dr=h(3,(e,t,n)=>{if(Co(t)===!1)return e.referential.set(t,n),e;const r=t[K](),s=e.buckets.get(r);return s===void 0?(e.buckets.set(r,[[t,n]]),e.bucketsSize++,e):(ex(e,s,t),s.push([t,n]),e.bucketsSize++,e)}),ex=(e,t,n)=>{for(let r=0,s=t.length;r<s;r++)if(n[L](t[r][0])){t.splice(r,1),e.bucketsSize--;return}},tx="effect/Clock",Xf=Symbol.for(tx),hl=Cn("effect/Clock"),nx=2**31-1,ed={unsafeSchedule(e,t){const n=ua(t);if(n>nx)return zc;let r=!1;const s=setTimeout(()=>{r=!0,e()},n);return()=>(clearTimeout(s),!r)}},td=function(){const e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;let t;return()=>(t===void 0&&(t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6))),t+BigInt(Math.round(performance.now()*1e6)))}(),rx=function(){const e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return td;const t=td()-e.bigint();return()=>t+e.bigint()}();var th;th=Xf;class sx{constructor(){u(this,th,Xf);u(this,"currentTimeMillis",C(()=>this.unsafeCurrentTimeMillis()));u(this,"currentTimeNanos",C(()=>this.unsafeCurrentTimeNanos()))}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return rx()}scheduler(){return ee(ed)}sleep(t){return bs(n=>{const r=ed.unsafeSchedule(()=>n(pt),t);return qs(C(r))})}}const ox=()=>new sx,Fy="And",jy="Or",Ly="InvalidData",Dy="MissingData",Ky="SourceUnavailable",Uy="Unsupported",ix="effect/ConfigError",nd=Symbol.for(ix),Mr={_tag:"ConfigError",[nd]:nd},By=(e,t)=>{const n=Object.create(Mr);return n._op=Fy,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},qy=(e,t)=>{const n=Object.create(Mr);return n._op=jy,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},cx=(e,t,n={pathDelim:"."})=>{const r=Object.create(Mr);return r._op=Ly,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Invalid data at ${_(this.path,Er(n.pathDelim))}: "${this.message}")`}}),r},xn=(e,t,n={pathDelim:"."})=>{const r=Object.create(Mr);return r._op=Dy,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Missing data at ${_(this.path,Er(n.pathDelim))}: "${this.message}")`}}),r},ax=(e,t,n,r={pathDelim:"."})=>{const s=Object.create(Mr);return s._op=Ky,s.path=e,s.message=t,s.cause=n,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Source unavailable at ${_(this.path,Er(r.pathDelim))}: "${this.message}")`}}),s},ux=(e,t,n={pathDelim:"."})=>{const r=Object.create(Mr);return r._op=Uy,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${_(this.path,Er(n.pathDelim))}: "${this.message}")`}}),r},dn=h(2,(e,t)=>{switch(e._op){case Fy:return By(dn(e.left,t),dn(e.right,t));case jy:return qy(dn(e.left,t),dn(e.right,t));case Ly:return cx([...t,...e.path],e.message);case Dy:return xn([...t,...e.path],e.message);case Ky:return ax([...t,...e.path],e.message,e.cause);case Uy:return ux([...t,...e.path],e.message)}}),lx={_tag:"Empty"},Sc=h(2,(e,t)=>{let n=Zu(t),r=e;for(;sO(n);){const s=n.head;switch(s._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=$n(s.first,$n(s.second,n.tail));break}case"MapName":{r=qn(r,s.f),n=n.tail;break}case"Nested":{r=Lo(r,s.name),n=n.tail;break}case"Unnested":{if(_(ns(r),Dv(s.name)))r=vn(r),n=n.tail;else return B(xn(r,`Expected ${s.name} to be in path in ConfigProvider#unnested`));break}}}return H(r)}),fx="Constant",dx="Fail",hx="Fallback",px="Described",mx="Lazy",gx="MapOrFail",yx="Nested",_x="Primitive",bx="Sequence",Sx="HashMap",wx="ZipWith";var rd={};const Zo=(e,t)=>[...e,...t],vx="effect/ConfigProvider",sd=Symbol.for(vx),Ex=Cn("effect/ConfigProvider"),kx="effect/ConfigProviderFlat",od=Symbol.for(kx),Ox=e=>({[sd]:sd,pipe(){return N(this,arguments)},...e}),$x=e=>({[od]:od,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),Tx=e=>Ox({load:t=>P(Ze(e,er(),t,!1),n=>Je(ns(n),{onNone:()=>Le(xn(er(),`Expected a single value having structure: ${t}`)),onSome:ee})),flattened:e}),xx=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),r=a=>_(a,Er(t)),s=a=>a.split(t),o=()=>typeof process<"u"&&"env"in process&&typeof rd=="object"?rd:{};return Tx($x({load:(a,l,f=!0)=>{const d=r(a),p=o(),m=d in p?j(p[d]):A();return _(m,Vi(()=>xn(a,`Expected ${d} to exist in the process context`)),P(y=>Rx(y,a,l,n,f)))},enumerateChildren:a=>C(()=>{const l=o(),p=Object.keys(l).map(m=>s(m.toUpperCase())).filter(m=>{for(let y=0;y<a.length;y++){const E=_(a,Om(y)),g=m[y];if(g===void 0||E!==g)return!1}return!0}).flatMap(m=>m.slice(a.length,a.length+1));return Dk(p)}),patch:lx}))},Ix=(e,t,n,r)=>{const s=mf(n.length,a=>a>=r.length?A():j([e(a),a+1])),o=mf(r.length,a=>a>=n.length?A():j([t(a),a+1])),i=Zo(n,s),c=Zo(r,o);return[i,c]},Mx=(e,t)=>{let n=t;if(n._tag==="Nested"){const r=e.slice();for(;n._tag==="Nested";)r.push(n.name),n=n.config;return r}return e},Ze=(e,t,n,r)=>{const s=n;switch(s._tag){case fx:return ee(rt(s.value));case px:return pe(()=>Ze(e,t,s.config,r));case dx:return Le(xn(t,s.message));case hx:return _(pe(()=>Ze(e,t,s.first,r)),wa(o=>s.condition(o)?_(Ze(e,t,s.second,r),wa(i=>Le(qy(o,i)))):Le(o)));case mx:return pe(()=>Ze(e,t,s.config(),r));case gx:return pe(()=>_(Ze(e,t,s.original,r),P(Ht(o=>_(s.mapOrFail(o),Vi(dn(Mx(t,s.original))))))));case yx:return pe(()=>Ze(e,Zo(t,rt(s.name)),s.config,r));case _x:return _(Sc(t,e.patch),P(o=>_(e.load(o,s,r),P(i=>{if(i.length===0){const c=_(Qv(o),ke(()=>"<n/a>"));return Le(xn([],`Expected ${s.description} with name ${c}`))}return ee(i)}))));case bx:return _(Sc(t,e.patch),P(o=>_(e.enumerateChildren(o),P(Px),P(i=>i.length===0?pe(()=>Ke(Ze(e,t,s.config,!0),rt)):_(Ht(i,c=>Ze(e,Hv(t,`[${c}]`),s.config,!0)),Ke(c=>{const a=u0(c);return a.length===0?rt(er()):rt(a)}))))));case Sx:return pe(()=>_(Sc(t,e.patch),P(o=>_(e.enumerateChildren(o),P(i=>_(i,Ht(c=>Ze(e,Zo(o,rt(c)),s.valueConfig,r)),Ke(c=>c.length===0?rt(Yu()):_(Cx(c),qn(a=>Gk(pf(ae(i),a)))))))))));case wx:return pe(()=>_(Ze(e,t,s.left,r),Yo,P(o=>_(Ze(e,t,s.right,r),Yo,P(i=>{if(Te(o)&&Te(i))return Le(By(o.left,i.left));if(Te(o)&&vt(i))return Le(o.left);if(vt(o)&&Te(i))return Le(i.left);if(vt(o)&&vt(i)){const c=_(t,Er(".")),a=Ax(t,c),[l,f]=Ix(a,a,_(o.right,qn(H)),_(i.right,qn(H)));return _(l,pf(f),Ht(([d,p])=>_(Oy(d,p),Ke(([m,y])=>s.zip(m,y)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},Ax=(e,t)=>n=>B(xn(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),Nx=(e,t)=>e.split(new RegExp(`\\s*${Ko(t)}\\s*`)),Rx=(e,t,n,r,s)=>s?_(Nx(e,r),Ht(o=>n.parse(o.trim())),Vi(dn(t))):_(n.parse(e),vy({onFailure:dn(t),onSuccess:rt})),Cx=e=>Object.keys(e[0]).map(t=>e.map(n=>n[t])),Px=e=>_(Ht(e,jx),vy({onFailure:()=>er(),onSuccess:as(tr)}),Yo,Ke(Av)),Fx=/^(\[(\d+)\])$/,jx=e=>{const t=e.match(Fx);if(t!==null){const n=t[2];return _(n!==void 0&&n.length>0?j(n):A(),Ei(Lx))}return A()},Lx=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?A():j(t)},id=Symbol.for("effect/Console"),Jy=Cn("effect/Console"),Dx={[id]:id,assert(e,...t){return C(()=>{console.assert(e,...t)})},clear:C(()=>{console.clear()}),count(e){return C(()=>{console.count(e)})},countReset(e){return C(()=>{console.countReset(e)})},debug(...e){return C(()=>{console.debug(...e)})},dir(e,t){return C(()=>{console.dir(e,t)})},dirxml(...e){return C(()=>{console.dirxml(...e)})},error(...e){return C(()=>{console.error(...e)})},group(e){return e!=null&&e.collapsed?C(()=>console.groupCollapsed(e==null?void 0:e.label)):C(()=>console.group(e==null?void 0:e.label))},groupEnd:C(()=>{console.groupEnd()}),info(...e){return C(()=>{console.info(...e)})},log(...e){return C(()=>{console.log(...e)})},table(e,t){return C(()=>{console.table(e,t)})},time(e){return C(()=>console.time(e))},timeEnd(e){return C(()=>console.timeEnd(e))},timeLog(e,...t){return C(()=>{console.timeLog(e,...t)})},trace(...e){return C(()=>{console.trace(...e)})},warn(...e){return C(()=>{console.warn(...e)})},unsafe:console},Kx="effect/Random",cd=Symbol.for(Kx),Ux=Cn("effect/Random");var nh;nh=cd;class Bx{constructor(t){u(this,"seed");u(this,nh,cd);u(this,"PRNG");this.seed=t,this.PRNG=new rv(t)}get next(){return C(()=>this.PRNG.number())}get nextBoolean(){return Ke(this.next,t=>t>.5)}get nextInt(){return C(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,n){return Ke(this.next,r=>(n-t)*r+t)}nextIntBetween(t,n){return C(()=>this.PRNG.integer(n-t)+t)}shuffle(t){return qx(t,n=>this.nextIntBetween(0,n))}}const qx=(e,t)=>pe(()=>_(C(()=>Array.from(e)),P(n=>{const r=[];for(let s=n.length;s>=2;s=s-1)r.push(s);return _(r,Ji(s=>_(t(s),Ke(o=>Jx(n,s-1,o)))),Bs(gg(n)))}))),Jx=(e,t,n)=>{const r=e[t];return e[t]=e[n],e[n]=r,e},Vx=e=>new Bx(I(e)),ad=Symbol.for("effect/Tracer"),Hx=e=>({[ad]:ad,...e}),Vy=Cn("effect/Tracer"),Hy=Cn("effect/ParentSpan"),ud=function(){const e="abcdef0123456789",t=e.length;return function(n){let r="";for(let s=0;s<n;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}}();class Wx{constructor(t,n,r,s,o,i){u(this,"name");u(this,"parent");u(this,"context");u(this,"startTime");u(this,"kind");u(this,"_tag","Span");u(this,"spanId");u(this,"traceId","native");u(this,"sampled",!0);u(this,"status");u(this,"attributes");u(this,"events",[]);u(this,"links");this.name=t,this.parent=n,this.context=r,this.startTime=o,this.kind=i,this.status={_tag:"Started",startTime:o},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:ud(32),this.spanId=ud(16),this.links=Array.from(s)}end(t,n){this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime}}attribute(t,n){this.attributes.set(t,n)}event(t,n,r){this.events.push([t,n,r??{}])}addLinks(t){this.links.push(...t)}}const zx=Hx({span:(e,t,n,r,s,o)=>new Wx(e,t,n,r,s,o),context:e=>e()}),Gx=_(Du(),jr(hl,ox()),jr(Jy,Dx),jr(Ux,Vx(Math.random())),jr(Ex,xx()),jr(Vy,zx)),Qo=J(Symbol.for("effect/DefaultServices/currentServices"),()=>My(Gx));function Yx(e){return new Qt(e)}function Zx(){return Yx(new Map)}const ld=Symbol.for("effect/FiberRefs");var rh;rh=ld;class Qt{constructor(t){u(this,"locals");u(this,rh,ld);this.locals=t}pipe(){return N(this,arguments)}}const Qx=(e,t,n,r=!1)=>{const s=e;let o=t,i=n,c=r,a;for(;a===void 0;)if(oe(o)&&oe(i)){const l=Pe(o)[0],f=vn(o),d=Pe(i)[0],p=Pe(i)[1],m=vn(i);l.startTimeMillis<d.startTimeMillis?(i=m,c=!0):l.startTimeMillis>d.startTimeMillis?o=f:l.id<d.id?(i=m,c=!0):l.id>d.id?o=f:a=[p,c]}else a=[s.initial,!0];return a},Xx=h(3,(e,t,n)=>{const r=new Map(e.locals);return n.locals.forEach((s,o)=>{const i=s[0][1];if(!s[0][0][L](t)){if(!r.has(o)){if(U(i,o.initial))return;r.set(o,[[t,o.join(o.initial,i)]]);return}const c=r.get(o),[a,l]=Qx(o,c,s);if(l){const f=o.diff(a,i),d=c[0][1],p=o.join(d,o.patch(f)(d));if(!U(d,p)){let m;const y=c[0][0];y[L](t)?m=[[y,p],...c.slice(1)]:m=[[t,p],...c],r.set(o,m)}}}}),new Qt(r)}),eI=h(2,(e,t)=>{const n=new Map;return Wy(e,n,t),new Qt(n)}),Wy=(e,t,n)=>{e.locals.forEach((r,s)=>{const o=r[0][1],i=s.patch(s.fork)(o);U(o,i)?t.set(s,r):t.set(s,[[n,i],...r])})},zy=h(2,(e,t)=>{const n=new Map(e.locals);return n.delete(t),new Qt(n)}),tI=h(2,(e,t)=>e.locals.has(t)?j(Pe(e.locals.get(t))[1]):A()),Ss=h(2,(e,t)=>_(tI(e,t),ke(()=>t.initial))),ka=h(2,(e,{fiberId:t,fiberRef:n,value:r})=>{if(e.locals.size===0)return new Qt(new Map([[n,[[t,r]]]]));const s=new Map(e.locals);return Oa(s,t,n,r),new Qt(s)}),Oa=(e,t,n,r)=>{const s=e.get(n)??[];let o;if(oe(s)){const[i,c]=Pe(s);if(i[L](t)){if(U(c,r))return;o=[[t,r],...s.slice(1)]}else o=[[t,r],...s]}else o=[[t,r]];e.set(n,o)},nI=h(2,(e,{entries:t,forkAs:n})=>{if(e.locals.size===0)return new Qt(new Map(t));const r=new Map(e.locals);return n!==void 0&&Wy(e,r,n),t.forEach(([s,o])=>{o.length===1?Oa(r,o[0][0],s,o[0][1]):o.forEach(([i,c])=>{Oa(r,i,s,c)})}),new Qt(r)}),rI=Ss,sI=nI,oI=Zx,iI=fT,cI=dT,aI=hT,uI=pT,lI=xy,fI=Iy,dI=mT,hI=gT,pI=_(tr,wm(e=>e.ordinal)),mI=Rv(pI),gI=e=>{switch(e){case"All":return iI;case"Debug":return fI;case"Error":return aI;case"Fatal":return cI;case"Info":return lI;case"Trace":return dI;case"None":return hI;case"Warning":return uI}},Gy=e=>e.replace(/[\s="]/g,"_"),yI=e=>t=>`${Gy(t.label)}=${e-t.startTime}ms`,_I=As,bI=Sv;let SI=class extends bI{};const Yy="Empty",Zy="Add",Qy="Remove",Xy="Update",e_="AndThen",wI={_tag:Yy},vI=(e,t)=>{const n=new Map(e.locals);let r=wI;for(const[s,o]of t.locals.entries()){const i=Pe(o)[1],c=n.get(s);if(c!==void 0){const a=Pe(c)[1];U(a,i)||(r=wc({_tag:Xy,fiberRef:s,patch:s.diff(a,i)})(r))}else r=wc({_tag:Zy,fiberRef:s,value:i})(r);n.delete(s)}for(const[s]of n.entries())r=wc({_tag:Qy,fiberRef:s})(r);return r},wc=h(2,(e,t)=>({_tag:e_,first:e,second:t})),EI=h(3,(e,t,n)=>{let r=n,s=rt(e);for(;oe(s);){const o=Pe(s),i=vn(s);switch(o._tag){case Yy:{s=i;break}case Zy:{r=ka(r,{fiberId:t,fiberRef:o.fiberRef,value:o.value}),s=i;break}case Qy:{r=zy(r,o.fiberRef),s=i;break}case Xy:{const c=Ss(r,o.fiberRef);r=ka(r,{fiberId:t,fiberRef:o.fiberRef,value:o.fiberRef.patch(o.patch)(c)}),s=i;break}case e_:{s=Lo(o.first)(Lo(o.second)(i));break}}}return r}),t_="effect/MetricLabel",$a=Symbol.for(t_);var sh;class kI{constructor(t,n){u(this,"key");u(this,"value");u(this,sh,$a);u(this,"_hash");this.key=t,this.value=n,this._hash=le(t_+this.key+this.value)}[(sh=$a,K)](){return this._hash}[L](t){return $I(t)&&this.key===t.key&&this.value===t.value}pipe(){return N(this,arguments)}}const OI=(e,t)=>new kI(e,t),$I=e=>F(e,$a),TI="Sequential",xI="Parallel",II="ParallelN",n_={_tag:TI},MI={_tag:xI},AI=e=>({_tag:II,parallelism:e}),Ta=n_,xa=MI,Ia=AI,NI=vI,RI=EI,Zi="effect/FiberStatus",In=Symbol.for(Zi),Xo="Done",fd="Running",dd="Suspended",CI=le(`${Zi}-${Xo}`);var oh;class PI{constructor(){u(this,oh,In);u(this,"_tag",Xo)}[(oh=In,K)](){return CI}[L](t){return pl(t)&&t._tag===Xo}}var ih;class FI{constructor(t){u(this,"runtimeFlags");u(this,ih,In);u(this,"_tag",fd);this.runtimeFlags=t}[(ih=In,K)](){return _(I(Zi),V(I(this._tag)),V(I(this.runtimeFlags)),ie(this))}[L](t){return pl(t)&&t._tag===fd&&this.runtimeFlags===t.runtimeFlags}}var ch;class jI{constructor(t,n){u(this,"runtimeFlags");u(this,"blockingOn");u(this,ch,In);u(this,"_tag",dd);this.runtimeFlags=t,this.blockingOn=n}[(ch=In,K)](){return _(I(Zi),V(I(this._tag)),V(I(this.runtimeFlags)),V(I(this.blockingOn)),ie(this))}[L](t){return pl(t)&&t._tag===dd&&this.runtimeFlags===t.runtimeFlags&&U(this.blockingOn,t.blockingOn)}}const LI=new PI,DI=e=>new FI(e),KI=(e,t)=>new jI(e,t),pl=e=>F(e,In),UI=e=>e._tag===Xo,BI=LI,r_=DI,qI=KI,JI=UI,VI=Symbol.for("effect/Micro"),ei=Symbol.for("effect/Micro/MicroExit"),hd=Symbol.for("effect/Micro/MicroCause"),HI={_E:te};var ah;class s_ extends globalThis.Error{constructor(n,r,s){const o=`MicroCause.${n}`;let i,c,a;if(r instanceof globalThis.Error){i=`(${o}) ${r.name}`,c=r.message;const l=c.split(`
`).length;a=r.stack?`(${o}) ${r.stack.split(`
`).slice(0,l+3).join(`
`)}`:`${i}: ${c}`}else i=o,c=Qn(r,0),a=`${i}: ${c}`;s.length>0&&(a+=`
    ${s.join(`
    `)}`);super(c);u(this,"_tag");u(this,"traces");u(this,ah);this._tag=n,this.traces=s,this[hd]=HI,this.name=i,this.stack=a}pipe(){return N(this,arguments)}toString(){return this.stack}[(ah=hd,ne)](){return this.stack}}class WI extends s_{constructor(n,r=[]){super("Die",n,r);u(this,"defect");this.defect=n}}const zI=(e,t=[])=>new WI(e,t);class GI extends s_{constructor(t=[]){super("Interrupt","interrupted",t)}}const YI=(e=[])=>new GI(e),ZI=e=>e._tag==="Interrupt",pd=Symbol.for("effect/Micro/MicroFiber"),QI={_A:te,_E:te};var uh;uh=pd;class XI{constructor(t,n=!0){u(this,"context");u(this,"interruptible");u(this,uh);u(this,"_stack",[]);u(this,"_observers",[]);u(this,"_exit");u(this,"_children");u(this,"currentOpCount",0);u(this,"_interrupted",!1);u(this,"_yielded");this.context=t,this.interruptible=n,this[pd]=QI}getRef(t){return OE(this.context,t)}addObserver(t){return this._exit?(t(this._exit),Uw):(this._observers.push(t),()=>{const n=this._observers.indexOf(t);n>=0&&this._observers.splice(n,1)})}unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(bl))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){const s=this._yielded;this._yielded=void 0,s()}const n=this.runLoop(t);if(n===io)return;const r=md.interruptChildren&&md.interruptChildren(this);if(r!==void 0)return this.evaluate(ni(r,()=>n));this._exit=n;for(let s=0;s<this._observers.length;s++)this._observers[s](n);this._observers.length=0}runLoop(t){let n=!1,r=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(Sl).shouldYield(this)){n=!0;const s=r;r=ni(sM,()=>s)}if(r=r[Ma](this),r===io){const s=this._yielded;return ei in s?(this._yielded=void 0,s):io}}}catch(s){return F(r,Ma)?Aa(s):Aa(`MicroFiber.runLoop: Not a valid effect: ${String(r)}`)}}getCont(t){for(;;){const n=this._stack.pop();if(!n)return;const r=n[ti]&&n[ti](this);if(r)return{[t]:r};if(n[t])return n}}yieldWith(t){return this._yielded=t,io}children(){return this._children??(this._children=new Set)}}const md=J("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),o_=Symbol.for("effect/Micro/identifier"),me=Symbol.for("effect/Micro/args"),Ma=Symbol.for("effect/Micro/evaluate"),gr=Symbol.for("effect/Micro/successCont"),zn=Symbol.for("effect/Micro/failureCont"),ti=Symbol.for("effect/Micro/ensureCont"),io=Symbol.for("effect/Micro/Yield"),eM={_A:te,_E:te,_R:te},tM={..._I,_op:"Micro",[VI]:eM,pipe(){return N(this,arguments)},[Symbol.iterator](){return new Xp(new xs(this))},toJSON(){return{_id:"Micro",op:this[o_],...me in this?{args:this[me]}:void 0}},toString(){return Ee(this)},[ne](){return Ee(this)}};function nM(e){return Aa("Micro.evaluate: Not implemented")}const Qi=e=>({...tM,[o_]:e.op,[Ma]:e.eval??nM,[gr]:e.contA,[zn]:e.contE,[ti]:e.ensure}),ml=e=>{const t=Qi(e);return function(){const n=Object.create(t);return n[me]=e.single===!1?arguments:arguments[0],n}},i_=e=>{const t={...Qi(e),[ei]:ei,_tag:e.op,get[e.prop](){return this[me]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[me]}},[L](n){return cM(n)&&n._tag===e.op&&U(this[me],n[me])},[K](){return ie(this,V(le(e.op))(I(this[me])))}};return function(n){const r=Object.create(t);return r[me]=n,r[gr]=void 0,r[zn]=void 0,r[ti]=void 0,r}},gl=i_({op:"Success",prop:"value",eval(e){const t=e.getCont(gr);return t?t[gr](this[me],e):e.yieldWith(this)}}),c_=i_({op:"Failure",prop:"cause",eval(e){let t=e.getCont(zn);for(;ZI(this[me])&&t&&e.interruptible;)t=e.getCont(zn);return t?t[zn](this[me],e):e.yieldWith(this)}}),rM=ml({op:"Yield",eval(e){let t=!1;return e.getRef(Sl).scheduleTask(()=>{t||e.evaluate(aM)},this[me]??0),e.yieldWith(()=>{t=!0})}}),sM=rM(0),oM=gl(void 0),yl=ml({op:"WithMicroFiber",eval(e){return this[me](e)}}),ni=h(2,(e,t)=>{const n=Object.create(iM);return n[me]=e,n[gr]=t,n}),iM=Qi({op:"OnSuccess",eval(e){return e._stack.push(this),this[me]}}),cM=e=>F(e,ei),a_=gl,_l=c_,bl=_l(YI()),Aa=e=>_l(zI(e)),aM=a_(void 0),uM="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class u_{constructor(){u(this,"tasks",[]);u(this,"running",!1);u(this,"afterScheduled",()=>{this.running=!1,this.runTasks()})}scheduleTask(t,n){this.tasks.push(t),this.running||(this.running=!0,uM(this.afterScheduled))}runTasks(){const t=this.tasks;this.tasks=[];for(let n=0,r=t.length;n<r;n++)t[n]()}shouldYield(t){return t.currentOpCount>=t.getRef(dM)}flush(){for(;this.tasks.length>0;)this.runTasks()}}const lM=h(2,(e,t)=>yl(n=>{const r=n.context;return n.context=t(r),mM(e,()=>(n.context=r,oM))})),fM=h(2,(e,t)=>lM(e,fg(t)));class dM extends dg()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class Sl extends dg()("effect/Micro/currentScheduler",{defaultValue:()=>new u_}){}const hM=h(2,(e,t)=>{const n=Object.create(pM);return n[me]=e,n[gr]=t.onSuccess,n[zn]=t.onFailure,n}),pM=Qi({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[me]}}),mM=h(2,(e,t)=>yM(n=>hM(n(e),{onFailure:r=>ni(t(_l(r)),()=>c_(r)),onSuccess:r=>ni(t(a_(r)),()=>gl(r))}))),l_=ml({op:"SetInterruptible",ensure(e){if(e.interruptible=this[me],e._interrupted&&e.interruptible)return()=>bl}}),gM=e=>yl(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(l_(!1)),t._interrupted?bl:e)),yM=e=>yl(t=>t.interruptible?(t.interruptible=!1,t._stack.push(l_(!0)),e(gM)):e(te)),_M=(e,t)=>{const n=new XI(Sl.context(new u_));return n.evaluate(e),n};class f_{constructor(){u(this,"buckets",[])}scheduleTask(t,n){const r=this.buckets.length;let s,o=0;for(;o<r&&this.buckets[o][0]<=n;o++)s=this.buckets[o];s&&s[0]===n?s[1].push(t):o===r?this.buckets.push([n,[t]]):this.buckets.splice(o,0,[n,[t]])}}class bM{constructor(t){u(this,"maxNextTickBeforeTimer");u(this,"running",!1);u(this,"tasks",new f_);this.maxNextTickBeforeTimer=t}starveInternal(t){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[r,s]of n)for(let o=0;o<s.length;o++)s[o]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(Ay)?t.getFiberRef(Gi):!1}scheduleTask(t,n){this.tasks.scheduleTask(t,n),this.running||(this.running=!0,this.starve())}}const d_=J(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new bM(2048));class h_{constructor(){u(this,"tasks",new f_);u(this,"deferred",!1)}scheduleTask(t,n){this.deferred?d_.scheduleTask(t,n):this.tasks.scheduleTask(t,n)}shouldYield(t){return t.currentOpCount>t.getFiberRef(Ay)?t.getFiberRef(Gi):!1}flush(){for(;this.tasks.buckets.length>0;){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of t)for(let s=0;s<r.length;s++)r[s]()}this.deferred=!0}}const p_=J(Symbol.for("effect/FiberRef/currentScheduler"),()=>We(d_)),m_=J(Symbol.for("effect/FiberRef/currentRequestMap"),()=>We(new Map)),gd=(e,t,n,r)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return cl(xT,s=>s==="unbounded"?n():s>1?r(s):t());default:return e>1?r(e):t()}},wl="InterruptSignal",vl="Stateful",El="Resume",kl="YieldNow",vc=e=>({_tag:wl,cause:e}),ko=e=>({_tag:vl,onFiber:e}),Ln=e=>({_tag:El,effect:e}),SM=()=>({_tag:kl}),wM="effect/FiberScope",ri=Symbol.for(wM);var lh;lh=ri;class vM{constructor(){u(this,lh,ri);u(this,"fiberId",On);u(this,"roots",new Set)}add(t,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}var fh;fh=ri;class EM{constructor(t,n){u(this,"fiberId");u(this,"parent");u(this,fh,ri);this.fiberId=t,this.parent=n}add(t,n){this.parent.tell(ko(r=>{r.addChild(n),n.addObserver(()=>{r.removeChild(n)})}))}}const kM=e=>new EM(e.id(),e),Ol=J(Symbol.for("effect/FiberScope/Global"),()=>new vM),OM="effect/Fiber",g_=Symbol.for(OM),y_={_E:e=>e,_A:e=>e},$M={[g_]:y_,pipe(){return N(this,arguments)}},TM="effect/Fiber",xM=Symbol.for(TM),$l=e=>$y(Sy(e.await),e.inheritAll);({...Ns,...$M});const nn="effect/FiberCurrent",IM="effect/Logger",MM=Symbol.for(IM),AM={_Message:e=>e,_Output:e=>e},Tl=e=>({[MM]:AM,log:e,pipe(){return N(this,arguments)}}),NM=/^[^\s"=]*$/,RM=(e,t)=>({annotations:n,cause:r,date:s,fiberId:o,logLevel:i,message:c,spans:a})=>{const l=y=>y.match(NM)?y:e(y),f=(y,E)=>`${Gy(y)}=${l(E)}`,d=(y,E)=>" "+f(y,E);let p=f("timestamp",s.toISOString());p+=d("level",i.label),p+=d("fiber",Lg(o));const m=qv(c);for(let y=0;y<m.length;y++)p+=d("message",Qn(m[y],t));M$(r)||(p+=d("cause",xr(r,{renderErrorCause:!0})));for(const y of a)p+=" "+yI(s.getTime())(y);for(const[y,E]of n)p+=d(y,Qn(E,t));return p},CM=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,PM=Tl(RM(CM)),FM=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;FM&&process.stdout.isTTY;const __="effect/MetricBoundaries",Na=Symbol.for(__);var dh;class jM{constructor(t){u(this,"values");u(this,dh,Na);u(this,"_hash");this.values=t,this._hash=_(le(__),V(Is(this.values)))}[(dh=Na,K)](){return this._hash}[L](t){return LM(t)&&U(this.values,t.values)}pipe(){return N(this,arguments)}}const LM=e=>F(e,Na),DM=e=>{const t=_(e,Em(Ve(Number.POSITIVE_INFINITY)),f0);return new jM(t)},KM=e=>_(Bv(e.count-1,t=>e.start*Math.pow(e.factor,t)),Ii,DM),UM="effect/MetricKeyType",b_=Symbol.for(UM),S_="effect/MetricKeyType/Counter",Ra=Symbol.for(S_),BM="effect/MetricKeyType/Frequency",qM=Symbol.for(BM),JM="effect/MetricKeyType/Gauge",VM=Symbol.for(JM),w_="effect/MetricKeyType/Histogram",Ca=Symbol.for(w_),HM="effect/MetricKeyType/Summary",WM=Symbol.for(HM),v_={_In:e=>e,_Out:e=>e};var hh,ph;class zM{constructor(t,n){u(this,"incremental");u(this,"bigint");u(this,ph,v_);u(this,hh,Ra);u(this,"_hash");this.incremental=t,this.bigint=n,this._hash=le(S_)}[(ph=b_,hh=Ra,K)](){return this._hash}[L](t){return E_(t)}pipe(){return N(this,arguments)}}var mh,gh;class GM{constructor(t){u(this,"boundaries");u(this,gh,v_);u(this,mh,Ca);u(this,"_hash");this.boundaries=t,this._hash=_(le(w_),V(I(this.boundaries)))}[(gh=b_,mh=Ca,K)](){return this._hash}[L](t){return k_(t)&&U(this.boundaries,t.boundaries)}pipe(){return N(this,arguments)}}const YM=e=>new zM((e==null?void 0:e.incremental)??!1,(e==null?void 0:e.bigint)??!1),ZM=e=>new GM(e),E_=e=>F(e,Ra),QM=e=>F(e,qM),XM=e=>F(e,VM),k_=e=>F(e,Ca),eA=e=>F(e,WM),tA="effect/MetricKey",O_=Symbol.for(tA),nA={_Type:e=>e},rA=Iu(U);var yh;class xl{constructor(t,n,r,s=[]){u(this,"name");u(this,"keyType");u(this,"description");u(this,"tags");u(this,yh,nA);u(this,"_hash");this.name=t,this.keyType=n,this.description=r,this.tags=s,this._hash=_(le(this.name+this.description),V(I(this.keyType)),V(Is(this.tags)))}[(yh=O_,K)](){return this._hash}[L](t){return sA(t)&&this.name===t.name&&U(this.keyType,t.keyType)&&U(this.description,t.description)&&rA(this.tags,t.tags)}pipe(){return N(this,arguments)}}const sA=e=>F(e,O_),oA=(e,t)=>new xl(e,YM(t),vi(t==null?void 0:t.description)),iA=(e,t,n)=>new xl(e,ZM(t),vi(n)),cA=h(2,(e,t)=>t.length===0?e:new xl(e.name,e.keyType,e.description,bo(e.tags,t))),aA="effect/MetricState",Hs=Symbol.for(aA),$_="effect/MetricState/Counter",Pa=Symbol.for($_),T_="effect/MetricState/Frequency",Fa=Symbol.for(T_),x_="effect/MetricState/Gauge",ja=Symbol.for(x_),I_="effect/MetricState/Histogram",La=Symbol.for(I_),M_="effect/MetricState/Summary",Da=Symbol.for(M_),Ws={_A:e=>e};var _h,bh;class uA{constructor(t){u(this,"count");u(this,bh,Ws);u(this,_h,Pa);this.count=t}[(bh=Hs,_h=Pa,K)](){return _(I($_),V(I(this.count)),ie(this))}[L](t){return SA(t)&&this.count===t.count}pipe(){return N(this,arguments)}}const lA=Iu(U);var Sh,wh;class fA{constructor(t){u(this,"occurrences");u(this,wh,Ws);u(this,Sh,Fa);u(this,"_hash");this.occurrences=t}[(wh=Hs,Sh=Fa,K)](){return _(le(T_),V(Is(ae(this.occurrences.entries()))),ie(this))}[L](t){return wA(t)&&lA(ae(this.occurrences.entries()),ae(t.occurrences.entries()))}pipe(){return N(this,arguments)}}var vh,Eh;class dA{constructor(t){u(this,"value");u(this,Eh,Ws);u(this,vh,ja);this.value=t}[(Eh=Hs,vh=ja,K)](){return _(I(x_),V(I(this.value)),ie(this))}[L](t){return vA(t)&&this.value===t.value}pipe(){return N(this,arguments)}}var kh,Oh;class hA{constructor(t,n,r,s,o){u(this,"buckets");u(this,"count");u(this,"min");u(this,"max");u(this,"sum");u(this,Oh,Ws);u(this,kh,La);this.buckets=t,this.count=n,this.min=r,this.max=s,this.sum=o}[(Oh=Hs,kh=La,K)](){return _(I(I_),V(I(this.buckets)),V(I(this.count)),V(I(this.min)),V(I(this.max)),V(I(this.sum)),ie(this))}[L](t){return EA(t)&&U(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return N(this,arguments)}}var $h,Th;class pA{constructor(t,n,r,s,o,i){u(this,"error");u(this,"quantiles");u(this,"count");u(this,"min");u(this,"max");u(this,"sum");u(this,Th,Ws);u(this,$h,Da);this.error=t,this.quantiles=n,this.count=r,this.min=s,this.max=o,this.sum=i}[(Th=Hs,$h=Da,K)](){return _(I(M_),V(I(this.error)),V(I(this.quantiles)),V(I(this.count)),V(I(this.min)),V(I(this.max)),V(I(this.sum)),ie(this))}[L](t){return kA(t)&&this.error===t.error&&U(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return N(this,arguments)}}const mA=e=>new uA(e),gA=e=>new fA(e),yA=e=>new dA(e),_A=e=>new hA(e.buckets,e.count,e.min,e.max,e.sum),bA=e=>new pA(e.error,e.quantiles,e.count,e.min,e.max,e.sum),SA=e=>F(e,Pa),wA=e=>F(e,Fa),vA=e=>F(e,ja),EA=e=>F(e,La),kA=e=>F(e,Da),OA="effect/MetricHook",$A=Symbol.for(OA),TA={_In:e=>e,_Out:e=>e},zs=e=>({[$A]:TA,pipe(){return N(this,arguments)},...e}),yd=BigInt(0),xA=e=>{let t=e.keyType.bigint?yd:0;const n=e.keyType.incremental?e.keyType.bigint?s=>s>=yd:s=>s>=0:s=>!0,r=s=>{n(s)&&(t=t+s)};return zs({get:()=>mA(t),update:r,modify:r})},IA=e=>{const t=new Map;for(const r of e.keyType.preregisteredWords)t.set(r,0);const n=r=>{const s=t.get(r)??0;t.set(r,s+1)};return zs({get:()=>gA(t),update:n,modify:n})},MA=(e,t)=>{let n=t;return zs({get:()=>yA(n),update:r=>{n=r},modify:r=>{n=n+r}})},AA=e=>{const t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),s=new Float32Array(n);let o=0,i=0,c=Number.MAX_VALUE,a=Number.MIN_VALUE;_(t,as(tr),qn((d,p)=>{s[p]=d}));const l=d=>{let p=0,m=n;for(;p!==m;){const y=Math.floor(p+(m-p)/2),E=s[y];d<=E?m=y:p=y,m===p+1&&(d<=s[p]?m=p:p=m)}r[p]=r[p]+1,o=o+1,i=i+d,d<c&&(c=d),d>a&&(a=d)},f=()=>{const d=ki(n);let p=0;for(let m=0;m<n;m++){const y=s[m],E=r[m];p=p+E,d[m]=[y,p]}return d};return zs({get:()=>_A({buckets:f(),count:o,min:c,max:a,sum:i}),update:l,modify:l})},NA=e=>{const{error:t,maxAge:n,maxSize:r,quantiles:s}=e.keyType,o=_(s,as(tr)),i=ki(r);let c=0,a=0,l=0,f=0,d=0;const p=y=>{const E=[];let g=0;for(;g!==r-1;){const b=i[g];if(b!=null){const[S,w]=b,O=fs(y-S);nk(O,Sg)&&tk(O,n)&&E.push(w)}g=g+1}return RA(t,o,as(E,tr))},m=(y,E)=>{if(r>0){c=c+1;const g=c%r;i[g]=[E,y]}f=a===0?y:Math.min(f,y),d=a===0?y:Math.max(d,y),a=a+1,l=l+y};return zs({get:()=>bA({error:t,quantiles:p(Date.now()),count:a,min:f,max:d,sum:l}),update:([y,E])=>m(y,E),modify:([y,E])=>m(y,E)})},RA=(e,t,n)=>{const r=n.length;if(!oe(t))return er();const s=t[0],o=t.slice(1),i=_d(e,r,A(),0,s,n),c=rt(i);return o.forEach(a=>{c.push(_d(e,r,i.value,i.consumed,a,i.rest))}),qn(c,a=>[a.quantile,a.value])},_d=(e,t,n,r,s,o)=>{let i=e,c=t,a=n,l=r,f=s,d=o,p=e,m=t,y=n,E=r,g=s,b=o;for(;;){if(!oe(d))return{quantile:f,value:A(),consumed:l,rest:[]};if(f===1)return{quantile:f,value:j($m(d)),consumed:l+d.length,rest:[]};const S=Pe(d),w=e0(d,x=>x===S),O=f*c,v=i/2*O,k=l+w[0].length,$=Math.abs(k-O);if(k<O-v){p=i,m=c,y=ns(d),E=k,g=f,b=w[1],i=p,c=m,a=y,l=E,f=g,d=b;continue}if(k>O+v){const x=ve(a)?j(S):a;return{quantile:f,value:x,consumed:l,rest:d}}switch(a._tag){case"None":{p=i,m=c,y=ns(d),E=k,g=f,b=w[1],i=p,c=m,a=y,l=E,f=g,d=b;continue}case"Some":{const x=Math.abs(O-a.value);if($<x){p=i,m=c,y=ns(d),E=k,g=f,b=w[1],i=p,c=m,a=y,l=E,f=g,d=b;continue}return{quantile:f,value:j(a.value),consumed:l,rest:d}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},CA="effect/MetricPair",PA=Symbol.for(CA),FA={_Type:e=>e},jA=(e,t)=>({[PA]:FA,metricKey:e,metricState:t,pipe(){return N(this,arguments)}}),LA="effect/MetricRegistry",bd=Symbol.for(LA);var xh;xh=bd;class DA{constructor(){u(this,xh,bd);u(this,"map",QT())}snapshot(){const t=[];for(const[n,r]of this.map)t.push(jA(n,r.get()));return t}get(t){const n=_(this.map,on(t),St);if(n==null){if(E_(t.keyType))return this.getCounter(t);if(XM(t.keyType))return this.getGauge(t);if(QM(t.keyType))return this.getFrequency(t);if(k_(t.keyType))return this.getHistogram(t);if(eA(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(t){let n=_(this.map,on(t),St);if(n==null){const r=xA(t);_(this.map,Lr(t))||_(this.map,Dr(t,r)),n=r}return n}getFrequency(t){let n=_(this.map,on(t),St);if(n==null){const r=IA(t);_(this.map,Lr(t))||_(this.map,Dr(t,r)),n=r}return n}getGauge(t){let n=_(this.map,on(t),St);if(n==null){const r=MA(t,t.keyType.bigint?BigInt(0):0);_(this.map,Lr(t))||_(this.map,Dr(t,r)),n=r}return n}getHistogram(t){let n=_(this.map,on(t),St);if(n==null){const r=AA(t);_(this.map,Lr(t))||_(this.map,Dr(t,r)),n=r}return n}getSummary(t){let n=_(this.map,on(t),St);if(n==null){const r=NA(t);_(this.map,Lr(t))||_(this.map,Dr(t,r)),n=r}return n}}const KA=()=>new DA,UA="effect/Metric",BA=Symbol.for(UA),qA={_Type:e=>e,_In:e=>e,_Out:e=>e},Sd=J(Symbol.for("effect/Metric/globalMetricRegistry"),()=>KA()),A_=function(e,t,n,r){const s=Object.assign(o=>cT(o,i=>WA(s,i)),{[BA]:qA,keyType:e,unsafeUpdate:t,unsafeValue:n,unsafeModify:r,register(){return this.unsafeValue([]),this},pipe(){return N(this,arguments)}});return s},Xi=(e,t)=>N_(oA(e,t)),N_=e=>{let t;const n=new WeakMap,r=s=>{if(s.length===0)return t!==void 0||(t=Sd.get(e)),t;let o=n.get(s);return o!==void 0||(o=Sd.get(cA(e,s)),n.set(s,o)),o};return A_(e.keyType,(s,o)=>r(o).update(s),s=>r(s).get(),(s,o)=>r(o).modify(s))},JA=(e,t,n)=>N_(iA(e,t,n)),VA=h(3,(e,t,n)=>HA(e,[OI(t,n)])),HA=h(2,(e,t)=>A_(e.keyType,(n,r)=>e.unsafeUpdate(n,bo(t,r)),n=>e.unsafeValue(bo(t,n)),(n,r)=>e.unsafeModify(n,bo(t,r)))),WA=h(2,(e,t)=>cl(va,n=>C(()=>e.unsafeUpdate(t,n)))),zA="effect/Request",GA=Symbol.for(zA),YA={_E:e=>e,_A:e=>e};({...$u,[GA]:0});const ZA=h(2,(e,t)=>cl(m_,n=>C(()=>{if(n.has(e)){const r=n.get(e);r.state.completed||(r.state.completed=!0,Py(r.result,t))}}))),QA="effect/Supervisor",ec=Symbol.for(QA),Il={_T:e=>e};var Ih;Ih=ec;const Bl=class Bl{constructor(t,n){u(this,"underlying");u(this,"value0");u(this,Ih,Il);this.underlying=t,this.value0=n}get value(){return this.value0}onStart(t,n,r,s){this.underlying.onStart(t,n,r,s)}onEnd(t,n){this.underlying.onEnd(t,n)}onEffect(t,n){this.underlying.onEffect(t,n)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new Bl(this,_(this.value,Ke(t)))}zip(t){return new oi(this,t)}};let si=Bl;var Mh;Mh=ec;const ql=class ql{constructor(t,n){u(this,"left");u(this,"right");u(this,"_tag","Zip");u(this,Mh,Il);this.left=t,this.right=n}get value(){return Oy(this.left.value,this.right.value)}onStart(t,n,r,s){this.left.onStart(t,n,r,s),this.right.onStart(t,n,r,s)}onEnd(t,n){this.left.onEnd(t,n),this.right.onEnd(t,n)}onEffect(t,n){this.left.onEffect(t,n),this.right.onEffect(t,n)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new si(this,_(this.value,Ke(t)))}zip(t){return new ql(this,t)}};let oi=ql;const R_=e=>F(e,ec)&&Zp(e,"Zip");var Ah;Ah=ec;class XA{constructor(t){u(this,"effect");u(this,Ah,Il);this.effect=t}get value(){return this.effect}onStart(t,n,r,s){}onEnd(t,n){}onEffect(t,n){}onSuspend(t){}onResume(t){}map(t){return new si(this,_(this.value,Ke(t)))}zip(t){return new oi(this,t)}onRun(t,n){return t()}}const eN=e=>new XA(e),tc=J("effect/Supervisor/none",()=>eN(pt)),tN=kr,C_="Empty",P_="AddSupervisor",F_="RemoveSupervisor",j_="AndThen",os={_tag:C_},Oo=(e,t)=>({_tag:j_,first:e,second:t}),nN=(e,t)=>rN(t,Ve(e)),rN=(e,t)=>{let n=e,r=t;for(;or(r);){const s=ir(r);switch(s._tag){case C_:{r=ln(r);break}case P_:{n=n.zip(s.supervisor),r=ln(r);break}case F_:{n=Ka(n,s.supervisor),r=ln(r);break}case j_:{r=dt(s.first)(dt(s.second)(ln(r)));break}}}return n},Ka=(e,t)=>U(e,t)?tc:R_(e)?Ka(e.left,t).zip(Ka(e.right,t)):e,ii=e=>U(e,tc)?kn():R_(e)?_(ii(e.left),ps(ii(e.right))):zu(e),sN=(e,t)=>{if(U(e,t))return os;const n=ii(e),r=ii(t),s=_(r,Af(n),Jo(os,(i,c)=>Oo(i,{_tag:P_,supervisor:c}))),o=_(n,Af(r),Jo(os,(i,c)=>Oo(i,{_tag:F_,supervisor:c})));return Oo(s,o)},oN=tN({empty:os,patch:nN,combine:Oo,diff:sN}),iN=Xi("effect_fiber_started",{incremental:!0}),wd=Xi("effect_fiber_active"),cN=Xi("effect_fiber_successes",{incremental:!0}),aN=Xi("effect_fiber_failures",{incremental:!0}),uN=VA(JA("effect_fiber_lifetimes",KM({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Kr="Continue",lN="Done",vd="Yield",fN={_E:e=>e,_A:e=>e},co=e=>{throw new Error(`BUG: FiberRuntime - ${Qn(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Tt=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),xt=J("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Ur={[Po]:(e,t,n)=>Re(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>fe(fe(n)),[Fo]:(e,t,n)=>Re(()=>t.effect_instruction_i2(n)),[Ou]:(e,t,n)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),Jt(e.currentRuntimeFlags)&&e.isInterrupted()?Q(e.getInterruptedCause()):fe(n)),[jo]:(e,t,n)=>(Re(()=>t.effect_instruction_i2(n)),Re(()=>t.effect_instruction_i0())?(e.pushStack(t),Re(()=>t.effect_instruction_i1())):pt),[go]:(e,t,n)=>{const r=Re(()=>t.effect_instruction_i0.next(n));return r.done?fe(r.value):(e.pushStack(t),ov(r.value))}},dN={[wl]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),Jt(t)?Q(r.cause):n),[El]:(e,t,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[vl]:(e,t,n,r)=>(r.onFiber(e,r_(t)),n),[kl]:(e,t,n,r)=>P(ol(),()=>n)},hN=e=>Ji(h$(e),t=>Sn(T$(t),([n,r])=>{const s=new Map,o=[];for(const c of r){o.push(_n(c));for(const a of c)s.set(a.request,a)}const i=o.flat();return zi(TN(n.runAll(o),i,()=>i.forEach(c=>{c.listeners.interrupted=!0})),m_,s)},!1,!1)),pN=gi();var Nh,Rh;class L_ extends SI{constructor(n,r,s){super();u(this,Rh,y_);u(this,Nh,fN);u(this,"_fiberRefs");u(this,"_fiberId");u(this,"_queue",new Array);u(this,"_children",null);u(this,"_observers",new Array);u(this,"_running",!1);u(this,"_stack",[]);u(this,"_asyncInterruptor",null);u(this,"_asyncBlockingOn",null);u(this,"_exitValue",null);u(this,"_steps",[]);u(this,"_isYielding",!1);u(this,"currentRuntimeFlags");u(this,"currentOpCount",0);u(this,"currentSupervisor");u(this,"currentScheduler");u(this,"currentTracer");u(this,"currentSpan");u(this,"currentContext");u(this,"currentDefaultServices");u(this,"run",()=>{this.drainQueueOnCurrentThread()});if(this.currentRuntimeFlags=s,this._fiberId=n,this._fiberRefs=r,Ff(s)){const o=this.getFiberRef(va);iN.unsafeUpdate(1,o),wd.unsafeUpdate(1,o)}this.refreshRefCache()}commit(){return $l(this)}id(){return this._fiberId}resume(n){this.tell(Ln(n))}get status(){return this.ask((n,r)=>r)}get runtimeFlags(){return this.ask((n,r)=>JI(r)?n.currentRuntimeFlags:r.runtimeFlags)}scope(){return kM(this)}get children(){return this.ask(n=>Array.from(n.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(oo)}fiberRefs(){return this.ask(n=>n.getFiberRefs())}ask(n){return pe(()=>{const r=qT(this._fiberId);return this.tell(ko((s,o)=>{Py(r,C(()=>n(s,o)))})),Cy(r)})}tell(n){this._queue.push(n),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return bs(n=>{const r=s=>n(ee(s));return this.tell(ko((s,o)=>{s._exitValue!==null?r(this._exitValue):s.addObserver(r)})),C(()=>this.tell(ko((s,o)=>{s.removeObserver(r)})))},this.id())}get inheritAll(){return He((n,r)=>{const s=n.id(),o=n.getFiberRefs(),i=r.runtimeFlags,c=this.getFiberRefs(),a=Xx(o,s,c);n.setFiberRefs(a);const l=n.getFiberRef(Td),f=_(vo(i,l),Lf(Or),Lf(ba));return uT(f)})}get poll(){return C(()=>vi(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(n){return C(()=>this.tell(vc(Vt(n))))}unsafeInterruptAsFork(n){this.tell(vc(Vt(n)))}addObserver(n){this._exitValue!==null?n(this._exitValue):this._observers.push(n)}removeObserver(n){this._observers=this._observers.filter(r=>r!==n)}getFiberRefs(){return this.setFiberRef(Td,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(n){this._fiberRefs=zy(this._fiberRefs,n)}getFiberRef(n){return this._fiberRefs.locals.has(n)?this._fiberRefs.locals.get(n)[0][1]:n.initial}setFiberRef(n,r){this._fiberRefs=ka(this._fiberRefs,{fiberId:this._fiberId,fiberRef:n,value:r}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(Qo),this.currentTracer=this.currentDefaultServices.unsafeMap.get(Vy.key),this.currentSupervisor=this.getFiberRef($N),this.currentScheduler=this.getFiberRef(p_),this.currentContext=this.getFiberRef(Js),this.currentSpan=this.currentContext.unsafeMap.get(Hy.key)}setFiberRefs(n){this._fiberRefs=n,this.refreshRefCache()}addChild(n){this.getChildren().add(n)}removeChild(n){this.getChildren().delete(n)}transferChildren(n){const r=this._children;if(this._children=null,r!==null&&r.size>0)for(const s of r)s._exitValue===null&&n.add(this.currentRuntimeFlags,s)}drainQueueOnCurrentThread(){let n=!0;for(;n;){let r=Kr;const s=globalThis[nn];globalThis[nn]=this;try{for(;r===Kr;)r=this._queue.length===0?lN:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[nn]=s}this._queue.length>0&&!this._running?(this._running=!0,r===vd?(this.drainQueueLaterOnExecutor(),n=!1):n=!0):n=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(Gi))}drainQueueWhileRunning(n,r){let s=r;for(;this._queue.length>0;){const o=this._queue.splice(0,1)[0];s=dN[o._tag](this,n,s,o)}return s}isInterrupted(){return!N$(this.getFiberRef(oo))}addInterruptedCause(n){const r=this.getFiberRef(oo);this.setFiberRef(oo,et(r,n))}processNewInterruptSignal(n){this.addInterruptedCause(n),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let n=!1;for(const r of this._children)r.tell(vc(Vt(this.id()))),n=!0;return n}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const n=this._children.values();this._children=null;let r=!1;return sl({while:()=>!r,body:()=>{const o=n.next();return o.done?C(()=>{r=!0}):qs(o.value.await)},step:()=>{}})}return null}reportExitValue(n){if(Ff(this.currentRuntimeFlags)){const r=this.getFiberRef(va),s=this.id().startTimeMillis,o=Date.now();switch(uN.unsafeUpdate(o-s,r),wd.unsafeUpdate(-1,r),n._tag){case ut:{cN.unsafeUpdate(1,r);break}case at:{aN.unsafeUpdate(1,r);break}}}if(n._tag==="Failure"){const r=this.getFiberRef(MT);!Xu(n.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",n.cause,r)}}setExitValue(n){this._exitValue=n,this.reportExitValue(n);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](n);this._observers=[]}getLoggers(){return this.getFiberRef(bN)}log(n,r,s){const o=xe(s)?s.value:this.getFiberRef(OT),i=this.getFiberRef(mN);if(mI(i,o))return;const c=this.getFiberRef($T),a=this.getFiberRef(kT),l=this.getLoggers(),f=this.getFiberRefs();if(Rg(l)>0){const d=ug(this.getFiberRef(Qo),hl),p=new Date(d.unsafeCurrentTimeMillis());lv(f,()=>{for(const m of l)m.log({fiberId:this.id(),logLevel:o,message:n,cause:r,context:f,spans:c,annotations:a,date:p})})}}evaluateMessageWhileSuspended(n){switch(n._tag){case kl:return vd;case wl:return this.processNewInterruptSignal(n.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(Q(n.cause)),this._asyncInterruptor=null),Kr;case El:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(n.effect),Kr;case vl:return n.onFiber(this,this._exitValue!==null?BI:qI(this.currentRuntimeFlags,this._asyncBlockingOn)),Kr;default:return co(n)}}evaluateEffect(n){this.currentSupervisor.onResume(this);try{let r=Jt(this.currentRuntimeFlags)&&this.isInterrupted()?Q(this.getInterruptedCause()):n;for(;r!==null;){const s=r,o=this.runLoop(s);if(o===Tt){const i=xt.currentOp;xt.currentOp=null,i._op===yo?a$(this.currentRuntimeFlags)?(this.tell(SM()),this.tell(Ln(fn)),r=null):r=fn:i._op===ts&&(r=null)}else{this.currentRuntimeFlags=_(this.currentRuntimeFlags,u$(ba));const i=this.interruptAllChildren();i!==null?r=P(i,()=>o):(this._queue.length===0?this.setExitValue(o):this.tell(Ln(o)),r=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(n){if(this._running)this.tell(Ln(n));else{this._running=!0;const r=globalThis[nn];globalThis[nn]=this;try{this.evaluateEffect(n)}finally{this._running=!1,globalThis[nn]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(n){this.tell(Ln(n))}patchRuntimeFlags(n,r){const s=Eo(n,r);return globalThis[nn]=this,this.currentRuntimeFlags=s,s}initiateAsync(n,r){let s=!1;const o=i=>{s||(s=!0,this.tell(Ln(i)))};Jt(n)&&(this._asyncInterruptor=o);try{r(o)}catch(i){o(ht(Et(i)))}}pushStack(n){this._stack.push(n),n._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const n=this._stack.pop();if(n)return n._op==="OnStep"&&this._steps.pop(),n}getNextSuccessCont(){let n=this.popStack();for(;n;){if(n._op!==uc)return n;n=this.popStack()}}getNextFailCont(){let n=this.popStack();for(;n;){if(n._op!==Po&&n._op!==jo&&n._op!==go)return n;n=this.popStack()}}[(Rh=g_,Nh=xM,dv)](n){return C(()=>lg(this.currentContext,n))}Left(n){return Le(n.left)}None(n){return Le(new Ny)}Right(n){return fe(n.right)}Some(n){return fe(n.value)}Micro(n){return Go(r=>{let s=r;const o=_M(fM(n,this.currentContext));return o.addObserver(i=>{if(i._tag==="Success")return s(fe(i.value));switch(i.cause._tag){case"Interrupt":return s(Q(Vt(On)));case"Fail":return s(Le(i.cause.error));case"Die":return s(qf(i.cause.defect))}}),Go(i=>{s=c=>{i(pt)},o.unsafeInterrupt()})})}[om](n){const r=Re(()=>n.effect_instruction_i0()),s=this.getNextSuccessCont();return s!==void 0?(s._op in Ur||co(s),Ur[s._op](this,s,r)):(xt.currentOp=fe(r),Tt)}[ut](n){const r=n,s=this.getNextSuccessCont();return s!==void 0?(s._op in Ur||co(s),Ur[s._op](this,s,r.effect_instruction_i0)):(xt.currentOp=r,Tt)}[at](n){const r=n.effect_instruction_i0,s=this.getNextFailCont();if(s!==void 0)switch(s._op){case uc:case Fo:return Jt(this.currentRuntimeFlags)&&this.isInterrupted()?Q(Df(r)):Re(()=>s.effect_instruction_i1(r));case"OnStep":return Jt(this.currentRuntimeFlags)&&this.isInterrupted()?Q(Df(r)):fe(Q(r));case Ou:return this.patchRuntimeFlags(this.currentRuntimeFlags,s.patch),Jt(this.currentRuntimeFlags)&&this.isInterrupted()?Q(et(r,this.getInterruptedCause())):Q(r);default:co(s)}else return xt.currentOp=Q(r),Tt}[im](n){return Re(()=>n.effect_instruction_i0(this,r_(this.currentRuntimeFlags)))}Blocked(n){const r=this.getFiberRefs(),s=this.currentRuntimeFlags;if(this._steps.length>0){const o=[],i=this._steps[this._steps.length-1];let c=this.popStack();for(;c&&c._op!=="OnStep";)o.push(c),c=this.popStack();this.setFiberRefs(i.refs),this.currentRuntimeFlags=i.flags;const a=NI(i.refs,r),l=vo(i.flags,s);return fe(dy(n.effect_instruction_i0,He(f=>{for(;o.length>0;)f.pushStack(o.pop());return f.setFiberRefs(RI(f.id(),f.getFiberRefs())(a)),f.currentRuntimeFlags=Eo(l)(f.currentRuntimeFlags),n.effect_instruction_i1})))}return Hi(o=>P(D_(eT(n.effect_instruction_i0)),()=>o(n.effect_instruction_i1)))}RunBlocked(n){return hN(n.effect_instruction_i0)}[Ms](n){const r=n.effect_instruction_i0,s=this.currentRuntimeFlags,o=Eo(s,r);if(Jt(o)&&this.isInterrupted())return Q(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,r),n.effect_instruction_i1){const i=vo(o,s);return this.pushStack(new tT(i,n)),Re(()=>n.effect_instruction_i1(s))}else return fn}[Po](n){return this.pushStack(n),n.effect_instruction_i0}OnStep(n){return this.pushStack(n),n.effect_instruction_i0}[uc](n){return this.pushStack(n),n.effect_instruction_i0}[Fo](n){return this.pushStack(n),n.effect_instruction_i0}[ts](n){return this._asyncBlockingOn=n.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,n.effect_instruction_i0),xt.currentOp=n,Tt}[yo](n){return this._isYielding=!1,xt.currentOp=n,Tt}[jo](n){const r=n.effect_instruction_i0,s=n.effect_instruction_i1;return r()?(this.pushStack(n),s()):fn}[go](n){return Ur[go](this,n,void 0)}[wi](n){return Re(()=>n.commit())}runLoop(n){let r=n;for(this.currentOpCount=0;;){if(this.currentRuntimeFlags&c$&&this.currentSupervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this.currentRuntimeFlags,r)),!this._isYielding){this.currentOpCount+=1;const s=this.currentScheduler.shouldYield(this);if(s!==!1){this._isYielding=!0,this.currentOpCount=0;const o=r;r=P(ol({priority:s}),()=>o)}}try{if(r=this.currentTracer.context(()=>pN!==r[pr]._V?Jf(`Cannot execute an Effect versioned ${r[pr]._V} with a Runtime of version ${gi()}`):this[r._op](r),this),r===Tt){const s=xt.currentOp;return s._op===yo||s._op===ts?Tt:(xt.currentOp=null,s._op===ut||s._op===at?s:Q(Et(s)))}}catch(s){r!==Tt&&!F(r,"_op")||!(r._op in this)?r=Jf(`Not a valid effect: ${Qn(r)}`):PT(s)?r=Q(et(Et(s),Vt(On))):r=qf(s)}}}}const mN=J("effect/FiberRef/currentMinimumLogLevel",()=>We(gI("Info"))),gN=e=>Tl(t=>{const n=rI(t.context,Qo);ug(n,Jy).unsafe.log(e.log(t))}),yN=J(Symbol.for("effect/Logger/defaultLogger"),()=>gN(PM)),_N=J(Symbol.for("effect/Logger/tracerLogger"),()=>Tl(({annotations:e,cause:t,context:n,fiberId:r,logLevel:s,message:o})=>{const i=Fs(Ss(n,Js),Hy);if(i._tag==="None"||i.value._tag==="ExternalSpan")return;const c=lg(Ss(n,Qo),hl),a={};for(const[l,f]of e)a[l]=f;a["effect.fiberId"]=zk(r),a["effect.logLevel"]=s.label,t!==null&&t._tag!=="Empty"&&(a["effect.cause"]=xr(t,{renderErrorCause:!0})),i.value.event(Qn(Array.isArray(o)?o[0]:o),c.unsafeCurrentTimeNanos(),a)})),bN=J(Symbol.for("effect/FiberRef/currentLoggers"),()=>wT(zu(yN,_N))),SN=h(e=>Qp(e[0]),(e,t,n)=>He(r=>{const s=(n==null?void 0:n.batching)===!0||(n==null?void 0:n.batching)==="inherit"&&r.getFiberRef(IT);return n!=null&&n.discard?gd(n.concurrency,()=>Dn(Ta,n==null?void 0:n.concurrentFinalizers)(o=>s?Sn(e,(i,c)=>o(t(i,c)),!0,!1,1):Ji(e,(i,c)=>o(t(i,c)))),()=>Dn(xa,n==null?void 0:n.concurrentFinalizers)(o=>Sn(e,(i,c)=>o(t(i,c)),s,!1)),o=>Dn(Ia(o),n==null?void 0:n.concurrentFinalizers)(i=>Sn(e,(c,a)=>i(t(c,a)),s,!1,o))):gd(n==null?void 0:n.concurrency,()=>Dn(Ta,n==null?void 0:n.concurrentFinalizers)(o=>s?Ed(e,1,(i,c)=>o(t(i,c)),!0):Ht(e,(i,c)=>o(t(i,c)))),()=>Dn(xa,n==null?void 0:n.concurrentFinalizers)(o=>wN(e,(i,c)=>o(t(i,c)),s)),o=>Dn(Ia(o),n==null?void 0:n.concurrentFinalizers)(i=>Ed(e,o,(c,a)=>i(t(c,a)),s)))})),wN=(e,t,n)=>pe(()=>{const r=ae(e),s=new Array(r.length);return Wi(Sn(r,(i,c)=>P(t(i,c),a=>C(()=>s[c]=a)),n,!1),ee(s))}),Sn=(e,t,n,r,s)=>Hi(o=>aT(i=>He(c=>{let a=Array.from(e).reverse(),l=a.length;if(l===0)return pt;let f=0,d=!1;const p=s?Math.min(a.length,s):a.length,m=new Set,y=new Array,E=()=>m.forEach(x=>{x.currentScheduler.scheduleTask(()=>{x.unsafeInterruptAsFork(c.id())},0)}),g=new Array,b=new Array,S=new Array,w=()=>{const x=y.filter(({exit:M})=>M._tag==="Failure").sort((M,q)=>M.index<q.index?-1:M.index===q.index?0:1).map(({exit:M})=>M);return x.length===0&&x.push(fn),x},O=(x,M=!1)=>{const q=ky(i(x)),D=EN(q,c,c.currentRuntimeFlags,Ol);return c.currentScheduler.scheduleTask(()=>{M&&D.unsafeInterruptAsFork(c.id()),D.resume(q)},0),D},v=()=>{r||(l-=a.length,a=[]),d=!0,E()},k=n?oT:yy,$=O(bs(x=>{const M=(D,Z)=>{D._op==="Blocked"?S.push(D):(y.push({index:Z,exit:D}),D._op==="Failure"&&!d&&v())},q=()=>{if(a.length>0){const D=a.pop();let Z=f++;const Me=()=>{const R=a.pop();return Z=f++,P(ol(),()=>P(k(o(t(R,Z))),re))},re=R=>a.length>0&&(M(R,Z),a.length>0)?Me():ee(R),Oe=P(k(o(t(D,Z))),re),Y=O(Oe);g.push(Y),m.add(Y),d&&Y.currentScheduler.scheduleTask(()=>{Y.unsafeInterruptAsFork(c.id())},0),Y.addObserver(R=>{let G;if(R._op==="Failure"?G=R:G=R.effect_instruction_i0,b.push(Y),m.delete(Y),M(G,Z),y.length===l)x(ee(ke(Yf(w(),{parallel:!0}),()=>fn)));else if(S.length+y.length===l){const $t=w(),Nr=S.map(ze=>ze.effect_instruction_i0).reduce(ny);x(ee(dy(Nr,Sn([ke(Yf($t,{parallel:!0}),()=>fn),...S.map(ze=>ze.effect_instruction_i1)],ze=>ze,n,!0,s))))}else q()})}};for(let D=0;D<p;D++)q()}));return qs(rl(Sy(o($l($))),Ry({onFailure:x=>{v();const M=S.length+1,q=Math.min(typeof s=="number"?s:S.length,S.length),D=Array.from(S);return bs(Z=>{let Me=0,re=0;const Oe=(R,G)=>$t=>{Me++,Me===M&&Z(fe(Q(x))),D.length>0&&G&&Y()},Y=()=>{O(D.pop(),!0).addObserver(Oe(re,!0)),re++};$.addObserver(Oe(re,!1)),re++;for(let R=0;R<q;R++)Y()})},onSuccess:()=>Ht(b,x=>x.inheritAll)})))}))),Ed=(e,t,n,r)=>pe(()=>{const s=ae(e),o=new Array(s.length);return Wi(Sn(s,(c,a)=>Ke(n(c,a),l=>o[a]=l),r,!1,t),ee(o))}),D_=e=>kN(e,Ol),vN=(e,t,n,r=null)=>{const s=K_(e,t,n,r);return s.resume(e),s},EN=(e,t,n,r=null)=>K_(e,t,n,r),K_=(e,t,n,r=null)=>{const s=Dg(),o=t.getFiberRefs(),i=eI(o,s),c=new L_(s,i,n),a=Ss(i,Js),l=c.currentSupervisor;return l.onStart(a,e,j(t),c),c.addObserver(d=>l.onEnd(d,c)),(r!==null?r:_(t.getFiberRef(Ea),ke(()=>t.scope()))).add(n,c),c},kN=(e,t)=>He((n,r)=>ee(vN(e,n,r.runtimeFlags,t))),kd=e=>Vs(t=>Je(Fs(t,Gs),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return P(Yi(n,xa),r=>Ml(e,r))}}})),Od=e=>t=>Vs(n=>Je(Fs(n,Gs),{onNone:()=>t,onSome:r=>r.strategy._tag==="ParallelN"&&r.strategy.parallelism===e?t:P(Yi(r,Ia(e)),s=>Ml(t,s))})),Dn=(e,t)=>n=>Vs(r=>Je(Fs(r,Gs),{onNone:()=>n(te),onSome:s=>{if(t===!0){const o=e._tag==="Parallel"?kd:e._tag==="Sequential"?$d:Od(e.parallelism);switch(s.strategy._tag){case"Parallel":return o(n(kd));case"Sequential":return o(n($d));case"ParallelN":return o(n(Od(s.strategy.parallelism)))}}else return n(te)}})),$d=e=>Vs(t=>Je(Fs(t,Gs),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return P(Yi(n,Ta),r=>Ml(e,r))}}})),Gs=Cn("effect/Scope"),Ml=h(2,(e,t)=>zT(e,fg(IE(Gs,t)))),ON=e=>Ir(e,{differ:oN,fork:os}),Td=ET(l$),$N=ON(tc),TN=(e,t,n)=>by(r=>P(P(D_(wy(e)),s=>bs(o=>{const i=t.map(l=>l.listeners.count),c=()=>{i.every(l=>l===0)&&t.every(l=>l.result.state.current._tag==="Pending"?!0:!!(l.result.state.current._tag==="Done"&&ll(l.result.state.current.effect)&&l.result.state.current.effect._tag==="Failure"&&R$(l.result.state.current.effect.cause)))&&(a.forEach(l=>l()),n==null||n(),o(lT(s)))};s.addObserver(l=>{a.forEach(f=>f()),o(l)});const a=t.map((l,f)=>{const d=p=>{i[f]=p,c()};return l.listeners.addObserver(d),()=>l.listeners.removeObserver(d)});return c(),C(()=>{a.forEach(l=>l())})})),()=>pe(()=>{const s=t.flatMap(o=>o.state.completed?[]:[o]);return Ji(s,o=>ZA(o.request,KT(r)))}))),xN=A$,IN=FT,MN=xr,AN=NT,NN=Yi,RN=Li,CN=function(){const e=Symbol.for("effect/Data/Error/plainArgs");return{BaseEffectError:class extends al{constructor(n){super(n==null?void 0:n.message,n!=null&&n.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,e,{value:n,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}.BaseEffectError}(),PN=e=>{const t={BaseEffectError:class extends CN{constructor(){super(...arguments);u(this,"_tag",e)}}};return t.BaseEffectError.prototype.name=e,t.BaseEffectError},Ua=Symbol.for("effect/DateTime"),FN={[Ua]:Ua,pipe(){return N(this,arguments)},[ne](){return this.toString()},toJSON(){return B_(this).toJSON()}},jN={...FN,_tag:"Utc",[K](){return ie(this,Si(this.epochMillis))},[L](e){return Al(e)&&e._tag==="Utc"&&this.epochMillis===e.epochMillis},toString(){return`DateTime.Utc(${B_(this).toJSON()})`}},Al=e=>F(e,Ua),LN=e=>Al(e[0]),U_=e=>{const t=Object.create(jN);return t.epochMillis=e,Object.defineProperty(t,"partsUtc",{value:void 0,enumerable:!1,writable:!0}),t},Ec=e=>{const t=e.getTime();if(Number.isNaN(t))throw new IN("Invalid date");return U_(t)},DN=e=>{if(Al(e))return e;if(e instanceof Date)return Ec(e);if(typeof e=="object"){const t=new Date(0);return JN(t,e),Ec(t)}return Ec(new Date(e))},KN=()=>U_(Date.now()),UN=h(2,(e,t)=>xd(t)-xd(e)),B_=e=>new Date(e.epochMillis),BN=e=>{if(e._tag==="Utc")return new Date(e.epochMillis);if(e.zone._tag==="Offset")return new Date(e.epochMillis+e.zone.offset);if(e.adjustedEpochMillis!==void 0)return new Date(e.adjustedEpochMillis);const t=e.zone.format.formatToParts(e.epochMillis).filter(r=>r.type!=="literal"),n=new Date(0);return n.setUTCFullYear(Number(t[2].value),Number(t[0].value)-1,Number(t[1].value)),n.setUTCHours(Number(t[3].value),Number(t[4].value),Number(t[5].value),Number(t[6].value)),e.adjustedEpochMillis=n.getTime(),n},qN=e=>{const t=Math.abs(e);let n=Math.floor(t/(60*60*1e3)),r=Math.round(t%(60*60*1e3)/(60*1e3));return r===60&&(n+=1,r=0),`${e<0?"-":"+"}${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`},xd=e=>e.epochMillis,JN=(e,t)=>{if(t.year!==void 0&&e.setUTCFullYear(t.year),t.month!==void 0&&e.setUTCMonth(t.month-1),t.day!==void 0&&e.setUTCDate(t.day),t.weekDay!==void 0){const n=t.weekDay-e.getUTCDay();e.setUTCDate(e.getUTCDate()+n)}t.hours!==void 0&&e.setUTCHours(t.hours),t.minutes!==void 0&&e.setUTCMinutes(t.minutes),t.seconds!==void 0&&e.setUTCSeconds(t.seconds),t.millis!==void 0&&e.setUTCMilliseconds(t.millis)},VN=e=>e._tag==="Named"?e.id:qN(e.offset),HN=h(LN,(e,t)=>{try{return new Intl.DateTimeFormat(t==null?void 0:t.locale,{timeZone:e._tag==="Utc"?"UTC":VN(e.zone),...t}).format(e.epochMillis)}catch{return new Intl.DateTimeFormat(t==null?void 0:t.locale,{timeZone:"UTC",...t}).format(BN(e))}}),Nl=e=>function(){if(arguments.length===1){const t=arguments[0];return(n,...r)=>e(t,n,...r)}return e.apply(this,arguments)},q_=Nl((e,t,n)=>{const r=Dg(),s=[[Js,[[r,e.context]]]];n!=null&&n.scheduler&&s.push([p_,[[r,n.scheduler]]]);let o=sI(e.fiberRefs,{entries:s,forkAs:r});n!=null&&n.updateRefs&&(o=n.updateRefs(o,r));const i=new L_(r,o,e.runtimeFlags);let c=t;n!=null&&n.scope&&(c=P(NN(n.scope,n_),l=>Wi(AT(l,by(f=>U(f,i.id())?pt:Ty(i,f))),rl(t,f=>AN(l,f)))));const a=i.currentSupervisor;return a!==tc&&(a.onStart(e.context,c,A(),i),i.addObserver(l=>a.onEnd(l,i))),Ol.add(e.runtimeFlags,i),(n==null?void 0:n.immediate)===!1?i.resume(c):i.start(c),i}),WN=Nl((e,t)=>{const n=XN(e)(t);if(n._tag==="Failure")throw ZN(n.effect_instruction_i0);return n.effect_instruction_i0});class zN extends Error{constructor(n){super(`Fiber #${n.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`);u(this,"fiber");u(this,"_tag","AsyncFiberException");this.fiber=n,this.name=this._tag,this.stack=this.message}}const GN=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new zN(e);return Error.stackTraceLimit=t,n},kc=Symbol.for("effect/Runtime/FiberFailure"),ao=Symbol.for("effect/Runtime/FiberFailure/Cause");var Ch,Ph;class YN extends Error{constructor(n){const r=ly(n)[0];super((r==null?void 0:r.message)||"An error has occurred");u(this,Ph);u(this,Ch);this[kc]=kc,this[ao]=n,this.name=r?`(FiberFailure) ${r.name}`:"FiberFailure",r!=null&&r.stack&&(this.stack=r.stack)}toJSON(){return{_id:"FiberFailure",cause:this[ao].toJSON()}}toString(){return"(FiberFailure) "+xr(this[ao],{renderErrorCause:!0})}[(Ph=kc,Ch=ao,ne)](){return this.toString()}}const ZN=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new YN(e);return Error.stackTraceLimit=t,n},QN=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return Zf(t.left);case"Right":return fe(t.right);case"Some":return fe(t.value);case"None":return Zf(Ny())}},XN=Nl((e,t)=>{const n=QN(t);if(n)return n;const r=new h_,s=q_(e)(t,{scheduler:r});r.flush();const o=s.unsafePoll();return o||DT(tl(GN(s),fl(s)))});class e1{constructor(t,n,r){u(this,"context");u(this,"runtimeFlags");u(this,"fiberRefs");this.context=t,this.runtimeFlags=n,this.fiberRefs=r}pipe(){return N(this,arguments)}}const t1=e=>new e1(e.context,e.runtimeFlags,e.fiberRefs),n1=ey(Or,Qg,Zg),J_=t1({context:Du(),runtimeFlags:n1,fiberRefs:oI()}),r1=q_(J_),s1=WN(J_),o1=qi,$o=SN,uo=pe,Ge=pt,i1=wa,Ba=Ke,c1=Vi,Kn=Yo,_t=P,a1=r1,u1=s1,qa=DN,V_=KN,l1=UN,Id=HN;class $e{constructor(t,n,r){u(this,"path");u(this,"actual");u(this,"issue");u(this,"_tag","Pointer");this.path=t,this.actual=n,this.issue=r}}class Md{constructor(t,n){u(this,"actual");u(this,"message");u(this,"_tag","Unexpected");this.actual=t,this.message=n}}class Br{constructor(t,n){u(this,"ast");u(this,"message");u(this,"_tag","Missing");u(this,"actual");this.ast=t,this.message=n}}class ce{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"issues");u(this,"output");u(this,"_tag","Composite");this.ast=t,this.actual=n,this.issues=r,this.output=s}}class Oc{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"kind");u(this,"issue");u(this,"_tag","Refinement");this.ast=t,this.actual=n,this.kind=r,this.issue=s}}class $c{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"kind");u(this,"issue");u(this,"_tag","Transformation");this.ast=t,this.actual=n,this.kind=r,this.issue=s}}class st{constructor(t,n,r){u(this,"ast");u(this,"actual");u(this,"message");u(this,"_tag","Type");this.ast=t,this.actual=n,this.message=r}}class Ad{constructor(t,n,r){u(this,"ast");u(this,"actual");u(this,"message");u(this,"_tag","Forbidden");this.ast=t,this.actual=n,this.message=r}}const Nd=Symbol.for("effect/Schema/ParseErrorTypeId");var Fh;class f1 extends PN("ParseError"){constructor(){super(...arguments);u(this,Fh,Nd)}get message(){return this.toString()}toString(){return To.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[(Fh=Nd,ne)](){return this.toJSON()}}const d1=e=>new f1({issue:e}),ws=H,H_=B,je=xv,Wt=h(2,(e,t)=>je(e)?xu(e,{onLeft:B,onRight:t}):_t(e,t)),Be=h(2,(e,t)=>je(e)?Mv(e,t):Ba(e,t)),Tc=h(2,(e,t)=>je(e)?Iv(e,t):c1(e,t)),W_=h(2,(e,t)=>je(e)?xu(e,{onLeft:t,onRight:H}):i1(e,t)),nc=(e,t)=>t===void 0||Pt(t)?e:e===void 0?t:{...e,...t},h1=(e,t,n)=>{const r=be(e,t);return(s,o)=>r(s,nc(n,o))},z_=(e,t,n)=>{const r=h1(e,t,n);return(s,o)=>ym(r(s,o),d1)},p1=(e,t,n)=>{const r=be(e,t);return(s,o)=>r(s,{...nc(n,o),isEffectAllowed:!0})},G_=(e,t)=>z_(e.ast,!0,t),m1=(e,t)=>p1(e.ast,!1,t),g1=G_,Rl=(e,t)=>z_(ue(e.ast),!0,t),y1=(e,t)=>{const n=be(ue(e.ast),!0);return(r,s)=>vt(n(r,{exact:!0,...nc(t,s)}))},_1=J(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),b1=J(Symbol.for("effect/ParseResult/encodeMemoMap"),()=>new WeakMap),be=(e,t)=>{const n=t?_1:b1,r=n.get(e);if(r)return r;const s=S1(e,t),o=M0(e),i=xe(o)?(l,f)=>s(l,nc(f,o.value)):s,c=A0(e),a=t&&xe(c)?(l,f)=>Gr(W_(i(l,f),c.value),e,l,f):i;return n.set(e,a),a},xc=e=>St(T0(e)),Ic=e=>St(x0(e)),S1=(e,t)=>{switch(e._tag){case"Refinement":if(t){const n=be(e.from,!0);return(r,s)=>{s=s??fc;const o=(s==null?void 0:s.errors)==="all",i=Wt(W_(n(r,s),c=>{const a=new Oc(e,r,"From",c);return o&&R0(e)&&X_(c)?Je(e.filter(r,s,e),{onNone:()=>B(a),onSome:l=>B(new ce(e,r,[a,new Oc(e,r,"Predicate",l)]))}):B(a)}),c=>Je(e.filter(c,s,e),{onNone:()=>H(c),onSome:a=>B(new Oc(e,r,"Predicate",a))}));return Gr(i,e,r,s)}}else{const n=be(ue(e),!0),r=be(Y_(e.from),!1);return(s,o)=>Gr(Wt(n(s,o),i=>r(i,o)),e,s,o)}case"Transformation":{const n=E1(e.transformation,t),r=t?be(e.from,!0):be(e.to,!1),s=t?be(e.to,!0):be(e.from,!1);return(o,i)=>Gr(Wt(Tc(r(o,i),c=>new $c(e,o,t?"Encoded":"Type",c)),c=>Wt(Tc(n(c,i??fc,e,o),a=>new $c(e,o,"Transformation",a)),a=>Tc(s(a,i),l=>new $c(e,o,t?"Type":"Encoded",l)))),e,o,i)}case"Declaration":{const n=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(r,s)=>Gr(n(r,s??fc,e),e,r,s)}case"Literal":return Ue(e,n=>n===e.literal);case"UniqueSymbol":return Ue(e,n=>n===e.symbol);case"UndefinedKeyword":return Ue(e,Vw);case"NeverKeyword":return Ue(e,Hw);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return H;case"StringKeyword":return Ue(e,qe);case"NumberKeyword":return Ue(e,Pt);case"BooleanKeyword":return Ue(e,Zn);case"BigIntKeyword":return Ue(e,yi);case"SymbolKeyword":return Ue(e,Gc);case"ObjectKeyword":return Ue(e,tn);case"Enums":return Ue(e,n=>e.enums.some(([r,s])=>s===n));case"TemplateLiteral":{const n=aE(e);return Ue(e,r=>qe(r)&&n.test(r))}case"TupleType":{const n=e.elements.map(l=>be(l.type,t)),r=e.rest.map(l=>be(l.type,t));let s=e.elements.filter(l=>!l.isOptional);e.rest.length>0&&(s=s.concat(e.rest.slice(1)));const o=s.length,i=e.elements.length>0?e.elements.map((l,f)=>f).join(" | "):"never",c=xc(e),a=Ic(e);return(l,f)=>{if(!Wv(l))return B(new st(e,l));const d=(f==null?void 0:f.errors)==="all",p=[];let m=0;const y=[],E=l.length;for(let w=E;w<=o-1;w++){const O=new $e(w,l,new Br(s[w-E]));if(d){p.push([m++,O]);continue}else return B(new ce(e,l,O,y))}if(e.rest.length===0)for(let w=e.elements.length;w<=E-1;w++){const O=new $e(w,l,new Md(l[w],`is unexpected, expected: ${i}`));if(d){p.push([m++,O]);continue}else return B(new ce(e,l,O,y))}let g=0,b;for(;g<n.length;g++)if(E<g+1){if(e.elements[g].isOptional)continue}else{const w=n[g],O=w(l[g],f);if(je(O)){if(Te(O)){const v=new $e(g,l,O.left);if(d){p.push([m++,v]);continue}else return B(new ce(e,l,v,nt(y)))}y.push([m++,O.right])}else{const v=m++,k=g;b||(b=[]),b.push(({es:$,output:x})=>_t(Kn(O),M=>{if(Te(M)){const q=new $e(k,l,M.left);return d?($.push([v,q]),Ge):B(new ce(e,l,q,nt(x)))}return x.push([v,M.right]),Ge}))}}if(oe(r)){const[w,...O]=r;for(;g<E-O.length;g++){const v=w(l[g],f);if(je(v))if(Te(v)){const k=new $e(g,l,v.left);if(d){p.push([m++,k]);continue}else return B(new ce(e,l,k,nt(y)))}else y.push([m++,v.right]);else{const k=m++,$=g;b||(b=[]),b.push(({es:x,output:M})=>_t(Kn(v),q=>{if(Te(q)){const D=new $e($,l,q.left);return d?(x.push([k,D]),Ge):B(new ce(e,l,D,nt(M)))}else return M.push([k,q.right]),Ge}))}}for(let v=0;v<O.length;v++)if(g+=v,!(E<g+1)){const k=O[v](l[g],f);if(je(k)){if(Te(k)){const $=new $e(g,l,k.left);if(d){p.push([m++,$]);continue}else return B(new ce(e,l,$,nt(y)))}y.push([m++,k.right])}else{const $=m++,x=g;b||(b=[]),b.push(({es:M,output:q})=>_t(Kn(k),D=>{if(Te(D)){const Z=new $e(x,l,D.left);return d?(M.push([$,Z]),Ge):B(new ce(e,l,Z,nt(q)))}return q.push([$,D.right]),Ge}))}}}const S=({es:w,output:O})=>_o(w)?B(new ce(e,l,nt(w),nt(O))):H(nt(O));if(b&&b.length>0){const w=b;return uo(()=>{const O={es:Hr(p),output:Hr(y)};return _t($o(w,v=>v(O),{concurrency:c,batching:a,discard:!0}),()=>S(O))})}return S({output:y,es:p})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return Ue(e,Ww);const n=[],r={},s=[];for(const f of e.propertySignatures)n.push([be(f.type,t),f]),r[f.name]=null,s.push(f.name);const o=e.indexSignatures.map(f=>[be(f.parameter,t),be(f.type,t),f.parameter]),i=De.make(e.indexSignatures.map(f=>f.parameter).concat(s.map(f=>Gc(f)?new F0(f):new Qc(f)))),c=be(i,t),a=xc(e),l=Ic(e);return(f,d)=>{if(!Gw(f))return B(new st(e,f));const p=(d==null?void 0:d.errors)==="all",m=[];let y=0;const E=(d==null?void 0:d.onExcessProperty)==="error",g=(d==null?void 0:d.onExcessProperty)==="preserve",b={};let S;if(E||g){S=At(f);for(const k of S){const $=c(k,d);if(je($)&&Te($))if(E){const x=new $e(k,f,new Md(f[k],`is unexpected, expected: ${String(i)}`));if(p){m.push([y++,x]);continue}else return B(new ce(e,f,x,b))}else b[k]=f[k]}}let w;const O=(d==null?void 0:d.exact)===!0;for(let k=0;k<n.length;k++){const $=n[k][1],x=$.name,M=Object.prototype.hasOwnProperty.call(f,x);if(!M){if($.isOptional)continue;if(O){const Z=new $e(x,f,new Br($));if(p){m.push([y++,Z]);continue}else return B(new ce(e,f,Z,b))}}const q=n[k][0],D=q(f[x],d);if(je(D)){if(Te(D)){const Z=new $e(x,f,M?D.left:new Br($));if(p){m.push([y++,Z]);continue}else return B(new ce(e,f,Z,b))}b[x]=D.right}else{const Z=y++,Me=x;w||(w=[]),w.push(({es:re,output:Oe})=>_t(Kn(D),Y=>{if(Te(Y)){const R=new $e(Me,f,M?Y.left:new Br($));return p?(re.push([Z,R]),Ge):B(new ce(e,f,R,Oe))}return Oe[Me]=Y.right,Ge}))}}for(let k=0;k<o.length;k++){const $=o[k],x=$[0],M=$[1],q=xm(f,$[2]);for(const D of q){const Z=x(D,d);if(je(Z)&&vt(Z)){const Me=M(f[D],d);if(je(Me))if(Te(Me)){const re=new $e(D,f,Me.left);if(p){m.push([y++,re]);continue}else return B(new ce(e,f,re,b))}else Object.prototype.hasOwnProperty.call(r,D)||(b[D]=Me.right);else{const re=y++,Oe=D;w||(w=[]),w.push(({es:Y,output:R})=>_t(Kn(Me),G=>{if(Te(G)){const $t=new $e(Oe,f,G.left);return p?(Y.push([re,$t]),Ge):B(new ce(e,f,$t,R))}else return Object.prototype.hasOwnProperty.call(r,D)||(R[D]=G.right),Ge}))}}}}const v=({es:k,output:$})=>{if(_o(k))return B(new ce(e,f,nt(k),$));if((d==null?void 0:d.propertyOrder)==="original"){const x=S||At(f);for(const q of s)x.indexOf(q)===-1&&x.push(q);const M={};for(const q of x)Object.prototype.hasOwnProperty.call($,q)&&(M[q]=$[q]);return H(M)}return H($)};if(w&&w.length>0){const k=w;return uo(()=>{const $={es:Hr(m),output:Object.assign({},b)};return _t($o(k,x=>x($),{concurrency:a,batching:l,discard:!0}),()=>v($))})}return v({es:m,output:b})}}case"Union":{const n=w1(e.types,t),r=At(n.keys),s=r.length,o=e.types.length,i=new Map;for(let l=0;l<o;l++)i.set(e.types[l],be(e.types[l],t));const c=xc(e)??1,a=Ic(e);return(l,f)=>{const d=[];let p=0,m=[];if(s>0)if(wu(l))for(let g=0;g<s;g++){const b=r[g],S=n.keys[b].buckets;if(Object.prototype.hasOwnProperty.call(l,b)){const w=String(l[b]);if(Object.prototype.hasOwnProperty.call(S,w))m=m.concat(S[w]);else{const{candidates:O,literals:v}=n.keys[b],k=De.make(v),$=O.length===o?new Nt([new Se(b,k,!1,!0)],[]):De.make(O);d.push([p++,new ce($,l,new $e(b,l,new st(k,l[b])))])}}else{const{candidates:w,literals:O}=n.keys[b],v=new Se(b,De.make(O),!1,!0),k=w.length===o?new Nt([v],[]):De.make(w);d.push([p++,new ce(k,l,new $e(b,l,new Br(v)))])}}else{const g=n.candidates.length===o?e:De.make(n.candidates);d.push([p++,new st(g,l)])}n.otherwise.length>0&&(m=m.concat(n.otherwise));let y;for(let g=0;g<m.length;g++){const b=m[g],S=i.get(b)(l,f);if(je(S)&&(!y||y.length===0)){if(vt(S))return S;d.push([p++,S.left])}else{const w=p++;y||(y=[]),y.push(O=>uo(()=>"finalResult"in O?Ge:_t(Kn(S),v=>(vt(v)?O.finalResult=v:O.es.push([w,v.left]),Ge))))}}const E=g=>_o(g)?g.length===1&&g[0][1]._tag==="Type"?B(g[0][1]):B(new ce(e,l,nt(g))):B(new st(e,l));if(y&&y.length>0){const g=y;return uo(()=>{const b={es:Hr(d)};return _t($o(g,S=>S(b),{concurrency:c,batching:a,discard:!0}),()=>"finalResult"in b?b.finalResult:E(b.es))})}return E(d)}}case"Suspend":{const n=Im(()=>be(nr(e.f(),e.annotations),t));return(r,s)=>n()(r,s)}}},Ue=(e,t)=>n=>t(n)?H(n):B(new st(e,n)),zr=(e,t)=>{switch(e._tag){case"Declaration":{const n=Ym(e);if(xe(n))return zr(n.value,t);break}case"TypeLiteral":{const n=[];for(let r=0;r<e.propertySignatures.length;r++){const s=e.propertySignatures[r],o=t?sa(s.type):ue(s.type);rs(o)&&!s.isOptional&&n.push([s.name,o])}return n}case"TupleType":{const n=[];for(let r=0;r<e.elements.length;r++){const s=e.elements[r],o=t?sa(s.type):ue(s.type);rs(o)&&!s.isOptional&&n.push([r,o])}return n}case"Refinement":return zr(e.from,t);case"Suspend":return zr(e.f(),t);case"Transformation":return zr(t?e.from:e.to,t)}return[]},w1=(e,t)=>{const n={},r=[],s=[];for(let o=0;o<e.length;o++){const i=e[o],c=zr(i,t);if(c.length>0){s.push(i);for(let a=0;a<c.length;a++){const[l,f]=c[a],d=String(f.literal);n[l]=n[l]||{buckets:{},literals:[],candidates:[]};const p=n[l].buckets;if(Object.prototype.hasOwnProperty.call(p,d)){if(a<c.length-1)continue;p[d].push(i),n[l].literals.push(f),n[l].candidates.push(i)}else{p[d]=[i],n[l].literals.push(f),n[l].candidates.push(i);break}}}else r.push(i)}return{keys:n,otherwise:r,candidates:s}},Y_=e=>Vn(e)?Y_(e.from):e,Gr=(e,t,n,r)=>{if((r==null?void 0:r.isEffectAllowed)===!0||je(e))return e;const s=new h_,o=a1(e,{scheduler:s});s.flush();const i=o.unsafePoll();if(i){if(GT(i))return H(i.value);const c=i.cause;return xN(c)?B(c.error):B(new Ad(t,n,MN(c)))}return B(new Ad(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},v1=([e],[t])=>e>t?1:e<t?-1:0;function nt(e){return e.sort(v1).map(t=>t[1])}const E1=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return H;case"TypeLiteralTransformation":return n=>{let r=H(n);for(const s of e.propertySignatureTransformations){const[o,i]=t?[s.from,s.to]:[s.to,s.from],c=t?s.decode:s.encode;r=Be(r,l=>{const f=c(Object.prototype.hasOwnProperty.call(l,o)?j(l[o]):A());return delete l[o],xe(f)&&(l[i]=f.value),l})}return r}}},Ae=(e,t=[])=>({value:e,forest:t}),To={formatIssue:e=>Be(Un(e),k1),formatIssueSync:e=>{const t=To.formatIssue(e);return je(t)?Nv(t):u1(t)},formatError:e=>To.formatIssue(e.issue),formatErrorSync:e=>To.formatIssueSync(e.issue)},k1=e=>e.value+Z_(`
`,e.forest),Z_=(e,t)=>{let n="";const r=t.length;let s;for(let o=0;o<r;o++){s=t[o];const i=o===r-1;n+=e+(i?"└":"├")+"─ "+s.value,n+=Z_(e+(r>1&&!i?"│  ":"   "),s.forest)}return n},O1=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},$1=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},Q_=e=>"ast"in e?j(e.ast):A(),Ja=H(void 0),T1=e=>Q_(e).pipe(Ei(O0),Je({onNone:()=>Ja,onSome:t=>{const n=t(e);return qe(n)?H({message:n,override:!1}):o1(n)?Ba(n,r=>({message:r,override:!1})):qe(n.message)?H({message:n.message,override:n.override}):Ba(n.message,r=>({message:r,override:n.override}))}})),Cl=e=>t=>t._tag===e,X_=Cl("Composite"),Rd=Cl("Refinement"),Cd=Cl("Transformation"),is=e=>Wt(T1(e),t=>t!==void 0?!t.override&&(X_(e)||Rd(e)&&e.kind==="From"||Cd(e)&&e.kind!=="Transformation")?Cd(e)||Rd(e)?is(e.issue):Ja:H(t.message):Ja),eb=e=>Q_(e).pipe(Ei(I0),Fv(t=>t(e)),St);function x1(e){return Gm(e).pipe(zt(()=>Wm(e)),zt(()=>zm(e)),zt(()=>$i(e)),ke(()=>`{ ${e.from} | filter }`))}function I1(e){return e.message!==void 0?e.message:`Expected ${Vn(e.ast)?x1(e.ast):String(e.ast)}, actual ${lt(e.actual)}`}const M1=e=>Be(is(e),t=>t??eb(e)??I1(e)),lo=e=>eb(e)??String(e.ast),A1=e=>e.message??"is forbidden",N1=e=>e.message??"is unexpected",R1=e=>{const t=$0(e.ast);if(xe(t)){const n=t.value();return qe(n)?H(n):n}return H(e.message??"is missing")},Un=e=>{switch(e._tag){case"Type":return Be(M1(e),Ae);case"Forbidden":return H(Ae(lo(e),[Ae(A1(e))]));case"Unexpected":return H(Ae(N1(e)));case"Missing":return Be(R1(e),Ae);case"Transformation":return Wt(is(e),t=>t!==void 0?H(Ae(t)):Be(Un(e.issue),n=>Ae(lo(e),[Ae(O1(e.kind),[n])])));case"Refinement":return Wt(is(e),t=>t!==void 0?H(Ae(t)):Be(Un(e.issue),n=>Ae(lo(e),[Ae($1(e.kind),[n])])));case"Pointer":return Be(Un(e.issue),t=>Ae(Nm(e.path),[t]));case"Composite":return Wt(is(e),t=>{if(t!==void 0)return H(Ae(t));const n=lo(e);return Am(e.issues)?Be($o(e.issues,Un),r=>Ae(n,r)):Be(Un(e.issues),r=>Ae(n,[r]))})}},C1=h(e=>tn(e[0]),(e,...t)=>{const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}),P1=h(e=>tn(e[0]),(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n}),yr=Symbol.for("effect/Schema");function ye(e){var t,n,r;return n=yr,t=yr,r=class{constructor(){u(this,n,Va)}static annotations(o){return ye(Ut(this.ast,o))}static pipe(){return N(this,arguments)}static toString(){return String(e)}},u(r,"ast",e),u(r,"Type"),u(r,"Encoded"),u(r,"Context"),u(r,t,Va),r}const Va={_A:e=>e,_I:e=>e,_R:e=>e},Pd={schemaId:w0,message:Pm,missingMessage:Mu,identifier:Au,title:Dt,description:Rs,examples:Fm,default:jm,documentation:v0,jsonSchema:Lm,arbitrary:Dm,pretty:Km,equivalence:Um,concurrency:Bm,batching:qm,parseIssueTitle:Jm,parseOptions:Vm,decodingFallback:Hm},Ar=e=>{if(!e)return{};const t={...e};for(const n in Pd)if(n in e){const r=Pd[n];t[r]=e[n],delete t[n]}return t},Ut=(e,t)=>nr(e,Ar(t)),F1=e=>ye(sa(e.ast)),Fd=e=>ye(ue(e.ast)),Xt=e=>F(e,yr)&&tn(e[yr]);function j1(e){return Pu(e)?De.make(Q0(e,t=>new Qc(t))):new Qc(e[0])}function tb(e,t=j1(e)){var n;return n=class extends ye(t){static annotations(s){return tb(this.literals,Ut(this.ast,s))}},u(n,"literals",[...e]),n}function Ha(...e){return oe(e)?tb(e):nb}const L1=(e,t,n)=>Pl(e,new Ti(e.map(r=>r.ast),(...r)=>t.decode(...r.map(ye)),(...r)=>t.encode(...r.map(ye)),Ar(n))),D1=(e,t)=>{const n=()=>(s,o,i)=>e(s)?ws(s):H_(new st(i,s)),r=n;return Pl([],new Ti([],n,r,Ar(t)))};function Pl(e,t){var n;return n=class extends ye(t){static annotations(s){return Pl(this.typeParameters,Ut(this.ast,s))}},u(n,"typeParameters",[...e]),n}const K1=function(){if(Array.isArray(arguments[0])){const n=arguments[0],r=arguments[1],s=arguments[2];return L1(n,r,s)}const e=arguments[0],t=arguments[1];return D1(e,t)};class U1 extends ye(us){}class nb extends ye(Ru){}class B1 extends ye(Xc){}class q1 extends ye(ta){}const J1=e=>De.make(e.map(t=>t.ast));function rb(e,t=J1(e)){var n;return n=class extends ye(t){static annotations(s){return rb(this.members,Ut(this.ast,s))}},u(n,"members",[...e]),n}function V1(...e){return Pu(e)?rb(e):oe(e)?e[0]:nb}const H1=e=>V1(e,U1),W1=(e,t)=>new xi(e.map(n=>Xt(n)?new Nn(n.ast,!1):n.ast),t.map(n=>Xt(n)?new Cs(n.ast):n.ast),!0);function sb(e,t,n=W1(e,t)){var r;return r=class extends ye(n){static annotations(o){return sb(this.elements,this.rest,Ut(this.ast,o))}},u(r,"elements",[...e]),u(r,"rest",[...t]),r}function ob(e,t){var n;return n=class extends sb([e],[e],t){static annotations(s){return ob(this.value,Ut(this.ast,s))}},u(n,"value",e),n}const ct=e=>ob(e),Wa=e=>e?'"?:"':'":"';class ib extends Nn{constructor(n,r,s,o,i){super(n,r,o);u(this,"isReadonly");u(this,"defaultValue");u(this,"_tag","PropertySignatureDeclaration");this.isReadonly=s,this.defaultValue=i}toString(){const n=Wa(this.isOptional),r=String(this.type);return`PropertySignature<${n}, ${r}, never, ${n}, ${r}>`}}class z1 extends Nn{constructor(n,r,s,o,i){super(n,r,o);u(this,"isReadonly");u(this,"defaultValue");this.isReadonly=s,this.defaultValue=i}}const G1=e=>e===void 0?"never":qe(e)?JSON.stringify(e):String(e);class Y1{constructor(t,n,r,s){u(this,"from");u(this,"to");u(this,"decode");u(this,"encode");u(this,"_tag","PropertySignatureTransformation");this.from=t,this.to=n,this.decode=r,this.encode=s}toString(){return`PropertySignature<${Wa(this.to.isOptional)}, ${this.to.type}, ${G1(this.from.fromKey)}, ${Wa(this.from.isOptional)}, ${this.from.type}>`}}const cb=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new ib(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new Y1(e.from,new z1(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},ab=Symbol.for("effect/PropertySignature"),Fl=e=>F(e,ab);var jh,Lh;Lh=yr,jh=ab;const Jl=class Jl{constructor(t){u(this,"ast");u(this,Lh);u(this,jh,null);u(this,"_TypeToken");u(this,"_Key");u(this,"_EncodedToken");u(this,"_HasDefault");this.ast=t}pipe(){return N(this,arguments)}annotations(t){return new Jl(cb(this.ast,Ar(t)))}toString(){return String(this.ast)}};let za=Jl;class jl extends za{constructor(n,r){super(n);u(this,"from");this.from=r}annotations(n){return new jl(cb(this.ast,Ar(n)),this.from)}}const kt=e=>{const t=e.ast===us||e.ast===Ru?us:H1(e).ast;return new jl(new ib(t,!0,!0,{},void 0),e)},Z1=ng([Mu]),Q1=(e,t)=>{const n=At(e),r=[];if(n.length>0){const o=[],i=[],c=[];for(let a=0;a<n.length;a++){const l=n[a],f=e[l];if(Fl(f)){const d=f.ast;switch(d._tag){case"PropertySignatureDeclaration":{const p=d.type,m=d.isOptional,y=d.annotations;o.push(new Se(l,p,m,!0,Z1(d))),i.push(new Se(l,ue(p),m,!0,y)),r.push(new Se(l,p,m,!0,y));break}case"PropertySignatureTransformation":{const p=d.from.fromKey??l;o.push(new Se(p,d.from.type,d.from.isOptional,!0,d.from.annotations)),i.push(new Se(l,d.to.type,d.to.isOptional,!0,d.to.annotations)),c.push(new rE(p,l,d.decode,d.encode));break}}}else o.push(new Se(l,f.ast,!1,!0)),i.push(new Se(l,ue(f.ast),!1,!0)),r.push(new Se(l,f.ast,!1,!0))}if(oe(c)){const a=[],l=[];for(const f of t){const{indexSignatures:d,propertySignatures:p}=Of(f.key.ast,f.value.ast);p.forEach(m=>{o.push(m),i.push(new Se(m.name,ue(m.type),m.isOptional,m.isReadonly,m.annotations))}),d.forEach(m=>{a.push(m),l.push(new Ps(m.parameter,ue(m.type),m.isReadonly))})}return new un(new Nt(o,a,{[Jn]:"Struct (Encoded side)"}),new Nt(i,l,{[Jn]:"Struct (Type side)"}),new na(c))}}const s=[];for(const o of t){const{indexSignatures:i,propertySignatures:c}=Of(o.key.ast,o.value.ast);c.forEach(a=>r.push(a)),i.forEach(a=>s.push(a))}return new Nt(r,s)},ub=(e,t)=>{const n=At(e);for(const r of n){const s=e[r];if(t[r]===void 0&&Fl(s)){const o=s.ast,i=o._tag==="PropertySignatureDeclaration"?o.defaultValue:o.to.defaultValue;i!==void 0&&(t[r]=i())}}return t};function lb(e,t,n=Q1(e,t)){var r;return r=class extends ye(n){static annotations(o){return lb(this.fields,this.records,Ut(this.ast,o))}static pick(...o){return mt(C1(e,...o))}static omit(...o){return mt(P1(e,...o))}},u(r,"fields",{...e}),u(r,"records",[...t]),u(r,"make",(o,i)=>{const c=ub(e,{...o});return Dl(i)?c:Rl(r)(c)}),r}function mt(e,...t){return lb(e,t)}const X1=e=>ye(Wr(e.ast)),qr=(e,t,n)=>{if(kf(e)&&kf(t)){const r=[...e.propertySignatures];for(const s of t.propertySignatures){const o=s.name,i=r.findIndex(c=>c.name===o);if(i===-1)r.push(s);else{const{isOptional:c,type:a}=r[i];r[i]=new Se(o,ci(a,s.type,n.concat(o)),c,!0)}}return new Nt(r,e.indexSignatures.concat(t.indexSignatures))}throw new Error(Rm(e,t,n))},eR=uE([Au]),Jr=(e,t)=>t.map(n=>new ju(n,e.filter,eR(e))),ci=(e,t,n)=>De.make(It([e],[t],n)),rn=e=>Fu(e)?e.types:[e],It=(e,t,n)=>Do(e,r=>Do(t,s=>{switch(s._tag){case"Literal":{if(qe(s.literal)&&ea(r)||Pt(s.literal)&&Sf(r)||Zn(s.literal)&&vf(r))return[s];break}case"StringKeyword":{if(s===Xc){if(ea(r)||rs(r)&&qe(r.literal))return[r];if(Vn(r))return Jr(r,It(rn(r.from),[s],n))}else if(r===Xc)return[s];break}case"NumberKeyword":{if(s===ta){if(Sf(r)||rs(r)&&Pt(r.literal))return[r];if(Vn(r))return Jr(r,It(rn(r.from),[s],n))}else if(r===ta)return[s];break}case"BooleanKeyword":{if(s===wf){if(vf(r)||rs(r)&&Zn(r.literal))return[r];if(Vn(r))return Jr(r,It(rn(r.from),[s],n))}else if(r===wf)return[s];break}case"Union":return It(rn(r),s.types,n);case"Suspend":return[new ls(()=>ci(r,s.f(),n))];case"Refinement":return Jr(s,It(rn(r),rn(s.from),n));case"TypeLiteral":{switch(r._tag){case"Union":return It(r.types,[s],n);case"Suspend":return[new ls(()=>ci(r.f(),s,n))];case"Refinement":return Jr(r,It(rn(r.from),[s],n));case"TypeLiteral":return[qr(r,s,n)];case"Transformation":{const o=r.transformation,i=qr(r.from,s,n),c=qr(r.to,ue(s),n);switch(o._tag){case"TypeLiteralTransformation":return[new un(i,c,new na(o.propertySignatureTransformations))];case"ComposeTransformation":return[new un(i,c,nE)];case"FinalTransformation":return[new un(i,c,new Xm((a,l,f,d)=>Be(o.decode(a,l,f,d),p=>({...a,...p})),(a,l,f,d)=>Be(o.encode(a,l,f,d),p=>({...a,...p}))))]}}}break}case"Transformation":{if(X0(r)){if(ra(s.transformation)&&ra(r.transformation))return[new un(qr(r.from,s.from,n),qr(r.to,s.to,n),new na(s.transformation.propertySignatureTransformations.concat(r.transformation.propertySignatureTransformations)))]}else return It([s],[r],n);break}}throw new Error(Rm(r,s,n))})),tR=h(2,(e,t)=>ye(ci(e.ast,t.ast,[]))),fb=Symbol.for("effect/SchemaId/Refine");function db(e,t,n){var r,s,o;return o=class extends(s=ye(n),r=fb,s){static annotations(c){return db(this.from,this.filter,Ut(this.ast,c))}},u(o,r,e),u(o,"from",e),u(o,"filter",t),u(o,"make",(c,a)=>Dl(a)?c:Rl(o)(c)),o}const jd=(e,t,n)=>{if(Zn(e))return e?A():j(new st(t,n));if(qe(e))return j(new st(t,n,e));if(e!==void 0){if("_tag"in e)return j(e);const r=new st(t,n,e.message);return j(oe(e.path)?new $e(e.path,n,r):r)}return A()},nR=(e,t,n)=>{if(h0(e))return jd(e,t,n);if(oe(e)){const r=l0(e,s=>jd(s,t,n));if(oe(r))return j(r.length===1?r[0]:new ce(t,n,r))}return A()};function hb(e,t){return n=>{function r(o,i,c){return nR(e(o,i,c),c,o)}const s=new ju(n.ast,r,Ar(t));return db(n,r,s)}}function pb(e,t,n){var r;return r=class extends ye(n){static annotations(o){return pb(this.from,this.to,Ut(this.ast,o))}},u(r,"from",e),u(r,"to",t),r}const Ga=h(e=>Xt(e[0])&&Xt(e[1]),(e,t,n)=>pb(e,t,new un(e.ast,t.ast,new Xm(n.decode,n.encode)))),rR=h(e=>Xt(e[0])&&Xt(e[1]),(e,t,n)=>Ga(e,t,{strict:!0,decode:(r,s,o,i)=>ws(n.decode(r,i)),encode:(r,s,o,i)=>ws(n.encode(r,i))})),sR=b0,oR=(e,t)=>n=>n.pipe(hb(r=>r.length>=e,{schemaId:sR,title:`minLength(${e})`,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t})),Ld=Symbol.for("effect/SchemaId/Pattern"),mb=(e,t)=>n=>{const r=e.source;return n.pipe(hb(s=>(e.lastIndex=0,e.test(s)),{schemaId:Ld,[Ld]:{regex:e},description:`a string matching the pattern ${r}`,jsonSchema:{pattern:r},...t}))},iR=e=>oR(1,{title:"nonEmptyString",description:"a non empty string",...e});class W extends B1.pipe(iR({identifier:"NonEmptyString"})){}const cR=e=>Xt(e)||Fl(e),gb=e=>At(e).every(t=>cR(e[t])),Ll=e=>"fields"in e?e.fields:Ll(e[fb]),yb=e=>gb(e)?mt(e):Xt(e)?e:mt(Ll(e)),_b=e=>gb(e)?e:Ll(e),Ys=e=>(t,n)=>xo({kind:"Class",identifier:e,schema:yb(t),fields:_b(t),Base:RN,annotations:n}),Mc=(e,t)=>{const n={...e};for(const r of At(t)){if(r in e)throw new Error(Cm(r));n[r]=t[r]}return n};function Dl(e){return Zn(e)?e:(e==null?void 0:e.disableValidation)??!1}const Dd=J("effect/Schema/astCache",()=>new WeakMap),aR=e=>e===void 0?[]:Array.isArray(e)?e:[e],xo=({Base:e,annotations:t,disableToString:n,fields:r,identifier:s,kind:o,schema:i})=>{var w,O;const c=Symbol.for(`effect/Schema/${o}/${s}`),[a,l,f]=aR(t),d=Fd(i),p=d.annotations({identifier:s,...a}),m=d.annotations({[Jn]:`${s} (Type side)`,...a}),y=i.annotations({[Jn]:`${s} (Constructor)`,...a}),E=i.annotations({[Jn]:`${s} (Encoded side)`,...f}),g=i.annotations({[Nu]:s,...f,...a,...l}),b=v=>F(v,c)&&y1(m)(v),S=(O=class extends e{constructor(v={},k=!1){v={...v},o!=="Class"&&delete v._tag,v=ub(r,v),Dl(k)||(v=Rl(y)(v)),super(v,!0)}static get ast(){let v=Dd.get(this);if(v)return v;const k=K1([i],{decode:()=>($,x,M)=>$ instanceof this||b($)?ws($):H_(new st(M,$)),encode:()=>($,x)=>$ instanceof this?ws($):Be(m1(m)($,x),M=>new this(M,!0))},{identifier:s,pretty:$=>x=>`${s}(${$(x)})`,arbitrary:$=>x=>$(x).map(M=>new this(M)),equivalence:te,[Uo]:p.ast,...a});return v=rR(E,k,{strict:!0,decode:$=>new this($,!0),encode:te}).annotations({[Uo]:g.ast,...l}).ast,Dd.set(this,v),v}static pipe(){return N(this,arguments)}static annotations(v){return ye(this.ast).annotations(v)}static toString(){return`(${String(E)} <-> ${s})`}static make(...v){return new this(...v)}static extend(v){return(k,$)=>{const x=_b(k),M=yb(k),q=Mc(r,x);return xo({kind:o,identifier:v,schema:tR(i,M),fields:q,Base:this,annotations:$})}}static transformOrFail(v){return(k,$,x)=>{const M=Mc(r,k);return xo({kind:o,identifier:v,schema:Ga(i,Fd(mt(M)),$),fields:M,Base:this,annotations:x})}}static transformOrFailFrom(v){return(k,$,x)=>{const M=Mc(r,k);return xo({kind:o,identifier:v,schema:Ga(F1(i),mt(M),$),fields:M,Base:this,annotations:x})}}get[(w=yr,c)](){return c}},u(O,w,Va),u(O,"fields",{...r}),u(O,"identifier",s),O);return n!==!0&&Object.defineProperty(S.prototype,"toString",{value(){return`${s}({ ${At(r).map(v=>`${Mm(v)}: ${lt(this[v])}`).join(", ")} })`},configurable:!0,writable:!0}),S};var bb,we,Sb,uR=[];function lR(e,t,n){var r,s,o,i={};for(o in t)o=="key"?r=t[o]:o=="ref"?s=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?bb.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)i[o]==null&&(i[o]=e.defaultProps[o]);return fR(e,i,r,s,null)}function fR(e,t,n,r,s){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Sb,__i:-1,__u:0};return s==null&&we.vnode!=null&&we.vnode(o),o}function Yr(e){return e.children}bb=uR.slice,we={__e:function(e,t,n,r){for(var s,o,i;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(e)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),i=s.__d),i)return s.__E=s}catch(c){e=c}throw e}},Sb=0,typeof Promise=="function"&&Promise.prototype.then.bind(Promise.resolve());var Kd=/[\s\n\\/='"\0<>]/,Ud=/^(xlink|xmlns|xml)([A-Z])/,dR=/^(?:accessK|auto[A-Z]|cell|ch|col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z])/,hR=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,pR=new Set(["draggable","spellcheck"]),mR=/["&<]/;function fo(e){if(e.length===0||mR.test(e)===!1)return e;for(var t=0,n=0,r="",s="";n<e.length;n++){switch(e.charCodeAt(n)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;default:continue}n!==t&&(r+=e.slice(t,n)),r+=s,t=n+1}return n!==t&&(r+=e.slice(t,n)),r}var Bd={},gR=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),yR=/[A-Z]/g;function _R(e){var t="";for(var n in e){var r=e[n];if(r!=null&&r!==""){var s=n[0]=="-"?n:Bd[n]||(Bd[n]=n.replace(yR,"-$&").toLowerCase()),o=";";typeof r!="number"||s.startsWith("--")||gR.has(s)||(o="px;"),t=t+s+":"+r+o}}return t||void 0}function qd(){this.__d=!0}function bR(e,t){return{__v:e,context:t,props:e.props,setState:qd,forceUpdate:qd,__d:!0,__h:new Array(0)}}var Ya,cn,vs,Zr,Kl={},Jd=[],Qr=Array.isArray,Za=Object.assign,Ne="";function SR(e,t,n){var r=we.__s;we.__s=!0,Ya=we.__b,cn=we.diffed,vs=we.__r,Zr=we.unmount;var s=lR(Yr,null);s.__k=[e];try{var o=qt(e,t||Kl,!1,void 0,s,!1,n);return Qr(o)?o.join(Ne):o}catch(i){throw i.then?new Error('Use "renderToStringAsync" for suspenseful rendering.'):i}finally{we.__c&&we.__c(e,Jd),we.__s=r,Jd.length=0}}function Vd(e,t){var n,r=e.type,s=!0;return e.__c?(s=!1,(n=e.__c).state=n.__s):n=new r(e.props,t),e.__c=n,n.__v=e,n.props=e.props,n.context=t,n.__d=!0,n.state==null&&(n.state=Kl),n.__s==null&&(n.__s=n.state),r.getDerivedStateFromProps?n.state=Za({},n.state,r.getDerivedStateFromProps(n.props,n.state)):s&&n.componentWillMount?(n.componentWillMount(),n.state=n.__s!==n.state?n.__s:n.state):!s&&n.componentWillUpdate&&n.componentWillUpdate(),vs&&vs(e),n.render(n.props,n.state,t)}function qt(e,t,n,r,s,o,i){if(e==null||e===!0||e===!1||e===Ne)return Ne;var c=typeof e;if(c!="object")return c=="function"?Ne:c=="string"?fo(e):e+Ne;if(Qr(e)){var a,l=Ne;s.__k=e;for(var f=e.length,d=0;d<f;d++){var p=e[d];if(p!=null&&typeof p!="boolean"){var m,y=qt(p,t,n,r,s,o,i);typeof y=="string"?l+=y:(a||(a=new Array(f)),l&&a.push(l),l=Ne,Qr(y)?(m=a).push.apply(m,y):a.push(y))}}return a?(l&&a.push(l),a):l}if(e.constructor!==void 0)return Ne;e.__=s,Ya&&Ya(e);var E=e.type,g=e.props;if(typeof E=="function"){var b,S,w,O=t;if(E===Yr){if("tpl"in g){for(var v=Ne,k=0;k<g.tpl.length;k++)if(v+=g.tpl[k],g.exprs&&k<g.exprs.length){var $=g.exprs[k];if($==null)continue;typeof $!="object"||$.constructor!==void 0&&!Qr($)?v+=$:v+=qt($,t,n,r,e,o,i)}return v}if("UNSTABLE_comment"in g)return"<!--"+fo(g.UNSTABLE_comment)+"-->";S=g.children}else{if((b=E.contextType)!=null){var x=t[b.__c];O=x?x.props.value:b.__}var M=E.prototype&&typeof E.prototype.render=="function";if(M)S=Vd(e,O),w=e.__c;else{e.__c=w=bR(e,O);for(var q=0;w.__d&&q++<25;)w.__d=!1,vs&&vs(e),S=E.call(w,g,O);w.__d=!0}if(w.getChildContext!=null&&(t=Za({},t,w.getChildContext())),M&&we.errorBoundaries&&(E.getDerivedStateFromError||w.componentDidCatch)){S=S!=null&&S.type===Yr&&S.key==null&&S.props.tpl==null?S.props.children:S;try{return qt(S,t,n,r,e,o,i)}catch(ze){return E.getDerivedStateFromError&&(w.__s=E.getDerivedStateFromError(ze)),w.componentDidCatch&&w.componentDidCatch(ze,Kl),w.__d?(S=Vd(e,t),(w=e.__c).getChildContext!=null&&(t=Za({},t,w.getChildContext())),qt(S=S!=null&&S.type===Yr&&S.key==null&&S.props.tpl==null?S.props.children:S,t,n,r,e,o,i)):Ne}finally{cn&&cn(e),Zr&&Zr(e)}}}S=S!=null&&S.type===Yr&&S.key==null&&S.props.tpl==null?S.props.children:S;try{var D=qt(S,t,n,r,e,o,i);return cn&&cn(e),we.unmount&&we.unmount(e),D}catch(ze){if(i&&i.onError){var Z=i.onError(ze,e,function(Tb,xb){return qt(Tb,t,n,r,xb,o,i)});if(Z!==void 0)return Z;var Me=we.__e;return Me&&Me(ze,e),Ne}throw ze}}var re,Oe="<"+E,Y=Ne;for(var R in g){var G=g[R];if(typeof G!="function"||R==="class"||R==="className"){switch(R){case"children":re=G;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in g)continue;R="for";break;case"className":if("class"in g)continue;R="class";break;case"defaultChecked":R="checked";break;case"defaultSelected":R="selected";break;case"defaultValue":case"value":switch(R="value",E){case"textarea":re=G;continue;case"select":r=G;continue;case"option":r!=G||"selected"in g||(Oe+=" selected")}break;case"dangerouslySetInnerHTML":Y=G&&G.__html;continue;case"style":typeof G=="object"&&(G=_R(G));break;case"acceptCharset":R="accept-charset";break;case"httpEquiv":R="http-equiv";break;default:if(Ud.test(R))R=R.replace(Ud,"$1:$2").toLowerCase();else{if(Kd.test(R))continue;R[4]!=="-"&&!pR.has(R)||G==null?n?hR.test(R)&&(R=R==="panose1"?"panose-1":R.replace(/([A-Z])/g,"-$1").toLowerCase()):dR.test(R)&&(R=R.toLowerCase()):G+=Ne}}G!=null&&G!==!1&&(Oe=G===!0||G===Ne?Oe+" "+R:Oe+" "+R+'="'+(typeof G=="string"?fo(G):G+Ne)+'"')}}if(Kd.test(E))throw new Error(E+" is not a valid HTML tag name in "+Oe+">");if(Y||(typeof re=="string"?Y=fo(re):re!=null&&re!==!1&&re!==!0&&(Y=qt(re,t,E==="svg"||E!=="foreignObject"&&n,r,e,o,i))),cn&&cn(e),Zr&&Zr(e),!Y&&wR.has(E))return Oe+"/>";var $t="</"+E+">",Nr=Oe+">";return Qr(Y)?[Nr].concat(Y,[$t]):typeof Y!="string"?[Nr,Y,$t]:Nr+Y+$t}var wR=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),vR=SR;const wb=/https:\/\//,vb=["programming language","cloud computing","testing","framework","frontend","database","devops tool","collaboration tool","other"];class ER extends Ys("ProjectTechnology")({id:W,name:W,category:Ha(...vb),display:Ha("force","hide").pipe(kt),version:W.pipe(kt),url:W.pipe(kt)}){}class kR extends Ys("ProjectDetails")({order:q1,client:mt({name:W,description:W}).pipe(kt),title:W,stack:W.pipe(ct),tools:W.pipe(ct),roles:W.pipe(ct),achivements:mt({technical:W,human:W.pipe(kt)}).pipe(ct)}){}class OR extends Ys("EmploymentRecord")({position:W,workType:Ha("hybrid","on-site","remote"),companyName:W,companyDescription:W,website:W.pipe(mb(wb)),start:W,end:W.pipe(kt),location:mt({city:W,country:W,timezone:W}).pipe(X1),projects:kR.pipe(ct)}){get sortedProjects(){return[...this.projects].sort((t,n)=>n.order-t.order)}isMonthPast(t){const n=fs(V_().epochMillis),r=fs(qa(this.start).epochMillis);return ek(r)(n).pipe(YE)>t*30}}class $R extends Ys("Me")({name:W,coverLetter:mt({position:W,content:W.pipe(ct)}).pipe(kt),expertise:W.pipe(ct),location:W.pipe(kt),phone:W.pipe(kt),email:W,profiles:mt({url:W.pipe(mb(wb)),icon:W}).pipe(ct),expertSummary:W.pipe(ct)}){}class Eb extends Ys("ResumeObject")({$schema:W.pipe(kt),me:$R,technologies:ER.pipe(ct),employmentHistory:OR.pipe(ct)}){}var TR=0;function T(e,t,n,r,s,o){t||(t={});var i,c,a=t;if("ref"in a)for(c in a={},t)c=="ref"?i=t[c]:a[c]=t[c];var l={type:e,props:a,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--TR,__i:-1,__u:0,__source:s,__self:o};if(typeof e=="function"&&(i=e.defaultProps))for(c in i)a[c]===void 0&&(a[c]=i[c]);return we.vnode&&we.vnode(l),l}function xR(e){const t=e.me.coverLetter;return T("div",{children:[RR(e),t?T("div",{children:[T("div",{className:"section-header",children:T("span",{id:"label",children:[`Why I'm the Right Choice for "`,t.position,'"']})}),T("div",{className:"p-2 bg-so",children:t.content.map(n=>T("p",{dangerouslySetInnerHTML:{__html:n}}))})]}):null,T("div",{className:"section-header",children:T("span",{id:"label",children:"Summary"})}),T("div",{className:"bg-so p-2",children:e.me.expertSummary.map(n=>T("p",{dangerouslySetInnerHTML:{__html:n}}))}),T("div",{className:"section-header",children:T("span",{id:"label",children:"Skills"})}),T("div",{className:"flex flex-wrap gap-1",children:jR(e).map(([n,r])=>T("div",{className:"flex items-center gap-1",children:[T("span",{className:"uppercase font-medium",children:[n,":"]}),r.map((s,o)=>T("span",{className:"bg-so p-1 text-xs",children:s.technology.name},o))]},n))}),T("div",{className:"section-header pt-1",children:T("span",{id:"label",children:"Employment history"})}),T("div",{id:"employment",children:PR(e)})]})}function IR(e){var t;return T("div",{className:"flex gap-2 items-baseline",children:[T("span",{className:"text-2xl font-thin",children:"Software Engineer"}),T("span",{className:"text-base",children:["Expertise: ",(t=e.me)==null?void 0:t.expertise.join("/")]})]})}function MR(e){return T("div",{className:"flex text-sm",children:[T("span",{children:e.position}),T("span",{className:"font-extralight",children:["· ",e.location.city,", ",e.location.country," · ",e.workType]})]})}function AR(e){return T("span",{children:[T("a",{target:"_blank",className:"text-sky-600 font-medium",href:e.website,children:e.companyName})," · ",e.companyDescription]})}function NR(e){return T("span",{children:e.stack.map(t=>T("span",{className:"bg-so py-1 px-1 mr-1 text-sm",children:t}))})}function RR(e){return T("div",{id:"head",className:"pb-4",children:[T("div",{className:"text-4xl font-thin",children:e.me.name}),T("div",{className:"text-lg font-light",children:IR(e)}),T("div",{className:"flex gap-1.5 text-sm font-extralight",children:[T("span",{children:e.me.location}),T("div",{children:[T("span",{className:"fa-regular fa-envelope"}),T("a",{href:`mailto:${e.me.email}`,children:[" ",e.me.email]})]}),T("div",{children:[T("span",{className:"fa-solid fa-mobile-screen-button"}),T("a",{href:`tel:${e.me.phone}`,children:[" ",e.me.phone]})]})]}),T("div",{className:"pt-1",children:e.me.profiles.map(t=>{const n=`fa-${t.icon.split(" ").at(0)}`;return T("a",{class:"inline-block py-2 px-1",href:t.url,target:"_blank",rel:"noopener noreferrer",children:T("span",{className:`fa-brands fa-lg ${n}`,style:{color:t.icon.split(" ").at(1)}})})})})]})}function CR(e,t){let n="project no-break pb-3";return t||(n+=" border-b-1 border-gray-300 border-dashed mb-2"),T("div",{className:n,children:[T("div",{className:"flex",children:[T("div",{className:"mb-0.5",children:[T("span",{className:"font-medium",children:"Project: "}),T("span",{children:e.title})]}),T("div",{className:"ml-auto",children:[T("span",{className:"font-medium",children:"Roles: "}),T("span",{children:e.roles.join("/")})]})]}),T("span",{className:"font-medium",children:"Stack:"}),T("span",{children:NR(e)}),T("ul",{className:"list-disc pt-2 pl-10 text-sm",children:e.achivements.map(r=>T("li",{children:r.human??r.technical}))})]})}function PR(e){return T("div",{id:"employment",children:e.employmentHistory.map(t=>{const n=t.isMonthPast(60);let r="border-b-1 border-gray-300 mb-2 p-2";n&&(r+=" bg-neutral-100");const s=Oi(t.projects.flatMap(o=>o.roles),(o,i)=>o.toLowerCase()==i.toLocaleLowerCase()).join("/");return T("div",{className:r,children:[T("div",{className:"flex",children:[T("span",{className:"font-extralight text-sm",children:AR(t)}),T("span",{className:"ml-auto",children:FR(t)})]}),T("span",{className:"block",children:MR(t)}),n?T("div",{children:[T("span",{className:"font-medium",children:"Roles: "}),T("span",{children:s})]}):T("div",{className:"flex flex-col",children:t.sortedProjects.map((o,i)=>CR(o,i==t.projects.length-1))})]})})})}function FR(e){const t=qa(e.start),n=e.end?qa(e.end):V_(),r=l1(t,n),s=365.25*24*60*60*1e3,o=s/12;let i=Math.floor(r/s),c=Math.ceil(r%s/o);c===12&&(i=i+1,c=0);const a=Id(t,{month:"short",year:"numeric"}),l=Id(n,{month:"short",year:"numeric"});let f=`${c} mos`;i&&(f=`${i} yr ${f}`);const d=e.end?T("span",{children:[l," · ",f]}):T("span",{className:"font-medium",children:"now"});return T("span",{className:"font-light text-sm",children:[a," - ",d]})}function jR(e){var r;const t=(r=e.employmentHistory)==null?void 0:r.flatMap(s=>s.projects.flatMap(o=>[...o.stack,...o.tools].flatMap(i=>{var a;const c=(a=e.technologies)==null?void 0:a.find(l=>l.id==i);return!c||c.display=="hide"?[]:[{code:i,category:c.category,technology:c}]})));return t?_([...t,...e.technologies.filter(s=>s.display==="force").map(s=>({code:s.id,category:s.category,technology:s}))],Oi((s,o)=>s.code==o.code),c0(s=>s.technology.category),s=>Object.entries(s),n0(s=>vb.findIndex(o=>o==s[0]),Sm)):(console.warn("Skill categories not found"),[])}const Qa=e=>{try{return vR(xR(g1(Eb)(e)))}catch(t){return console.log("render error",t),""}},LR=async()=>{const e=await fetch("./john-doe.jsonc").then(n=>n.text()).then(n=>Ul(n,!0));return delete e.$schema,G_(Eb)(e)},Ul=(e,t=!1)=>{if(e)try{return JSON.parse(t?VR(qR(e)):e)}catch{}};function DR(e,t){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}}function KR(e){return new URLSearchParams(location.search).get(e)}function UR(e,t){const n=new URL(location.href);n.searchParams.set(e,t),window.history.replaceState(null,"",n)}const BR=/("(?:\\.|[^"\\])*")|(?:\/\*(?:[\s\S]*?)\*\/)|(\/\/.*)/g;function qR(e){return e.replace(BR,(t,n)=>n!==void 0?n:"")}const JR=/,\s*([\]}])/g;function VR(e){return e.replace(JR,"$1")}const HR=()=>{if(!("monaco_loader"in window)||typeof window.monaco_loader!="object"||window.monaco_loader==null){console.warn("monaco loader is not available");return}return window.monaco_loader},WR=()=>{const e=HR();if(e)return e.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs"}}),e.init()},zR=async(e,t)=>{const n=document.getElementById("code-editor");if(!n){console.warn("code-editor node not found");return}return e.editor.create(n,{model:t,contextmenu:!1,minimap:{enabled:!1}})},GR=async e=>({model:e.editor.createModel("","json")}),YR=(e,t,n)=>{const s=e.editor.getModelMarkers({resource:t.uri}).find(o=>n.has(o.severity.valueOf()));return s?(console.log("editor code error",s),!0):!1},ZR=async()=>{const e=await WR();if(!e)return;const t=await GR(e),n=await zR(e,t.model);if(n)return{editor:n,monaco:e,textModel:t}},kb="http://json-schema.org/draft-07/schema#",Ob={ResumeObject:{type:"object",required:["me","technologies","employmentHistory"],properties:{$schema:{$ref:"#/$defs/NonEmptyString"},me:{$ref:"#/$defs/Me"},technologies:{type:"array",minItems:1,items:{$ref:"#/$defs/ProjectTechnology"}},employmentHistory:{type:"array",minItems:1,items:{$ref:"#/$defs/EmploymentRecord"}}},additionalProperties:!1},NonEmptyString:{type:"string",description:"a non empty string",title:"nonEmptyString",minLength:1},Me:{type:"object",required:["name","expertise","email","profiles","expertSummary"],properties:{name:{$ref:"#/$defs/NonEmptyString"},coverLetter:{type:"object",required:["position","content"],properties:{position:{$ref:"#/$defs/NonEmptyString"},content:{type:"array",minItems:1,items:{$ref:"#/$defs/NonEmptyString"}}},additionalProperties:!1},expertise:{type:"array",minItems:1,items:{$ref:"#/$defs/NonEmptyString"}},location:{$ref:"#/$defs/NonEmptyString"},phone:{$ref:"#/$defs/NonEmptyString"},email:{$ref:"#/$defs/NonEmptyString"},profiles:{type:"array",minItems:1,items:{type:"object",required:["url","icon"],properties:{url:{$ref:"#/$defs/NonEmptyString",description:"a string matching the pattern https:\\/\\/",pattern:"https:\\/\\/"},icon:{$ref:"#/$defs/NonEmptyString"}},additionalProperties:!1}},expertSummary:{type:"array",minItems:1,items:{$ref:"#/$defs/NonEmptyString"}}},additionalProperties:!1},ProjectTechnology:{type:"object",required:["id","name","category"],properties:{id:{$ref:"#/$defs/NonEmptyString"},name:{$ref:"#/$defs/NonEmptyString"},category:{type:"string",enum:["programming language","framework","cloud computing","database","devops tool","testing","collaboration tool","frontend","other"]},display:{type:"string",enum:["force","hide"]},version:{$ref:"#/$defs/NonEmptyString"},url:{$ref:"#/$defs/NonEmptyString"}},additionalProperties:!1},EmploymentRecord:{type:"object",required:["position","workType","companyName","companyDescription","website","start","location","projects"],properties:{position:{$ref:"#/$defs/NonEmptyString"},workType:{type:"string",enum:["hybrid","on-site","remote"]},companyName:{$ref:"#/$defs/NonEmptyString"},companyDescription:{$ref:"#/$defs/NonEmptyString"},website:{$ref:"#/$defs/NonEmptyString",description:"a string matching the pattern https:\\/\\/",pattern:"https:\\/\\/"},start:{$ref:"#/$defs/NonEmptyString"},end:{$ref:"#/$defs/NonEmptyString"},location:{type:"object",required:[],properties:{city:{$ref:"#/$defs/NonEmptyString"},country:{$ref:"#/$defs/NonEmptyString"},timezone:{$ref:"#/$defs/NonEmptyString"}},additionalProperties:!1},projects:{type:"array",minItems:1,items:{$ref:"#/$defs/ProjectDetails"}}},additionalProperties:!1},ProjectDetails:{type:"object",required:["order","title","stack","tools","roles","achivements"],properties:{order:{type:"number"},client:{type:"object",required:["name","description"],properties:{name:{$ref:"#/$defs/NonEmptyString"},description:{$ref:"#/$defs/NonEmptyString"}},additionalProperties:!1},title:{$ref:"#/$defs/NonEmptyString"},stack:{type:"array",minItems:1,items:{$ref:"#/$defs/NonEmptyString"}},tools:{type:"array",minItems:1,items:{$ref:"#/$defs/NonEmptyString"}},roles:{type:"array",minItems:1,items:{$ref:"#/$defs/NonEmptyString"}},achivements:{type:"array",minItems:1,items:{type:"object",required:["technical"],properties:{technical:{$ref:"#/$defs/NonEmptyString"},human:{$ref:"#/$defs/NonEmptyString"}},additionalProperties:!1}}},additionalProperties:!1}},$b="#/$defs/ResumeObject",QR={$schema:kb,$defs:Ob,$ref:$b},XR=Object.freeze(Object.defineProperty({__proto__:null,$defs:Ob,$ref:$b,$schema:kb,default:QR},Symbol.toStringTag,{value:"Module"}));window.Alpine=An;eC();An.store("modes",()=>[{id:"editor",label:"Editor"},{id:"view",label:"View"}]);An.store("sections",()=>[{id:"all",label:"All together"},{id:"me",label:"Me"},{id:"employmentHistory",label:"My Employment"},{id:"technologies",label:"Tecnologies"}]);const z=An.reactive({resumeObject:{},resumeHtml:"<h1>My Resume</h1>",editorSection:"me",mode:"view",editorHasError:!1,availableResumes:[],currentResume:KR("resume")??"example"});An.data("state",()=>z);An.start();async function Hd(){if(z.availableResumes=[],Object.keys(localStorage).length==0){const e=await LR();localStorage.setItem("example",JSON.stringify(e,void 0,2))}for(const e of Object.keys(localStorage))localStorage.getItem(e)&&z.availableResumes.push({id:e,name:e})}function ho(){const e=localStorage.getItem(z.currentResume);if(!e){console.warn("No resume to load");return}const t=Ul(e,!0);if(!t){console.warn("Invalid json of resume");return}z.resumeObject=t,z.resumeHtml=Qa(t),UR("resume",z.currentResume)}async function eC(){const e=await ZR();if(await Hd(),!e){console.warn("can not load editor");return}ho();const t=s=>e.monaco.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!0,trailingCommas:"ignore",schemas:[{uri:"resume.json",fileMatch:["*"],schema:{...XR,$ref:s}}]}),n=()=>{if(z.editorSection=="all")delete z.resumeObject.$schema,e.textModel.model.setValue(JSON.stringify(z.resumeObject,void 0,2)),t("#/$defs/ResumeObject");else{const s=z.resumeObject[z.editorSection]??{};e.textModel.model.setValue(JSON.stringify(s,void 0,2)),t(`#/$defs/ResumeObject/properties/${z.editorSection}`)}},r=()=>{const s=Ul(e.textModel.model.getValue(),!0);if(!s){console.log("invalid json");return}z.editorSection=="all"?z.resumeObject=s:z.resumeObject[z.editorSection]=s,localStorage.setItem(z.currentResume,JSON.stringify(z.resumeObject)),z.resumeHtml=Qa(z.resumeObject)};e.textModel.model.onDidChangeContent(DR(r,300)),document.addEventListener("section-changed",()=>{n(),e.editor.setScrollTop(0),e.editor.setScrollLeft(0),z.editorSection=="all"?e.editor.updateOptions({minimap:{enabled:!0}}):e.editor.updateOptions({minimap:{enabled:!1}})}),window.addEventListener("init-resume",()=>{ho(),n()}),window.addEventListener("save",()=>{const s=window.prompt("Enter name of your resume","simple");s&&(localStorage.setItem(s,JSON.stringify(z.resumeObject)),z.availableResumes.push({id:s,name:s}),z.currentResume=s,ho(),n())}),window.addEventListener("delete",()=>{localStorage.removeItem(z.currentResume),Hd();const s=z.availableResumes.at(-1);s&&(z.currentResume=s.id),ho()}),window.addEventListener("resize",()=>{e.editor.layout()}),document.addEventListener("mode-was-changed",()=>{An.nextTick(()=>{e.editor.layout()})}),e.monaco.editor.onDidChangeMarkers(()=>{const s=YR(e.monaco,e.textModel.model,new Set([4,8]));console.log("markers changed",{hasErrors:s}),z.editorHasError=s,s||(z.resumeHtml=Qa(z.resumeObject))}),n()}
