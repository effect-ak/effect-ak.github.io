var nb=Object.defineProperty;var Dl=e=>{throw TypeError(e)};var rb=(e,t,n)=>t in e?nb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var u=(e,t,n)=>rb(e,typeof t!="symbol"?t+"":t,n),Ul=(e,t,n)=>t.has(e)||Dl("Cannot "+n);var Bl=(e,t,n)=>(Ul(e,t,"read from private field"),n?n.call(e):t.get(e)),ql=(e,t,n)=>t.has(e)?Dl("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Jl=(e,t,n,r)=>(Ul(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Mc=!1,Rc=!1,pn=[],Cc=-1;function sb(e){ob(e)}function ob(e){pn.includes(e)||pn.push(e),cb()}function ib(e){let t=pn.indexOf(e);t!==-1&&t>Cc&&pn.splice(t,1)}function cb(){!Rc&&!Mc&&(Mc=!0,queueMicrotask(ab))}function ab(){Mc=!1,Rc=!0;for(let e=0;e<pn.length;e++)pn[e](),Cc=e;pn.length=0,Cc=-1,Rc=!1}var _r,Rn,yr,Rh,Nc=!0;function ub(e){Nc=!1,e(),Nc=!0}function lb(e){_r=e.reactive,yr=e.release,Rn=t=>e.effect(t,{scheduler:n=>{Nc?sb(n):n()}}),Rh=e.raw}function Vl(e){Rn=e}function fb(e){let t=()=>{};return[r=>{let s=Rn(r);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(o=>o())}),e._x_effects.add(s),t=()=>{s!==void 0&&(e._x_effects.delete(s),yr(s))},s},()=>{t()}]}function Ch(e,t){let n=!0,r,s=Rn(()=>{let o=e();JSON.stringify(o),n?r=o:queueMicrotask(()=>{t(o,r),r=o}),n=!1});return()=>yr(s)}var Nh=[],Fh=[],Ph=[];function db(e){Ph.push(e)}function za(e,t){typeof t=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(t)):(t=e,Fh.push(t))}function jh(e){Nh.push(e)}function Lh(e,t,n){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[t]||(e._x_attributeCleanups[t]=[]),e._x_attributeCleanups[t].push(n)}function Kh(e,t){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach(([n,r])=>{(t===void 0||t.includes(n))&&(r.forEach(s=>s()),delete e._x_attributeCleanups[n])})}function hb(e){var t,n;for((t=e._x_effects)==null||t.forEach(ib);(n=e._x_cleanups)!=null&&n.length;)e._x_cleanups.pop()()}var Ya=new MutationObserver(eu),Za=!1;function Qa(){Ya.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Za=!0}function Dh(){pb(),Ya.disconnect(),Za=!1}var Mr=[];function pb(){let e=Ya.takeRecords();Mr.push(()=>e.length>0&&eu(e));let t=Mr.length;queueMicrotask(()=>{if(Mr.length===t)for(;Mr.length>0;)Mr.shift()()})}function re(e){if(!Za)return e();Dh();let t=e();return Qa(),t}var Xa=!1,Io=[];function mb(){Xa=!0}function gb(){Xa=!1,eu(Io),Io=[]}function eu(e){if(Xa){Io=Io.concat(e);return}let t=[],n=new Set,r=new Map,s=new Map;for(let o=0;o<e.length;o++)if(!e[o].target._x_ignoreMutationObserver&&(e[o].type==="childList"&&(e[o].removedNodes.forEach(i=>{i.nodeType===1&&i._x_marker&&n.add(i)}),e[o].addedNodes.forEach(i=>{if(i.nodeType===1){if(n.has(i)){n.delete(i);return}i._x_marker||t.push(i)}})),e[o].type==="attributes")){let i=e[o].target,c=e[o].attributeName,a=e[o].oldValue,l=()=>{r.has(i)||r.set(i,[]),r.get(i).push({name:c,value:i.getAttribute(c)})},f=()=>{s.has(i)||s.set(i,[]),s.get(i).push(c)};i.hasAttribute(c)&&a===null?l():i.hasAttribute(c)?(f(),l()):f()}s.forEach((o,i)=>{Kh(i,o)}),r.forEach((o,i)=>{Nh.forEach(c=>c(i,o))});for(let o of n)t.some(i=>i.contains(o))||Fh.forEach(i=>i(o));for(let o of t)o.isConnected&&Ph.forEach(i=>i(o));t=null,n=null,r=null,s=null}function Uh(e){return ws(Zn(e))}function Ss(e,t,n){return e._x_dataStack=[t,...Zn(n||e)],()=>{e._x_dataStack=e._x_dataStack.filter(r=>r!==t)}}function Zn(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?Zn(e.host):e.parentNode?Zn(e.parentNode):[]}function ws(e){return new Proxy({objects:e},_b)}var _b={ownKeys({objects:e}){return Array.from(new Set(e.flatMap(t=>Object.keys(t))))},has({objects:e},t){return t==Symbol.unscopables?!1:e.some(n=>Object.prototype.hasOwnProperty.call(n,t)||Reflect.has(n,t))},get({objects:e},t,n){return t=="toJSON"?yb:Reflect.get(e.find(r=>Reflect.has(r,t))||{},t,n)},set({objects:e},t,n,r){const s=e.find(i=>Object.prototype.hasOwnProperty.call(i,t))||e[e.length-1],o=Object.getOwnPropertyDescriptor(s,t);return o!=null&&o.set&&(o!=null&&o.get)?o.set.call(r,n)||!0:Reflect.set(s,t,n)}};function yb(){return Reflect.ownKeys(this).reduce((t,n)=>(t[n]=Reflect.get(this,n),t),{})}function Bh(e){let t=r=>typeof r=="object"&&!Array.isArray(r)&&r!==null,n=(r,s="")=>{Object.entries(Object.getOwnPropertyDescriptors(r)).forEach(([o,{value:i,enumerable:c}])=>{if(c===!1||i===void 0||typeof i=="object"&&i!==null&&i.__v_skip)return;let a=s===""?o:`${s}.${o}`;typeof i=="object"&&i!==null&&i._x_interceptor?r[o]=i.initialize(e,a,o):t(i)&&i!==r&&!(i instanceof Element)&&n(i,a)})};return n(e)}function qh(e,t=()=>{}){let n={initialValue:void 0,_x_interceptor:!0,initialize(r,s,o){return e(this.initialValue,()=>bb(r,s),i=>Fc(r,s,i),s,o)}};return t(n),r=>{if(typeof r=="object"&&r!==null&&r._x_interceptor){let s=n.initialize.bind(n);n.initialize=(o,i,c)=>{let a=r.initialize(o,i,c);return n.initialValue=a,s(o,i,c)}}else n.initialValue=r;return n}}function bb(e,t){return t.split(".").reduce((n,r)=>n[r],e)}function Fc(e,t,n){if(typeof t=="string"&&(t=t.split(".")),t.length===1)e[t[0]]=n;else{if(t.length===0)throw error;return e[t[0]]||(e[t[0]]={}),Fc(e[t[0]],t.slice(1),n)}}var Jh={};function mt(e,t){Jh[e]=t}function Pc(e,t){let n=Sb(t);return Object.entries(Jh).forEach(([r,s])=>{Object.defineProperty(e,`$${r}`,{get(){return s(t,n)},enumerable:!1})}),e}function Sb(e){let[t,n]=Yh(e),r={interceptor:qh,...t};return za(e,n),r}function wb(e,t,n,...r){try{return n(...r)}catch(s){rs(s,e,t)}}function rs(e,t,n=void 0){e=Object.assign(e??{message:"No error message given."},{el:t,expression:n}),console.warn(`Alpine Expression Error: ${e.message}

${n?'Expression: "'+n+`"

`:""}`,t),setTimeout(()=>{throw e},0)}var fo=!0;function Vh(e){let t=fo;fo=!1;let n=e();return fo=t,n}function mn(e,t,n={}){let r;return Re(e,t)(s=>r=s,n),r}function Re(...e){return Hh(...e)}var Hh=Wh;function vb(e){Hh=e}function Wh(e,t){let n={};Pc(n,e);let r=[n,...Zn(e)],s=typeof t=="function"?kb(r,t):Eb(r,t,e);return wb.bind(null,e,t,s)}function kb(e,t){return(n=()=>{},{scope:r={},params:s=[]}={})=>{let o=t.apply(ws([r,...e]),s);Ao(n,o)}}var ec={};function Ob(e,t){if(ec[e])return ec[e];let n=Object.getPrototypeOf(async function(){}).constructor,r=/^[\n\s]*if.*\(.*\)/.test(e.trim())||/^(let|const)\s/.test(e.trim())?`(async()=>{ ${e} })()`:e,o=(()=>{try{let i=new n(["__self","scope"],`with (scope) { __self.result = ${r} }; __self.finished = true; return __self.result;`);return Object.defineProperty(i,"name",{value:`[Alpine] ${e}`}),i}catch(i){return rs(i,t,e),Promise.resolve()}})();return ec[e]=o,o}function Eb(e,t,n){let r=Ob(t,n);return(s=()=>{},{scope:o={},params:i=[]}={})=>{r.result=void 0,r.finished=!1;let c=ws([o,...e]);if(typeof r=="function"){let a=r(r,c).catch(l=>rs(l,n,t));r.finished?(Ao(s,r.result,c,i,n),r.result=void 0):a.then(l=>{Ao(s,l,c,i,n)}).catch(l=>rs(l,n,t)).finally(()=>r.result=void 0)}}}function Ao(e,t,n,r,s){if(fo&&typeof t=="function"){let o=t.apply(n,r);o instanceof Promise?o.then(i=>Ao(e,i,n,r)).catch(i=>rs(i,s,t)):e(o)}else typeof t=="object"&&t instanceof Promise?t.then(o=>e(o)):e(t)}var tu="x-";function br(e=""){return tu+e}function Tb(e){tu=e}var Mo={};function pe(e,t){return Mo[e]=t,{before(n){if(!Mo[n]){console.warn(String.raw`Cannot find directive \`${n}\`. \`${e}\` will use the default order of execution`);return}const r=ln.indexOf(n);ln.splice(r>=0?r:ln.indexOf("DEFAULT"),0,e)}}}function xb(e){return Object.keys(Mo).includes(e)}function nu(e,t,n){if(t=Array.from(t),e._x_virtualDirectives){let o=Object.entries(e._x_virtualDirectives).map(([c,a])=>({name:c,value:a})),i=Gh(o);o=o.map(c=>i.find(a=>a.name===c.name)?{name:`x-bind:${c.name}`,value:`"${c.value}"`}:c),t=t.concat(o)}let r={};return t.map(Xh((o,i)=>r[o]=i)).filter(tp).map(Ab(r,n)).sort(Mb).map(o=>Ib(e,o))}function Gh(e){return Array.from(e).map(Xh()).filter(t=>!tp(t))}var jc=!1,Ur=new Map,zh=Symbol();function $b(e){jc=!0;let t=Symbol();zh=t,Ur.set(t,[]);let n=()=>{for(;Ur.get(t).length;)Ur.get(t).shift()();Ur.delete(t)},r=()=>{jc=!1,n()};e(n),r()}function Yh(e){let t=[],n=c=>t.push(c),[r,s]=fb(e);return t.push(s),[{Alpine:vs,effect:r,cleanup:n,evaluateLater:Re.bind(Re,e),evaluate:mn.bind(mn,e)},()=>t.forEach(c=>c())]}function Ib(e,t){let n=()=>{},r=Mo[t.type]||n,[s,o]=Yh(e);Lh(e,t.original,o);let i=()=>{e._x_ignore||e._x_ignoreSelf||(r.inline&&r.inline(e,t,s),r=r.bind(r,e,t,s),jc?Ur.get(zh).push(r):r())};return i.runCleanups=o,i}var Zh=(e,t)=>({name:n,value:r})=>(n.startsWith(e)&&(n=n.replace(e,t)),{name:n,value:r}),Qh=e=>e;function Xh(e=()=>{}){return({name:t,value:n})=>{let{name:r,value:s}=ep.reduce((o,i)=>i(o),{name:t,value:n});return r!==t&&e(r,t),{name:r,value:s}}}var ep=[];function ru(e){ep.push(e)}function tp({name:e}){return np().test(e)}var np=()=>new RegExp(`^${tu}([^:^.]+)\\b`);function Ab(e,t){return({name:n,value:r})=>{let s=n.match(np()),o=n.match(/:([a-zA-Z0-9\-_:]+)/),i=n.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],c=t||e[n]||n;return{type:s?s[1]:null,value:o?o[1]:null,modifiers:i.map(a=>a.replace(".","")),expression:r,original:c}}}var Lc="DEFAULT",ln=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Lc,"teleport"];function Mb(e,t){let n=ln.indexOf(e.type)===-1?Lc:e.type,r=ln.indexOf(t.type)===-1?Lc:t.type;return ln.indexOf(n)-ln.indexOf(r)}function zr(e,t,n={}){e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0,cancelable:!0}))}function vn(e,t){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(s=>vn(s,t));return}let n=!1;if(t(e,()=>n=!0),n)return;let r=e.firstElementChild;for(;r;)vn(r,t),r=r.nextElementSibling}function Ze(e,...t){console.warn(`Alpine Warning: ${e}`,...t)}var Hl=!1;function Rb(){Hl&&Ze("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Hl=!0,document.body||Ze("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),zr(document,"alpine:init"),zr(document,"alpine:initializing"),Qa(),db(t=>Rt(t,vn)),za(t=>wr(t)),jh((t,n)=>{nu(t,n).forEach(r=>r())});let e=t=>!ai(t.parentElement,!0);Array.from(document.querySelectorAll(op().join(","))).filter(e).forEach(t=>{Rt(t)}),zr(document,"alpine:initialized"),setTimeout(()=>{Pb()})}var su=[],rp=[];function sp(){return su.map(e=>e())}function op(){return su.concat(rp).map(e=>e())}function ip(e){su.push(e)}function cp(e){rp.push(e)}function ai(e,t=!1){return Sr(e,n=>{if((t?op():sp()).some(s=>n.matches(s)))return!0})}function Sr(e,t){if(e){if(t(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),!!e.parentElement)return Sr(e.parentElement,t)}}function Cb(e){return sp().some(t=>e.matches(t))}var ap=[];function Nb(e){ap.push(e)}var Fb=1;function Rt(e,t=vn,n=()=>{}){Sr(e,r=>r._x_ignore)||$b(()=>{t(e,(r,s)=>{r._x_marker||(n(r,s),ap.forEach(o=>o(r,s)),nu(r,r.attributes).forEach(o=>o()),r._x_ignore||(r._x_marker=Fb++),r._x_ignore&&s())})})}function wr(e,t=vn){t(e,n=>{hb(n),Kh(n),delete n._x_marker})}function Pb(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,n,r])=>{xb(n)||r.some(s=>{if(document.querySelector(s))return Ze(`found "${s}", but missing ${t} plugin`),!0})})}var Kc=[],ou=!1;function iu(e=()=>{}){return queueMicrotask(()=>{ou||setTimeout(()=>{Dc()})}),new Promise(t=>{Kc.push(()=>{e(),t()})})}function Dc(){for(ou=!1;Kc.length;)Kc.shift()()}function jb(){ou=!0}function cu(e,t){return Array.isArray(t)?Wl(e,t.join(" ")):typeof t=="object"&&t!==null?Lb(e,t):typeof t=="function"?cu(e,t()):Wl(e,t)}function Wl(e,t){let n=s=>s.split(" ").filter(o=>!e.classList.contains(o)).filter(Boolean),r=s=>(e.classList.add(...s),()=>{e.classList.remove(...s)});return t=t===!0?t="":t||"",r(n(t))}function Lb(e,t){let n=c=>c.split(" ").filter(Boolean),r=Object.entries(t).flatMap(([c,a])=>a?n(c):!1).filter(Boolean),s=Object.entries(t).flatMap(([c,a])=>a?!1:n(c)).filter(Boolean),o=[],i=[];return s.forEach(c=>{e.classList.contains(c)&&(e.classList.remove(c),i.push(c))}),r.forEach(c=>{e.classList.contains(c)||(e.classList.add(c),o.push(c))}),()=>{i.forEach(c=>e.classList.add(c)),o.forEach(c=>e.classList.remove(c))}}function ui(e,t){return typeof t=="object"&&t!==null?Kb(e,t):Db(e,t)}function Kb(e,t){let n={};return Object.entries(t).forEach(([r,s])=>{n[r]=e.style[r],r.startsWith("--")||(r=Ub(r)),e.style.setProperty(r,s)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{ui(e,n)}}function Db(e,t){let n=e.getAttribute("style",t);return e.setAttribute("style",t),()=>{e.setAttribute("style",n||"")}}function Ub(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Uc(e,t=()=>{}){let n=!1;return function(){n?t.apply(this,arguments):(n=!0,e.apply(this,arguments))}}pe("transition",(e,{value:t,modifiers:n,expression:r},{evaluate:s})=>{typeof r=="function"&&(r=s(r)),r!==!1&&(!r||typeof r=="boolean"?qb(e,n,t):Bb(e,r,t))});function Bb(e,t,n){up(e,cu,""),{enter:s=>{e._x_transition.enter.during=s},"enter-start":s=>{e._x_transition.enter.start=s},"enter-end":s=>{e._x_transition.enter.end=s},leave:s=>{e._x_transition.leave.during=s},"leave-start":s=>{e._x_transition.leave.start=s},"leave-end":s=>{e._x_transition.leave.end=s}}[n](t)}function qb(e,t,n){up(e,ui);let r=!t.includes("in")&&!t.includes("out")&&!n,s=r||t.includes("in")||["enter"].includes(n),o=r||t.includes("out")||["leave"].includes(n);t.includes("in")&&!r&&(t=t.filter((b,S)=>S<t.indexOf("out"))),t.includes("out")&&!r&&(t=t.filter((b,S)=>S>t.indexOf("out")));let i=!t.includes("opacity")&&!t.includes("scale"),c=i||t.includes("opacity"),a=i||t.includes("scale"),l=c?0:1,f=a?Rr(t,"scale",95)/100:1,d=Rr(t,"delay",0)/1e3,p=Rr(t,"origin","center"),m="opacity, transform",_=Rr(t,"duration",150)/1e3,k=Rr(t,"duration",75)/1e3,g="cubic-bezier(0.4, 0.0, 0.2, 1)";s&&(e._x_transition.enter.during={transformOrigin:p,transitionDelay:`${d}s`,transitionProperty:m,transitionDuration:`${_}s`,transitionTimingFunction:g},e._x_transition.enter.start={opacity:l,transform:`scale(${f})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),o&&(e._x_transition.leave.during={transformOrigin:p,transitionDelay:`${d}s`,transitionProperty:m,transitionDuration:`${k}s`,transitionTimingFunction:g},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:l,transform:`scale(${f})`})}function up(e,t,n={}){e._x_transition||(e._x_transition={enter:{during:n,start:n,end:n},leave:{during:n,start:n,end:n},in(r=()=>{},s=()=>{}){Bc(e,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},r,s)},out(r=()=>{},s=()=>{}){Bc(e,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},r,s)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,t,n,r){const s=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let o=()=>s(n);if(t){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(n):o():e._x_transition?e._x_transition.in(n):o();return}e._x_hidePromise=e._x_transition?new Promise((i,c)=>{e._x_transition.out(()=>{},()=>i(r)),e._x_transitioning&&e._x_transitioning.beforeCancel(()=>c({isFromCancelledTransition:!0}))}):Promise.resolve(r),queueMicrotask(()=>{let i=lp(e);i?(i._x_hideChildren||(i._x_hideChildren=[]),i._x_hideChildren.push(e)):s(()=>{let c=a=>{let l=Promise.all([a._x_hidePromise,...(a._x_hideChildren||[]).map(c)]).then(([f])=>f==null?void 0:f());return delete a._x_hidePromise,delete a._x_hideChildren,l};c(e).catch(a=>{if(!a.isFromCancelledTransition)throw a})})})};function lp(e){let t=e.parentNode;if(t)return t._x_hidePromise?t:lp(t)}function Bc(e,t,{during:n,start:r,end:s}={},o=()=>{},i=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(n).length===0&&Object.keys(r).length===0&&Object.keys(s).length===0){o(),i();return}let c,a,l;Jb(e,{start(){c=t(e,r)},during(){a=t(e,n)},before:o,end(){c(),l=t(e,s)},after:i,cleanup(){a(),l()}})}function Jb(e,t){let n,r,s,o=Uc(()=>{re(()=>{n=!0,r||t.before(),s||(t.end(),Dc()),t.after(),e.isConnected&&t.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(i){this.beforeCancels.push(i)},cancel:Uc(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();o()}),finish:o},re(()=>{t.start(),t.during()}),jb(),requestAnimationFrame(()=>{if(n)return;let i=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,c=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;i===0&&(i=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),re(()=>{t.before()}),r=!0,requestAnimationFrame(()=>{n||(re(()=>{t.end()}),Dc(),setTimeout(e._x_transitioning.finish,i+c),s=!0)})})}function Rr(e,t,n){if(e.indexOf(t)===-1)return n;const r=e[e.indexOf(t)+1];if(!r||t==="scale"&&isNaN(r))return n;if(t==="duration"||t==="delay"){let s=r.match(/([0-9]+)ms/);if(s)return s[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[r,e[e.indexOf(t)+2]].join(" "):r}var Ht=!1;function Qt(e,t=()=>{}){return(...n)=>Ht?t(...n):e(...n)}function Vb(e){return(...t)=>Ht&&e(...t)}var fp=[];function li(e){fp.push(e)}function Hb(e,t){fp.forEach(n=>n(e,t)),Ht=!0,dp(()=>{Rt(t,(n,r)=>{r(n,()=>{})})}),Ht=!1}var qc=!1;function Wb(e,t){t._x_dataStack||(t._x_dataStack=e._x_dataStack),Ht=!0,qc=!0,dp(()=>{Gb(t)}),Ht=!1,qc=!1}function Gb(e){let t=!1;Rt(e,(r,s)=>{vn(r,(o,i)=>{if(t&&Cb(o))return i();t=!0,s(o,i)})})}function dp(e){let t=Rn;Vl((n,r)=>{let s=t(n);return yr(s),()=>{}}),e(),Vl(t)}function hp(e,t,n,r=[]){switch(e._x_bindings||(e._x_bindings=_r({})),e._x_bindings[t]=n,t=r.includes("camel")?nS(t):t,t){case"value":zb(e,n);break;case"style":Zb(e,n);break;case"class":Yb(e,n);break;case"selected":case"checked":Qb(e,t,n);break;default:pp(e,t,n);break}}function zb(e,t){if(_p(e))e.attributes.value===void 0&&(e.value=t),window.fromModel&&(typeof t=="boolean"?e.checked=ho(e.value)===t:e.checked=Gl(e.value,t));else if(au(e))Number.isInteger(t)?e.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?e.value=String(t):Array.isArray(t)?e.checked=t.some(n=>Gl(n,e.value)):e.checked=!!t;else if(e.tagName==="SELECT")tS(e,t);else{if(e.value===t)return;e.value=t===void 0?"":t}}function Yb(e,t){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=cu(e,t)}function Zb(e,t){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=ui(e,t)}function Qb(e,t,n){pp(e,t,n),eS(e,t,n)}function pp(e,t,n){[null,void 0,!1].includes(n)&&sS(t)?e.removeAttribute(t):(mp(t)&&(n=t),Xb(e,t,n))}function Xb(e,t,n){e.getAttribute(t)!=n&&e.setAttribute(t,n)}function eS(e,t,n){e[t]!==n&&(e[t]=n)}function tS(e,t){const n=[].concat(t).map(r=>r+"");Array.from(e.options).forEach(r=>{r.selected=n.includes(r.value)})}function nS(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}function Gl(e,t){return e==t}function ho(e){return[1,"1","true","on","yes",!0].includes(e)?!0:[0,"0","false","off","no",!1].includes(e)?!1:e?!!e:null}var rS=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function mp(e){return rS.has(e)}function sS(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function oS(e,t,n){return e._x_bindings&&e._x_bindings[t]!==void 0?e._x_bindings[t]:gp(e,t,n)}function iS(e,t,n,r=!0){if(e._x_bindings&&e._x_bindings[t]!==void 0)return e._x_bindings[t];if(e._x_inlineBindings&&e._x_inlineBindings[t]!==void 0){let s=e._x_inlineBindings[t];return s.extract=r,Vh(()=>mn(e,s.expression))}return gp(e,t,n)}function gp(e,t,n){let r=e.getAttribute(t);return r===null?typeof n=="function"?n():n:r===""?!0:mp(t)?!![t,"true"].includes(r):r}function au(e){return e.type==="checkbox"||e.localName==="ui-checkbox"||e.localName==="ui-switch"}function _p(e){return e.type==="radio"||e.localName==="ui-radio"}function yp(e,t){var n;return function(){var r=this,s=arguments,o=function(){n=null,e.apply(r,s)};clearTimeout(n),n=setTimeout(o,t)}}function bp(e,t){let n;return function(){let r=this,s=arguments;n||(e.apply(r,s),n=!0,setTimeout(()=>n=!1,t))}}function Sp({get:e,set:t},{get:n,set:r}){let s=!0,o,i=Rn(()=>{let c=e(),a=n();if(s)r(tc(c)),s=!1;else{let l=JSON.stringify(c),f=JSON.stringify(a);l!==o?r(tc(c)):l!==f&&t(tc(a))}o=JSON.stringify(e()),JSON.stringify(n())});return()=>{yr(i)}}function tc(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}function cS(e){(Array.isArray(e)?e:[e]).forEach(n=>n(vs))}var on={},zl=!1;function aS(e,t){if(zl||(on=_r(on),zl=!0),t===void 0)return on[e];on[e]=t,Bh(on[e]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&on[e].init()}function uS(){return on}var wp={};function lS(e,t){let n=typeof t!="function"?()=>t:t;return e instanceof Element?vp(e,n()):(wp[e]=n,()=>{})}function fS(e){return Object.entries(wp).forEach(([t,n])=>{Object.defineProperty(e,t,{get(){return(...r)=>n(...r)}})}),e}function vp(e,t,n){let r=[];for(;r.length;)r.pop()();let s=Object.entries(t).map(([i,c])=>({name:i,value:c})),o=Gh(s);return s=s.map(i=>o.find(c=>c.name===i.name)?{name:`x-bind:${i.name}`,value:`"${i.value}"`}:i),nu(e,s,n).map(i=>{r.push(i.runCleanups),i()}),()=>{for(;r.length;)r.pop()()}}var kp={};function dS(e,t){kp[e]=t}function hS(e,t){return Object.entries(kp).forEach(([n,r])=>{Object.defineProperty(e,n,{get(){return(...s)=>r.bind(t)(...s)},enumerable:!1})}),e}var pS={get reactive(){return _r},get release(){return yr},get effect(){return Rn},get raw(){return Rh},version:"3.14.8",flushAndStopDeferringMutations:gb,dontAutoEvaluateFunctions:Vh,disableEffectScheduling:ub,startObservingMutations:Qa,stopObservingMutations:Dh,setReactivityEngine:lb,onAttributeRemoved:Lh,onAttributesAdded:jh,closestDataStack:Zn,skipDuringClone:Qt,onlyDuringClone:Vb,addRootSelector:ip,addInitSelector:cp,interceptClone:li,addScopeToNode:Ss,deferMutations:mb,mapAttributes:ru,evaluateLater:Re,interceptInit:Nb,setEvaluator:vb,mergeProxies:ws,extractProp:iS,findClosest:Sr,onElRemoved:za,closestRoot:ai,destroyTree:wr,interceptor:qh,transition:Bc,setStyles:ui,mutateDom:re,directive:pe,entangle:Sp,throttle:bp,debounce:yp,evaluate:mn,initTree:Rt,nextTick:iu,prefixed:br,prefix:Tb,plugin:cS,magic:mt,store:aS,start:Rb,clone:Wb,cloneNode:Hb,bound:oS,$data:Uh,watch:Ch,walk:vn,data:dS,bind:lS},vs=pS;function mS(e,t){const n=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return s=>!!n[s]}var gS=Object.freeze({}),_S=Object.prototype.hasOwnProperty,fi=(e,t)=>_S.call(e,t),gn=Array.isArray,Yr=e=>Op(e)==="[object Map]",yS=e=>typeof e=="string",uu=e=>typeof e=="symbol",di=e=>e!==null&&typeof e=="object",bS=Object.prototype.toString,Op=e=>bS.call(e),Ep=e=>Op(e).slice(8,-1),lu=e=>yS(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,SS=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},wS=SS(e=>e.charAt(0).toUpperCase()+e.slice(1)),Tp=(e,t)=>e!==t&&(e===e||t===t),Jc=new WeakMap,Cr=[],yt,_n=Symbol("iterate"),Vc=Symbol("Map key iterate");function vS(e){return e&&e._isEffect===!0}function kS(e,t=gS){vS(e)&&(e=e.raw);const n=TS(e,t);return t.lazy||n(),n}function OS(e){e.active&&(xp(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var ES=0;function TS(e,t){const n=function(){if(!n.active)return e();if(!Cr.includes(n)){xp(n);try{return $S(),Cr.push(n),yt=n,e()}finally{Cr.pop(),$p(),yt=Cr[Cr.length-1]}}};return n.id=ES++,n.allowRecurse=!!t.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=e,n.deps=[],n.options=t,n}function xp(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var Qn=!0,fu=[];function xS(){fu.push(Qn),Qn=!1}function $S(){fu.push(Qn),Qn=!0}function $p(){const e=fu.pop();Qn=e===void 0?!0:e}function ft(e,t,n){if(!Qn||yt===void 0)return;let r=Jc.get(e);r||Jc.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=new Set),s.has(yt)||(s.add(yt),yt.deps.push(s),yt.options.onTrack&&yt.options.onTrack({effect:yt,target:e,type:t,key:n}))}function Wt(e,t,n,r,s,o){const i=Jc.get(e);if(!i)return;const c=new Set,a=f=>{f&&f.forEach(d=>{(d!==yt||d.allowRecurse)&&c.add(d)})};if(t==="clear")i.forEach(a);else if(n==="length"&&gn(e))i.forEach((f,d)=>{(d==="length"||d>=r)&&a(f)});else switch(n!==void 0&&a(i.get(n)),t){case"add":gn(e)?lu(n)&&a(i.get("length")):(a(i.get(_n)),Yr(e)&&a(i.get(Vc)));break;case"delete":gn(e)||(a(i.get(_n)),Yr(e)&&a(i.get(Vc)));break;case"set":Yr(e)&&a(i.get(_n));break}const l=f=>{f.options.onTrigger&&f.options.onTrigger({effect:f,target:e,key:n,type:t,newValue:r,oldValue:s,oldTarget:o}),f.options.scheduler?f.options.scheduler(f):f()};c.forEach(l)}var IS=mS("__proto__,__v_isRef,__isVue"),Ip=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(uu)),AS=Ap(),MS=Ap(!0),Yl=RS();function RS(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Q(this);for(let o=0,i=this.length;o<i;o++)ft(r,"get",o+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(Q)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){xS();const r=Q(this)[t].apply(this,n);return $p(),r}}),e}function Ap(e=!1,t=!1){return function(r,s,o){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_raw"&&o===(e?t?HS:Np:t?VS:Cp).get(r))return r;const i=gn(r);if(!e&&i&&fi(Yl,s))return Reflect.get(Yl,s,o);const c=Reflect.get(r,s,o);return(uu(s)?Ip.has(s):IS(s))||(e||ft(r,"get",s),t)?c:Hc(c)?!i||!lu(s)?c.value:c:di(c)?e?Fp(c):mu(c):c}}var CS=NS();function NS(e=!1){return function(n,r,s,o){let i=n[r];if(!e&&(s=Q(s),i=Q(i),!gn(n)&&Hc(i)&&!Hc(s)))return i.value=s,!0;const c=gn(n)&&lu(r)?Number(r)<n.length:fi(n,r),a=Reflect.set(n,r,s,o);return n===Q(o)&&(c?Tp(s,i)&&Wt(n,"set",r,s,i):Wt(n,"add",r,s)),a}}function FS(e,t){const n=fi(e,t),r=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&Wt(e,"delete",t,void 0,r),s}function PS(e,t){const n=Reflect.has(e,t);return(!uu(t)||!Ip.has(t))&&ft(e,"has",t),n}function jS(e){return ft(e,"iterate",gn(e)?"length":_n),Reflect.ownKeys(e)}var LS={get:AS,set:CS,deleteProperty:FS,has:PS,ownKeys:jS},KS={get:MS,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},du=e=>di(e)?mu(e):e,hu=e=>di(e)?Fp(e):e,pu=e=>e,hi=e=>Reflect.getPrototypeOf(e);function zs(e,t,n=!1,r=!1){e=e.__v_raw;const s=Q(e),o=Q(t);t!==o&&!n&&ft(s,"get",t),!n&&ft(s,"get",o);const{has:i}=hi(s),c=r?pu:n?hu:du;if(i.call(s,t))return c(e.get(t));if(i.call(s,o))return c(e.get(o));e!==s&&e.get(t)}function Ys(e,t=!1){const n=this.__v_raw,r=Q(n),s=Q(e);return e!==s&&!t&&ft(r,"has",e),!t&&ft(r,"has",s),e===s?n.has(e):n.has(e)||n.has(s)}function Zs(e,t=!1){return e=e.__v_raw,!t&&ft(Q(e),"iterate",_n),Reflect.get(e,"size",e)}function Zl(e){e=Q(e);const t=Q(this);return hi(t).has.call(t,e)||(t.add(e),Wt(t,"add",e,e)),this}function Ql(e,t){t=Q(t);const n=Q(this),{has:r,get:s}=hi(n);let o=r.call(n,e);o?Rp(n,r,e):(e=Q(e),o=r.call(n,e));const i=s.call(n,e);return n.set(e,t),o?Tp(t,i)&&Wt(n,"set",e,t,i):Wt(n,"add",e,t),this}function Xl(e){const t=Q(this),{has:n,get:r}=hi(t);let s=n.call(t,e);s?Rp(t,n,e):(e=Q(e),s=n.call(t,e));const o=r?r.call(t,e):void 0,i=t.delete(e);return s&&Wt(t,"delete",e,void 0,o),i}function ef(){const e=Q(this),t=e.size!==0,n=Yr(e)?new Map(e):new Set(e),r=e.clear();return t&&Wt(e,"clear",void 0,void 0,n),r}function Qs(e,t){return function(r,s){const o=this,i=o.__v_raw,c=Q(i),a=t?pu:e?hu:du;return!e&&ft(c,"iterate",_n),i.forEach((l,f)=>r.call(s,a(l),a(f),o))}}function Xs(e,t,n){return function(...r){const s=this.__v_raw,o=Q(s),i=Yr(o),c=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,l=s[e](...r),f=n?pu:t?hu:du;return!t&&ft(o,"iterate",a?Vc:_n),{next(){const{value:d,done:p}=l.next();return p?{value:d,done:p}:{value:c?[f(d[0]),f(d[1])]:f(d),done:p}},[Symbol.iterator](){return this}}}}function Lt(e){return function(...t){{const n=t[0]?`on key "${t[0]}" `:"";console.warn(`${wS(e)} operation ${n}failed: target is readonly.`,Q(this))}return e==="delete"?!1:this}}function DS(){const e={get(o){return zs(this,o)},get size(){return Zs(this)},has:Ys,add:Zl,set:Ql,delete:Xl,clear:ef,forEach:Qs(!1,!1)},t={get(o){return zs(this,o,!1,!0)},get size(){return Zs(this)},has:Ys,add:Zl,set:Ql,delete:Xl,clear:ef,forEach:Qs(!1,!0)},n={get(o){return zs(this,o,!0)},get size(){return Zs(this,!0)},has(o){return Ys.call(this,o,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:Qs(!0,!1)},r={get(o){return zs(this,o,!0,!0)},get size(){return Zs(this,!0)},has(o){return Ys.call(this,o,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:Qs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=Xs(o,!1,!1),n[o]=Xs(o,!0,!1),t[o]=Xs(o,!1,!0),r[o]=Xs(o,!0,!0)}),[e,n,t,r]}var[US,BS,wC,vC]=DS();function Mp(e,t){const n=e?BS:US;return(r,s,o)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(fi(n,s)&&s in r?n:r,s,o)}var qS={get:Mp(!1)},JS={get:Mp(!0)};function Rp(e,t,n){const r=Q(n);if(r!==n&&t.call(e,r)){const s=Ep(e);console.warn(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Cp=new WeakMap,VS=new WeakMap,Np=new WeakMap,HS=new WeakMap;function WS(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function GS(e){return e.__v_skip||!Object.isExtensible(e)?0:WS(Ep(e))}function mu(e){return e&&e.__v_isReadonly?e:Pp(e,!1,LS,qS,Cp)}function Fp(e){return Pp(e,!0,KS,JS,Np)}function Pp(e,t,n,r,s){if(!di(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=s.get(e);if(o)return o;const i=GS(e);if(i===0)return e;const c=new Proxy(e,i===2?r:n);return s.set(e,c),c}function Q(e){return e&&Q(e.__v_raw)||e}function Hc(e){return!!(e&&e.__v_isRef===!0)}mt("nextTick",()=>iu);mt("dispatch",e=>zr.bind(zr,e));mt("watch",(e,{evaluateLater:t,cleanup:n})=>(r,s)=>{let o=t(r),c=Ch(()=>{let a;return o(l=>a=l),a},s);n(c)});mt("store",uS);mt("data",e=>Uh(e));mt("root",e=>ai(e));mt("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=ws(zS(e))),e._x_refs_proxy));function zS(e){let t=[];return Sr(e,n=>{n._x_refs&&t.push(n._x_refs)}),t}var nc={};function jp(e){return nc[e]||(nc[e]=0),++nc[e]}function YS(e,t){return Sr(e,n=>{if(n._x_ids&&n._x_ids[t])return!0})}function ZS(e,t){e._x_ids||(e._x_ids={}),e._x_ids[t]||(e._x_ids[t]=jp(t))}mt("id",(e,{cleanup:t})=>(n,r=null)=>{let s=`${n}${r?`-${r}`:""}`;return QS(e,s,t,()=>{let o=YS(e,n),i=o?o._x_ids[n]:jp(n);return r?`${n}-${i}-${r}`:`${n}-${i}`})});li((e,t)=>{e._x_id&&(t._x_id=e._x_id)});function QS(e,t,n,r){if(e._x_id||(e._x_id={}),e._x_id[t])return e._x_id[t];let s=r();return e._x_id[t]=s,n(()=>{delete e._x_id[t]}),s}mt("el",e=>e);Lp("Focus","focus","focus");Lp("Persist","persist","persist");function Lp(e,t,n){mt(t,r=>Ze(`You can't use [$${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,r))}pe("modelable",(e,{expression:t},{effect:n,evaluateLater:r,cleanup:s})=>{let o=r(t),i=()=>{let f;return o(d=>f=d),f},c=r(`${t} = __placeholder`),a=f=>c(()=>{},{scope:{__placeholder:f}}),l=i();a(l),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let f=e._x_model.get,d=e._x_model.set,p=Sp({get(){return f()},set(m){d(m)}},{get(){return i()},set(m){a(m)}});s(p)})});pe("teleport",(e,{modifiers:t,expression:n},{cleanup:r})=>{e.tagName.toLowerCase()!=="template"&&Ze("x-teleport can only be used on a <template> tag",e);let s=tf(n),o=e.content.cloneNode(!0).firstElementChild;e._x_teleport=o,o._x_teleportBack=e,e.setAttribute("data-teleport-template",!0),o.setAttribute("data-teleport-target",!0),e._x_forwardEvents&&e._x_forwardEvents.forEach(c=>{o.addEventListener(c,a=>{a.stopPropagation(),e.dispatchEvent(new a.constructor(a.type,a))})}),Ss(o,{},e);let i=(c,a,l)=>{l.includes("prepend")?a.parentNode.insertBefore(c,a):l.includes("append")?a.parentNode.insertBefore(c,a.nextSibling):a.appendChild(c)};re(()=>{i(o,s,t),Qt(()=>{Rt(o)})()}),e._x_teleportPutBack=()=>{let c=tf(n);re(()=>{i(e._x_teleport,c,t)})},r(()=>re(()=>{o.remove(),wr(o)}))});var XS=document.createElement("div");function tf(e){let t=Qt(()=>document.querySelector(e),()=>XS)();return t||Ze(`Cannot find x-teleport element for selector: "${e}"`),t}var Kp=()=>{};Kp.inline=(e,{modifiers:t},{cleanup:n})=>{t.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,n(()=>{t.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};pe("ignore",Kp);pe("effect",Qt((e,{expression:t},{effect:n})=>{n(Re(e,t))}));function Wc(e,t,n,r){let s=e,o=a=>r(a),i={},c=(a,l)=>f=>l(a,f);if(n.includes("dot")&&(t=ew(t)),n.includes("camel")&&(t=tw(t)),n.includes("passive")&&(i.passive=!0),n.includes("capture")&&(i.capture=!0),n.includes("window")&&(s=window),n.includes("document")&&(s=document),n.includes("debounce")){let a=n[n.indexOf("debounce")+1]||"invalid-wait",l=Ro(a.split("ms")[0])?Number(a.split("ms")[0]):250;o=yp(o,l)}if(n.includes("throttle")){let a=n[n.indexOf("throttle")+1]||"invalid-wait",l=Ro(a.split("ms")[0])?Number(a.split("ms")[0]):250;o=bp(o,l)}return n.includes("prevent")&&(o=c(o,(a,l)=>{l.preventDefault(),a(l)})),n.includes("stop")&&(o=c(o,(a,l)=>{l.stopPropagation(),a(l)})),n.includes("once")&&(o=c(o,(a,l)=>{a(l),s.removeEventListener(t,o,i)})),(n.includes("away")||n.includes("outside"))&&(s=document,o=c(o,(a,l)=>{e.contains(l.target)||l.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&a(l))})),n.includes("self")&&(o=c(o,(a,l)=>{l.target===e&&a(l)})),(rw(t)||Dp(t))&&(o=c(o,(a,l)=>{sw(l,n)||a(l)})),s.addEventListener(t,o,i),()=>{s.removeEventListener(t,o,i)}}function ew(e){return e.replace(/-/g,".")}function tw(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}function Ro(e){return!Array.isArray(e)&&!isNaN(e)}function nw(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function rw(e){return["keydown","keyup"].includes(e)}function Dp(e){return["contextmenu","click","mouse"].some(t=>e.includes(t))}function sw(e,t){let n=t.filter(o=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(o));if(n.includes("debounce")){let o=n.indexOf("debounce");n.splice(o,Ro((n[o+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.includes("throttle")){let o=n.indexOf("throttle");n.splice(o,Ro((n[o+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.length===0||n.length===1&&nf(e.key).includes(n[0]))return!1;const s=["ctrl","shift","alt","meta","cmd","super"].filter(o=>n.includes(o));return n=n.filter(o=>!s.includes(o)),!(s.length>0&&s.filter(i=>((i==="cmd"||i==="super")&&(i="meta"),e[`${i}Key`])).length===s.length&&(Dp(e.type)||nf(e.key).includes(n[0])))}function nf(e){if(!e)return[];e=nw(e);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[e]=e,Object.keys(t).map(n=>{if(t[n]===e)return n}).filter(n=>n)}pe("model",(e,{modifiers:t,expression:n},{effect:r,cleanup:s})=>{let o=e;t.includes("parent")&&(o=e.parentNode);let i=Re(o,n),c;typeof n=="string"?c=Re(o,`${n} = __placeholder`):typeof n=="function"&&typeof n()=="string"?c=Re(o,`${n()} = __placeholder`):c=()=>{};let a=()=>{let p;return i(m=>p=m),rf(p)?p.get():p},l=p=>{let m;i(_=>m=_),rf(m)?m.set(p):c(()=>{},{scope:{__placeholder:p}})};typeof n=="string"&&e.type==="radio"&&re(()=>{e.hasAttribute("name")||e.setAttribute("name",n)});var f=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||t.includes("lazy")?"change":"input";let d=Ht?()=>{}:Wc(e,f,t,p=>{l(rc(e,t,p,a()))});if(t.includes("fill")&&([void 0,null,""].includes(a())||au(e)&&Array.isArray(a())||e.tagName.toLowerCase()==="select"&&e.multiple)&&l(rc(e,t,{target:e},a())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=d,s(()=>e._x_removeModelListeners.default()),e.form){let p=Wc(e.form,"reset",[],m=>{iu(()=>e._x_model&&e._x_model.set(rc(e,t,{target:e},a())))});s(()=>p())}e._x_model={get(){return a()},set(p){l(p)}},e._x_forceModelUpdate=p=>{p===void 0&&typeof n=="string"&&n.match(/\./)&&(p=""),window.fromModel=!0,re(()=>hp(e,"value",p)),delete window.fromModel},r(()=>{let p=a();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(p)})});function rc(e,t,n,r){return re(()=>{if(n instanceof CustomEvent&&n.detail!==void 0)return n.detail!==null&&n.detail!==void 0?n.detail:n.target.value;if(au(e))if(Array.isArray(r)){let s=null;return t.includes("number")?s=sc(n.target.value):t.includes("boolean")?s=ho(n.target.value):s=n.target.value,n.target.checked?r.includes(s)?r:r.concat([s]):r.filter(o=>!ow(o,s))}else return n.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return t.includes("number")?Array.from(n.target.selectedOptions).map(s=>{let o=s.value||s.text;return sc(o)}):t.includes("boolean")?Array.from(n.target.selectedOptions).map(s=>{let o=s.value||s.text;return ho(o)}):Array.from(n.target.selectedOptions).map(s=>s.value||s.text);{let s;return _p(e)?n.target.checked?s=n.target.value:s=r:s=n.target.value,t.includes("number")?sc(s):t.includes("boolean")?ho(s):t.includes("trim")?s.trim():s}}})}function sc(e){let t=e?parseFloat(e):null;return iw(t)?t:e}function ow(e,t){return e==t}function iw(e){return!Array.isArray(e)&&!isNaN(e)}function rf(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}pe("cloak",e=>queueMicrotask(()=>re(()=>e.removeAttribute(br("cloak")))));cp(()=>`[${br("init")}]`);pe("init",Qt((e,{expression:t},{evaluate:n})=>typeof t=="string"?!!t.trim()&&n(t,{},!1):n(t,{},!1)));pe("text",(e,{expression:t},{effect:n,evaluateLater:r})=>{let s=r(t);n(()=>{s(o=>{re(()=>{e.textContent=o})})})});pe("html",(e,{expression:t},{effect:n,evaluateLater:r})=>{let s=r(t);n(()=>{s(o=>{re(()=>{e.innerHTML=o,e._x_ignoreSelf=!0,Rt(e),delete e._x_ignoreSelf})})})});ru(Zh(":",Qh(br("bind:"))));var Up=(e,{value:t,modifiers:n,expression:r,original:s},{effect:o,cleanup:i})=>{if(!t){let a={};fS(a),Re(e,r)(f=>{vp(e,f,s)},{scope:a});return}if(t==="key")return cw(e,r);if(e._x_inlineBindings&&e._x_inlineBindings[t]&&e._x_inlineBindings[t].extract)return;let c=Re(e,r);o(()=>c(a=>{a===void 0&&typeof r=="string"&&r.match(/\./)&&(a=""),re(()=>hp(e,t,a,n))})),i(()=>{e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedStyles&&e._x_undoAddedStyles()})};Up.inline=(e,{value:t,modifiers:n,expression:r})=>{t&&(e._x_inlineBindings||(e._x_inlineBindings={}),e._x_inlineBindings[t]={expression:r,extract:!1})};pe("bind",Up);function cw(e,t){e._x_keyExpression=t}ip(()=>`[${br("data")}]`);pe("data",(e,{expression:t},{cleanup:n})=>{if(aw(e))return;t=t===""?"{}":t;let r={};Pc(r,e);let s={};hS(s,r);let o=mn(e,t,{scope:s});(o===void 0||o===!0)&&(o={}),Pc(o,e);let i=_r(o);Bh(i);let c=Ss(e,i);i.init&&mn(e,i.init),n(()=>{i.destroy&&mn(e,i.destroy),c()})});li((e,t)=>{e._x_dataStack&&(t._x_dataStack=e._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function aw(e){return Ht?qc?!0:e.hasAttribute("data-has-alpine-state"):!1}pe("show",(e,{modifiers:t,expression:n},{effect:r})=>{let s=Re(e,n);e._x_doHide||(e._x_doHide=()=>{re(()=>{e.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{re(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let o=()=>{e._x_doHide(),e._x_isShown=!1},i=()=>{e._x_doShow(),e._x_isShown=!0},c=()=>setTimeout(i),a=Uc(d=>d?i():o(),d=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,d,i,o):d?c():o()}),l,f=!0;r(()=>s(d=>{!f&&d===l||(t.includes("immediate")&&(d?c():o()),a(d),l=d,f=!1)}))});pe("for",(e,{expression:t},{effect:n,cleanup:r})=>{let s=lw(t),o=Re(e,s.items),i=Re(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},n(()=>uw(e,s,o,i)),r(()=>{Object.values(e._x_lookup).forEach(c=>re(()=>{wr(c),c.remove()})),delete e._x_prevKeys,delete e._x_lookup})});function uw(e,t,n,r){let s=i=>typeof i=="object"&&!Array.isArray(i),o=e;n(i=>{fw(i)&&i>=0&&(i=Array.from(Array(i).keys(),g=>g+1)),i===void 0&&(i=[]);let c=e._x_lookup,a=e._x_prevKeys,l=[],f=[];if(s(i))i=Object.entries(i).map(([g,b])=>{let S=sf(t,b,g,i);r(w=>{f.includes(w)&&Ze("Duplicate key on x-for",e),f.push(w)},{scope:{index:g,...S}}),l.push(S)});else for(let g=0;g<i.length;g++){let b=sf(t,i[g],g,i);r(S=>{f.includes(S)&&Ze("Duplicate key on x-for",e),f.push(S)},{scope:{index:g,...b}}),l.push(b)}let d=[],p=[],m=[],_=[];for(let g=0;g<a.length;g++){let b=a[g];f.indexOf(b)===-1&&m.push(b)}a=a.filter(g=>!m.includes(g));let k="template";for(let g=0;g<f.length;g++){let b=f[g],S=a.indexOf(b);if(S===-1)a.splice(g,0,b),d.push([k,g]);else if(S!==g){let w=a.splice(g,1)[0],x=a.splice(S-1,1)[0];a.splice(g,0,x),a.splice(S,0,w),p.push([w,x])}else _.push(b);k=b}for(let g=0;g<m.length;g++){let b=m[g];b in c&&(re(()=>{wr(c[b]),c[b].remove()}),delete c[b])}for(let g=0;g<p.length;g++){let[b,S]=p[g],w=c[b],x=c[S],v=document.createElement("div");re(()=>{x||Ze('x-for ":key" is undefined or invalid',o,S,c),x.after(v),w.after(x),x._x_currentIfEl&&x.after(x._x_currentIfEl),v.before(w),w._x_currentIfEl&&w.after(w._x_currentIfEl),v.remove()}),x._x_refreshXForScope(l[f.indexOf(S)])}for(let g=0;g<d.length;g++){let[b,S]=d[g],w=b==="template"?o:c[b];w._x_currentIfEl&&(w=w._x_currentIfEl);let x=l[S],v=f[S],E=document.importNode(o.content,!0).firstElementChild,O=_r(x);Ss(E,O,o),E._x_refreshXForScope=$=>{Object.entries($).forEach(([M,B])=>{O[M]=B})},re(()=>{w.after(E),Qt(()=>Rt(E))()}),typeof v=="object"&&Ze("x-for key cannot be an object, it must be a string or an integer",o),c[v]=E}for(let g=0;g<_.length;g++)c[_[g]]._x_refreshXForScope(l[f.indexOf(_[g])]);o._x_prevKeys=f})}function lw(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,n=/^\s*\(|\)\s*$/g,r=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,s=e.match(r);if(!s)return;let o={};o.items=s[2].trim();let i=s[1].replace(n,"").trim(),c=i.match(t);return c?(o.item=i.replace(t,"").trim(),o.index=c[1].trim(),c[2]&&(o.collection=c[2].trim())):o.item=i,o}function sf(e,t,n,r){let s={};return/^\[.*\]$/.test(e.item)&&Array.isArray(t)?e.item.replace("[","").replace("]","").split(",").map(i=>i.trim()).forEach((i,c)=>{s[i]=t[c]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(t)&&typeof t=="object"?e.item.replace("{","").replace("}","").split(",").map(i=>i.trim()).forEach(i=>{s[i]=t[i]}):s[e.item]=t,e.index&&(s[e.index]=n),e.collection&&(s[e.collection]=r),s}function fw(e){return!Array.isArray(e)&&!isNaN(e)}function Bp(){}Bp.inline=(e,{expression:t},{cleanup:n})=>{let r=ai(e);r._x_refs||(r._x_refs={}),r._x_refs[t]=e,n(()=>delete r._x_refs[t])};pe("ref",Bp);pe("if",(e,{expression:t},{effect:n,cleanup:r})=>{e.tagName.toLowerCase()!=="template"&&Ze("x-if can only be used on a <template> tag",e);let s=Re(e,t),o=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let c=e.content.cloneNode(!0).firstElementChild;return Ss(c,{},e),re(()=>{e.after(c),Qt(()=>Rt(c))()}),e._x_currentIfEl=c,e._x_undoIf=()=>{re(()=>{wr(c),c.remove()}),delete e._x_currentIfEl},c},i=()=>{e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)};n(()=>s(c=>{c?o():i()})),r(()=>e._x_undoIf&&e._x_undoIf())});pe("id",(e,{expression:t},{evaluate:n})=>{n(t).forEach(s=>ZS(e,s))});li((e,t)=>{e._x_ids&&(t._x_ids=e._x_ids)});ru(Zh("@",Qh(br("on:"))));pe("on",Qt((e,{value:t,modifiers:n,expression:r},{cleanup:s})=>{let o=r?Re(e,r):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(t)||e._x_forwardEvents.push(t));let i=Wc(e,t,n,c=>{o(()=>{},{scope:{$event:c},params:[c]})});s(()=>i())}));pi("Collapse","collapse","collapse");pi("Intersect","intersect","intersect");pi("Focus","trap","focus");pi("Mask","mask","mask");function pi(e,t,n){pe(t,r=>Ze(`You can't use [x-${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,r))}vs.setEvaluator(Wh);vs.setReactivityEngine({reactive:mu,effect:kS,release:OS,raw:Q});var dw=vs,ss=dw;const hw=e=>typeof e=="function",h=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):n=>t(n,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(n,r){return arguments.length>=2?t(n,r):function(s){return t(s,n)}};case 3:return function(n,r,s){return arguments.length>=3?t(n,r,s):function(o){return t(o,n,r)}};case 4:return function(n,r,s,o){return arguments.length>=4?t(n,r,s,o):function(i){return t(i,n,r,s)}};case 5:return function(n,r,s,o,i){return arguments.length>=5?t(n,r,s,o,i):function(c){return t(c,n,r,s,o)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(r){return t(r,...n)}}}},te=e=>e,mi=e=>()=>e,of=mi(!0),Gc=mi(!1),qp=mi(void 0),pw=qp;function y(e,t,n,r,s,o,i,c,a){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return s(r(n(t(e))));case 6:return o(s(r(n(t(e)))));case 7:return i(o(s(r(n(t(e))))));case 8:return c(i(o(s(r(n(t(e)))))));case 9:return a(c(i(o(s(r(n(t(e))))))));default:{let l=arguments[0];for(let f=1;f<arguments.length;f++)l=arguments[f](l);return l}}}const gu=e=>(t,n)=>t===n||e(t,n),mw=h(2,(e,t)=>gu((n,r)=>e(t(n),t(r)))),gw=e=>gu((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0});let _w="3.12.7";const gi=()=>_w,eo=`effect/GlobalValue/globalStoreId/${gi()}`;let Nr;const J=(e,t)=>(Nr||(globalThis[eo]??(globalThis[eo]=new Map),Nr=globalThis[eo]),Nr.has(e)||Nr.set(e,t()),Nr.get(e)),Be=e=>typeof e=="string",St=e=>typeof e=="number",Xn=e=>typeof e=="boolean",_i=e=>typeof e=="bigint",zc=e=>typeof e=="symbol",ks=hw,yw=e=>e===void 0,bw=e=>!1,_u=e=>typeof e=="object"&&e!==null,Xt=e=>_u(e)||ks(e),j=h(2,(e,t)=>Xt(e)&&t in e),Jp=h(2,(e,t)=>j(e,"_tag")&&e._tag===t),Pn=e=>e==null,Sw=e=>e!=null,ww=e=>e instanceof Date,vw=e=>j(e,Symbol.iterator),kw=e=>_u(e)&&!Array.isArray(e),Ow=e=>j(e,"then")&&ks(e.then),yi=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;let Vp=class Hp{constructor(t){u(this,"self");u(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new Hp(this.self)}};const Ew=335903614,Tw=4150755663,xw=1481765933,$w=1284865837,Iw=9007199254740992,Aw=134217728;class Mw{constructor(t,n,r,s){u(this,"_state");return Pn(n)&&Pn(t)?(n=Math.random()*4294967295>>>0,t=0):Pn(n)&&(n=t,t=0),Pn(s)&&Pn(r)?(s=this._state?this._state[3]:Tw,r=this._state?this._state[2]:Ew):Pn(s)&&(s=r,r=0),this._state=new Int32Array([0,0,r>>>0,((s||0)|1)>>>0]),this._next(),cf(this._state,this._state[0],this._state[1],t>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){const t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*Aw+n)/Iw}_next(){const t=this._state[0]>>>0,n=this._state[1]>>>0;Rw(this._state,t,n,xw,$w),cf(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=t>>>18,s=(n>>>18|t<<14)>>>0;r=(r^t)>>>0,s=(s^n)>>>0;const o=(s>>>27|r<<5)>>>0,i=t>>>27,c=(-i>>>0&31)>>>0;return(o>>>i|o<<c)>>>0}}function Rw(e,t,n,r,s){let o=(n>>>16)*(s&65535)>>>0,i=(n&65535)*(s>>>16)>>>0,c=(n&65535)*(s&65535)>>>0,a=(n>>>16)*(s>>>16)+((i>>>16)+(o>>>16))>>>0;i=i<<16>>>0,c=c+i>>>0,c>>>0<i>>>0&&(a=a+1>>>0),o=o<<16>>>0,c=c+o>>>0,c>>>0<o>>>0&&(a=a+1>>>0),a=a+Math.imul(n,r)>>>0,a=a+Math.imul(t,s)>>>0,e[0]=a,e[1]=c}function cf(e,t,n,r,s){let o=t+r>>>0;const i=n+s>>>0;i>>>0<n>>>0&&(o=o+1|0),e[0]=o,e[1]=i}const Yc=Symbol.for("effect/Utils/YieldWrap");var bs;class Os{constructor(t){ql(this,bs);Jl(this,bs,t)}[Yc](){return Bl(this,bs)}}bs=new WeakMap;function Cw(e){if(typeof e=="object"&&e!==null&&Yc in e)return e[Yc]();throw new Error(yi("yieldWrapGet"))}const Ge=J("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),Nw=e=>{const t={[e](n){return n()}};return function(n){return t[e](n)}},Me=Nw("effect_internal_function"),oc=J(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),K=Symbol.for("effect/Hash"),A=e=>{if(Ge.enabled===!0)return 0;switch(typeof e){case"number":return Si(e);case"bigint":return de(e.toString(10));case"boolean":return de(String(e));case"symbol":return de(String(e));case"string":return de(e);case"undefined":return de("undefined");case"function":case"object":return e===null?de("null"):e instanceof Date?A(e.toISOString()):Fw(e)?e[K]():yu(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},yu=e=>(oc.has(e)||oc.set(e,Si(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),oc.get(e)),V=e=>t=>t*53^e,bi=e=>e&3221225471|e>>>1&1073741824,Fw=e=>j(e,K),Si=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return bi(t)},de=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return bi(t)},Pw=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=y(de(t[r]),V(A(e[t[r]])));return bi(n)},Wp=e=>Pw(e,Object.keys(e)),Es=e=>{let t=6151;for(let n=0;n<e.length;n++)t=y(t,V(A(e[n])));return bi(t)},oe=function(){if(arguments.length===1){const n=arguments[0];return function(r){return Object.defineProperty(n,K,{value(){return r},enumerable:!1}),r}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,K,{value(){return t},enumerable:!1}),t},L=Symbol.for("effect/Equal");function D(){return arguments.length===1?e=>Co(e,arguments[0]):Co(arguments[0],arguments[1])}function Co(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if(n==="object"||n==="function"){if(e!==null&&t!==null){if(No(e)&&No(t))return A(e)===A(t)&&e[L](t)?!0:Ge.enabled&&Ge.tester?Ge.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(Ge.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((r,s)=>Co(r,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const r=Object.keys(e),s=Object.keys(t);if(r.length===s.length){for(const o of r)if(!(o in t&&Co(e[o],t[o])))return Ge.tester?Ge.tester(e,t):!1;return!0}}return Ge.tester?Ge.tester(e,t):!1}}return Ge.enabled&&Ge.tester?Ge.tester(e,t):!1}const No=e=>j(e,L),bu=()=>D,ne=Symbol.for("nodejs.util.inspect.custom"),Se=e=>{try{if(j(e,"toJSON")&&ks(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(Se)}catch{return{}}return Lw(e)},Te=e=>JSON.stringify(e,null,2),er=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?Gp(e,t):String(e)}catch{return String(e)}},Gp=(e,t)=>{let n=[];const r=JSON.stringify(e,(s,o)=>typeof o=="object"&&o!==null?n.includes(o)?void 0:n.push(o)&&(yn.fiberRefs!==void 0&&zp(o)?o[Su](yn.fiberRefs):o):o,t);return n=void 0,r},Su=Symbol.for("effect/Inspectable/Redactable"),zp=e=>typeof e=="object"&&e!==null&&Su in e,yn=J("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),jw=(e,t)=>{const n=yn.fiberRefs;yn.fiberRefs=e;try{return t()}finally{yn.fiberRefs=n}},Lw=e=>zp(e)&&yn.fiberRefs!==void 0?e[Su](yn.fiberRefs):e,N=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let r=0,s=t.length;r<s;r++)n=t[r](n);return n}}},Zr="Async",wi="Commit",ut="Failure",ic="OnFailure",Fo="OnSuccess",Po="OnSuccessAndFailure",lt="Success",Yp="Sync",Kw="Tag",Ts="UpdateRuntimeFlags",jo="While",po="Iterator",Zp="WithRuntime",mo="Yield",wu="RevertFlags",Dw=Symbol.for("effect/Effect"),Uw=Symbol.for("effect/Stream"),Bw=Symbol.for("effect/Sink"),qw=Symbol.for("effect/Channel"),tr={_R:e=>e,_E:e=>e,_A:e=>e,_V:gi()},Jw={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},Vw={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},xs={[Dw]:tr,[Uw]:tr,[Bw]:Jw,[qw]:Vw,[L](e){return this===e},[K](){return oe(this,yu(this))},[Symbol.iterator](){return new Vp(new Os(this))},pipe(){return N(this,arguments)}},vu={[K](){return oe(this,Wp(this))},[L](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const r of t)if(!(r in e&&D(this[r],e[r])))return!1;return!0}},$s={...xs,_op:wi},Hw={...$s,...vu},Ww=function(){function e(){}return e.prototype=$s,e}(),Qp=Symbol.for("effect/Option"),Xp={...xs,[Qp]:{_A:e=>e},[ne](){return this.toJSON()},toString(){return Te(this.toJSON())}},Gw=Object.assign(Object.create(Xp),{_tag:"Some",_op:"Some",[L](e){return em(e)&&nm(e)&&D(this.value,e.value)},[K](){return oe(this,V(A(this._tag))(A(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Se(this.value)}}}),zw=A("None"),Yw=Object.assign(Object.create(Xp),{_tag:"None",_op:"None",[L](e){return em(e)&&tm(e)},[K](){return zw},toJSON(){return{_id:"Option",_tag:this._tag}}}),em=e=>j(e,Qp),tm=e=>e._tag==="None",nm=e=>e._tag==="Some",rm=Object.create(Yw),Zc=e=>{const t=Object.create(Gw);return t.value=e,t},sm=Symbol.for("effect/Either"),om={...xs,[sm]:{_R:e=>e},[ne](){return this.toJSON()},toString(){return Te(this.toJSON())}},Zw=Object.assign(Object.create(om),{_tag:"Right",_op:"Right",[L](e){return im(e)&&am(e)&&D(this.right,e.right)},[K](){return V(A(this._tag))(A(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Se(this.right)}}}),Qw=Object.assign(Object.create(om),{_tag:"Left",_op:"Left",[L](e){return im(e)&&cm(e)&&D(this.left,e.left)},[K](){return V(A(this._tag))(A(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Se(this.left)}}}),im=e=>j(e,sm),cm=e=>e._tag==="Left",am=e=>e._tag==="Right",Xw=e=>{const t=Object.create(Qw);return t.left=e,t},ev=e=>{const t=Object.create(Zw);return t.right=e,t},be=ev,q=Xw,Ie=cm,$t=am,tv=h(2,(e,{onLeft:t,onRight:n})=>Ie(e)?t(e.left):n(e.right)),nv=tv({onLeft:te,onRight:te}),rv=h(2,(e,t)=>{if($t(e))return e.right;throw t(e.left)}),um=e=>e.length>0,lm=e=>(t,n)=>t===n?0:e(t,n),sv=lm((e,t)=>e<t?-1:1),fm=h(2,(e,t)=>lm((n,r)=>e(t(n),t(r)))),ov=e=>h(2,(t,n)=>e(t,n)===1),I=()=>rm,R=Zc,ue=tm,Z=nm,Xe=h(2,(e,{onNone:t,onSome:n})=>ue(e)?t():n(e.value)),we=h(2,(e,t)=>ue(e)?t():e.value),Jt=h(2,(e,t)=>ue(e)?t():e),iv=h(2,(e,t)=>ue(e)?R(t()):e),vi=e=>e==null?I():R(e),Tt=we(qp),cv=e=>(...t)=>{try{return R(e(...t))}catch{return I()}},av=h(2,(e,t)=>{if(Z(e))return e.value;throw t()}),dm=av(()=>new Error("getOrThrow called on a None")),hm=h(2,(e,t)=>ue(e)?I():R(t(e.value))),ki=h(2,(e,t)=>ue(e)?I():t(e.value)),uv=h(2,(e,t)=>ue(e)?I():t(e.value)),lv=e=>h(2,(t,n)=>ue(t)?!1:e(t.value,n)),fv=bu(),dv=lv(fv),hv=h(2,(e,t)=>ue(e)?!1:t(e.value)),pv=(...e)=>e,Oi=e=>new Array(e),mv=(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new Array(n);for(let s=0;s<n;s++)r[s]=t(s);return r},le=e=>Array.isArray(e)?e:Array.from(e),gv=e=>Array.isArray(e)?e:[e],_v=h(2,(e,{onEmpty:t,onNonEmpty:n})=>se(e)?n(e):t()),yv=h(2,(e,{onEmpty:t,onNonEmpty:n})=>se(e)?n(je(e),kn(e)):t()),Lo=h(2,(e,t)=>[t,...e]),bv=h(2,(e,t)=>[...e,t]),pm=h(2,(e,t)=>le(e).concat(le(t))),Qc=Array.isArray,Sv=e=>e.length===0,wv=Sv,go=um,se=um,mm=(e,t)=>e<0||e>=t.length,vv=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),kv=h(2,(e,t)=>{const n=Math.floor(t);return mm(n,e)?I():R(e[n])}),gm=h(2,(e,t)=>{const n=Math.floor(t);if(mm(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]}),Qr=kv(0),je=gm(0),Ov=e=>se(e)?R(_m(e)):I(),_m=e=>e[e.length-1],kn=e=>e.slice(1),Ev=(e,t)=>{let n=0;for(const r of e){if(!t(r,n))break;n++}return n},Tv=h(2,(e,t)=>Av(e,Ev(e,t))),xv=h(2,(e,t)=>{const n=le(e);return n.slice(vv(t,n),n.length)}),af=e=>Array.from(e).reverse(),os=h(2,(e,t)=>{const n=Array.from(e);return n.sort(t),n}),uf=h(2,(e,t)=>$v(e,t,pv)),$v=h(3,(e,t,n)=>{const r=le(e),s=le(t);if(se(r)&&se(s)){const o=[n(je(r),je(s))],i=Math.min(r.length,s.length);for(let c=1;c<i;c++)o[c]=n(r[c],s[c]);return o}return[]}),Iv=bu(),Av=h(2,(e,t)=>{const n=Array.from(e),r=Math.floor(t);return se(n)?r>=1?Mv(n,r):[[],n]:[n,[]]}),Mv=h(2,(e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[Br(e),[]]:[Lo(e.slice(1,n),je(e)),e.slice(n)]}),Br=e=>e.slice(),Rv=h(2,(e,t)=>{const n={};for(const r of e){const s=t(r);Object.prototype.hasOwnProperty.call(n,s)?n[s].push(r):n[s]=[r]}return n}),Cv=h(3,(e,t,n)=>{const r=le(e),s=le(t);return se(r)?se(s)?Ou(n)(pm(r,s)):r:s}),_o=h(2,(e,t)=>Cv(e,t,Iv)),nr=()=>[],rt=e=>[e],qn=h(2,(e,t)=>e.map(t)),Ko=h(2,(e,t)=>{if(wv(e))return[];const n=[];for(let r=0;r<e.length;r++){const s=t(e[r],r);for(let o=0;o<s.length;o++)n.push(s[o])}return n}),Nv=Ko(te),Fv=h(2,(e,t)=>{const n=le(e),r=[];for(let s=0;s<n.length;s++){const o=t(n[s],s);Z(o)&&r.push(o.value)}return r}),ym=h(3,(e,t,n)=>le(e).reduce((r,s,o)=>n(r,s,o),t)),lf=(e,t)=>{const n=[];let r=e,s;for(;Z(s=t(r));){const[o,i]=s.value;n.push(o),r=i}return n},ku=gw,Ou=h(2,(e,t)=>{const n=le(e);if(se(n)){const r=[je(n)],s=kn(n);for(const o of s)r.every(i=>!t(o,i))&&r.push(o);return r}return[]}),Pv=e=>Ou(e,bu()),vr=h(2,(e,t)=>le(e).join(t)),bm=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return bm(e,t.from)}},It=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),Sm=e=>{let t=!1,n;return()=>(t||(n=e(),t=!0),n)},jv=e=>{try{return e.toISOString()}catch{return String(e)}},wt=e=>{if(Be(e))return JSON.stringify(e);if(St(e)||e==null||Xn(e)||zc(e))return String(e);if(ww(e))return jv(e);if(_i(e))return String(e)+"n";if(!Qc(e)&&j(e,"toString")&&ks(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{return JSON.stringify(e),Qc(e)?`[${e.map(wt).join(",")}]`:`{${It(e).map(t=>`${Be(t)?JSON.stringify(t):String(t)}:${wt(e[t])}`).join(",")}}`}catch{return String(e)}},wm=e=>typeof e=="string"?JSON.stringify(e):String(e),vm=e=>Array.isArray(e),Lv=e=>!Array.isArray(e),ff=e=>`[${wm(e)}]`,km=e=>vm(e)?e.map(ff).join(""):ff(e),Ft=(e,t,n,r)=>{let s=e;return n&&se(n)&&(s+=`
at path: ${km(n)}`),t!==void 0&&(s+=`
details: ${t}`),r&&(s+=`
schema (${r._tag}): ${r}`),s},Kv=(e,t,n)=>Ft("Unsupported schema",e,t,n),Om=(e,t,n)=>Ft("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,n),df=e=>Kv(void 0,void 0,e),Dv=e=>Ft("Unsupported key schema",void 0,void 0,e),Uv=e=>Ft("Unsupported literal",`literal value: ${wt(e)}`),hf=e=>Ft("Duplicate index signature",`${e} index signature`),Bv=Ft("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),qv=Ft("Invalid element","A required element cannot follow an optional element. ts(1257)"),pf=e=>Ft("Duplicate property signature transformation",`Duplicate key ${wt(e)}`),Em=e=>Ft("Duplicate property signature",`Duplicate key ${wt(e)}`),Jv=Symbol.for("effect/SchemaId/MinLength"),rr=sv,Do=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),Vv=Symbol.for("effect/annotation/Brand"),Hv=Symbol.for("effect/annotation/SchemaId"),Tm=Symbol.for("effect/annotation/Message"),Eu=Symbol.for("effect/annotation/MissingMessage"),Tu=Symbol.for("effect/annotation/Identifier"),Pt=Symbol.for("effect/annotation/Title"),Jn=Symbol.for("effect/annotation/AutoTitle"),Is=Symbol.for("effect/annotation/Description"),Wv=Symbol.for("effect/annotation/Examples"),Gv=Symbol.for("effect/annotation/Default"),zv=Symbol.for("effect/annotation/JSONSchema"),Yv=Symbol.for("effect/annotation/Arbitrary"),Zv=Symbol.for("effect/annotation/Pretty"),Qv=Symbol.for("effect/annotation/Equivalence"),Xv=Symbol.for("effect/annotation/Documentation"),xm=Symbol.for("effect/annotation/Concurrency"),$m=Symbol.for("effect/annotation/Batching"),Im=Symbol.for("effect/annotation/ParseIssueTitle"),Am=Symbol.for("effect/annotation/ParseOptions"),Mm=Symbol.for("effect/annotation/DecodingFallback"),Uo=Symbol.for("effect/annotation/Surrogate"),e0=Symbol.for("effect/annotation/StableFilter"),Ce=h(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?R(e.annotations[t]):I()),t0=Ce(Vv),n0=Ce(Tm),r0=Ce(Eu),Rm=Ce(Pt),Cm=Ce(Jn),Ei=Ce(Tu),Nm=Ce(Is),s0=Ce(xm),o0=Ce($m),i0=Ce(Im),c0=Ce(Am),a0=Ce(Mm),Fm=Ce(Uo),u0=Ce(e0),l0=e=>hv(u0(e),t=>t===!0),xu=Symbol.for("effect/annotation/JSONIdentifier"),f0=Ce(xu),d0=e=>Jt(f0(e),()=>Ei(e));class Ti{constructor(t,n,r,s={}){u(this,"typeParameters");u(this,"decodeUnknown");u(this,"encodeUnknown");u(this,"annotations");u(this,"_tag","Declaration");this.typeParameters=t,this.decodeUnknown=n,this.encodeUnknown=r,this.annotations=s}toString(){return we(vt(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:ve(this.annotations)}}}const en=e=>t=>t._tag===e;let Xc=class{constructor(t,n={}){u(this,"literal");u(this,"annotations");u(this,"_tag","Literal");this.literal=t,this.annotations=n}toString(){return we(vt(this),()=>wt(this.literal))}toJSON(){return{_tag:this._tag,literal:_i(this.literal)?String(this.literal):this.literal,annotations:ve(this.annotations)}}};const Xr=en("Literal");class h0{constructor(t,n={}){u(this,"symbol");u(this,"annotations");u(this,"_tag","UniqueSymbol");this.symbol=t,this.annotations=n}toString(){return we(vt(this),()=>wt(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:ve(this.annotations)}}}class p0{constructor(t={}){u(this,"annotations");u(this,"_tag","UndefinedKeyword");this.annotations=t}toString(){return Cn(this)}toJSON(){return{_tag:this._tag,annotations:ve(this.annotations)}}}const is=new p0({[Pt]:"undefined"});class m0{constructor(t={}){u(this,"annotations");u(this,"_tag","NeverKeyword");this.annotations=t}toString(){return Cn(this)}toJSON(){return{_tag:this._tag,annotations:ve(this.annotations)}}}const $u=new m0({[Pt]:"never"});class g0{constructor(t={}){u(this,"annotations");u(this,"_tag","UnknownKeyword");this.annotations=t}toString(){return Cn(this)}toJSON(){return{_tag:this._tag,annotations:ve(this.annotations)}}}const _0=new g0({[Pt]:"unknown"});class y0{constructor(t={}){u(this,"annotations");u(this,"_tag","AnyKeyword");this.annotations=t}toString(){return Cn(this)}toJSON(){return{_tag:this._tag,annotations:ve(this.annotations)}}}const b0=new y0({[Pt]:"any"});class S0{constructor(t={}){u(this,"annotations");u(this,"_tag","StringKeyword");this.annotations=t}toString(){return Cn(this)}toJSON(){return{_tag:this._tag,annotations:ve(this.annotations)}}}const ea=new S0({[Pt]:"string",[Is]:"a string"}),ta=en("StringKeyword");class w0{constructor(t={}){u(this,"annotations");u(this,"_tag","NumberKeyword");this.annotations=t}toString(){return Cn(this)}toJSON(){return{_tag:this._tag,annotations:ve(this.annotations)}}}const na=new w0({[Pt]:"number",[Is]:"a number"}),mf=en("NumberKeyword");class v0{constructor(t={}){u(this,"annotations");u(this,"_tag","BooleanKeyword");this.annotations=t}toString(){return Cn(this)}toJSON(){return{_tag:this._tag,annotations:ve(this.annotations)}}}const gf=new v0({[Pt]:"boolean",[Is]:"a boolean"}),_f=en("BooleanKeyword"),k0=en("SymbolKeyword");let As=class{constructor(t,n={}){u(this,"type");u(this,"annotations");this.type=t,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:ve(this.annotations)}}toString(){return String(this.type)}};class tn extends As{constructor(n,r,s={}){super(n,s);u(this,"isOptional");this.isOptional=r}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:ve(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const Iu=e=>e.map(t=>t.type);class xi{constructor(t,n,r,s={}){u(this,"elements");u(this,"rest");u(this,"isReadonly");u(this,"annotations");u(this,"_tag","TupleType");this.elements=t,this.rest=n,this.isReadonly=r,this.annotations=s;let o=!1,i=!1;for(const c of t)if(c.isOptional)o=!0;else if(o){i=!0;break}if(i||o&&n.length>1)throw new Error(qv)}toString(){return we(vt(this),()=>O0(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:ve(this.annotations)}}}const O0=e=>{const t=e.elements.map(String).join(", ");return yv(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,r)=>{const s=String(n),o=s.includes(" | ")?`(${s})`:s;if(r.length>0){const i=r.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${o}[], ${i}]`:`readonly [...${o}[], ${i}]`}else return e.elements.length>0?`readonly [${t}, ...${o}[]]`:`ReadonlyArray<${s}>`}})};class Oe extends tn{constructor(n,r,s,o,i){super(r,s,i);u(this,"name");u(this,"isReadonly");this.name=n,this.isReadonly=o}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:ve(this.annotations)}}}const Pm=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return Pm(e.from)}return!1};class Ms{constructor(t,n,r){u(this,"type");u(this,"isReadonly");u(this,"parameter");if(this.type=n,this.isReadonly=r,Pm(t))this.parameter=t;else throw new Error(Bv)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class At{constructor(t,n,r={}){u(this,"annotations");u(this,"_tag","TypeLiteral");u(this,"propertySignatures");u(this,"indexSignatures");this.annotations=r;const s={};for(let i=0;i<t.length;i++){const c=t[i].name;if(Object.prototype.hasOwnProperty.call(s,c))throw new Error(Em(c));s[c]=null}const o={string:!1,symbol:!1};for(let i=0;i<n.length;i++){const c=Dm(n[i].parameter);if(ta(c)){if(o.string)throw new Error(hf("string"));o.string=!0}else if(k0(c)){if(o.symbol)throw new Error(hf("symbol"));o.symbol=!0}}this.propertySignatures=t,this.indexSignatures=n}toString(){return we(vt(this),()=>E0(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:ve(this.annotations)}}}const yf=e=>e.map(String).join("; "),E0=e=>{if(e.propertySignatures.length>0){const t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${yf(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${yf(e.indexSignatures)} }`:"{}"},bf=en("TypeLiteral"),T0=os(fm(rr,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),x0={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},jm=e=>Ko(e,t=>Mu(t)?jm(t.types):[t]),$0=e=>{const t=T0(e),n=[],r={},s=[];for(const o of t)switch(o._tag){case"NeverKeyword":break;case"AnyKeyword":return[b0];case"UnknownKeyword":return[_0];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{r[o._tag]||(r[o._tag]=o,n.push(o));break}case"Literal":{const i=typeof o.literal;switch(i){case"string":case"number":case"bigint":case"boolean":{const c=x0[i];!r[c]&&!s.includes(o.literal)&&(s.push(o.literal),n.push(o));break}case"object":{s.includes(o.literal)||(s.push(o.literal),n.push(o));break}}break}case"UniqueSymbol":{!r.SymbolKeyword&&!s.includes(o.symbol)&&(s.push(o.symbol),n.push(o));break}case"TupleType":{r.ObjectKeyword||n.push(o);break}case"TypeLiteral":{o.propertySignatures.length===0&&o.indexSignatures.length===0?r["{}"]||(r["{}"]=o,n.push(o)):r.ObjectKeyword||n.push(o);break}default:n.push(o)}return n};var xt;let Fe=(xt=class{constructor(t,n={}){u(this,"types");u(this,"annotations");u(this,"_tag","Union");this.types=t,this.annotations=n}toString(){return we(vt(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:ve(this.annotations)}}},u(xt,"make",(t,n)=>Au(t)?new xt(t,n):t.length===1?t[0]:$u),u(xt,"unify",(t,n)=>xt.make($0(jm(t)),n)),xt);const I0=(e,t)=>e.map(t),Au=e=>e.length>1,Mu=en("Union"),cc=J(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class Vn{constructor(t,n={}){u(this,"f");u(this,"annotations");u(this,"_tag","Suspend");this.f=t,this.annotations=n,this.f=Sm(t)}toString(){return vt(this).pipe(Jt(()=>ki(cv(this.f)(),t=>vt(t))),we(()=>"<suspended schema>"))}toJSON(){const t=this.f();let n=cc.get(t);return n||(cc.set(t,{_tag:this._tag}),n={_tag:this._tag,ast:t.toJSON(),annotations:ve(this.annotations)},cc.set(t,n),n)}}let Ru=class{constructor(t,n,r={}){u(this,"from");u(this,"filter");u(this,"annotations");u(this,"_tag","Refinement");this.from=t,this.filter=n,this.annotations=r}toString(){return Ei(this).pipe(we(()=>Xe(Um(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:t=>Hn(this.from)?String(this.from)+" & "+t:t})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:ve(this.annotations)}}};const Hn=en("Refinement"),ac={};let Wn=class{constructor(t,n,r,s={}){u(this,"from");u(this,"to");u(this,"transformation");u(this,"annotations");u(this,"_tag","Transformation");this.from=t,this.to=n,this.transformation=r,this.annotations=s}toString(){return we(vt(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:ve(this.annotations)}}};class A0{constructor(t,n){u(this,"decode");u(this,"encode");u(this,"_tag","FinalTransformation");this.decode=t,this.encode=n}}const M0=e=>t=>t._tag===e;let R0=class{constructor(t,n,r,s){u(this,"from");u(this,"to");u(this,"decode");u(this,"encode");this.from=t,this.to=n,this.decode=r,this.encode=s}};const C0=e=>e.decode===te&&e.encode===te;class yo{constructor(t){u(this,"propertySignatureTransformations");u(this,"_tag","TypeLiteralTransformation");this.propertySignatureTransformations=t;const n={},r={};for(const s of t){const o=s.from;if(n[o])throw new Error(pf(o));n[o]=!0;const i=s.to;if(r[i])throw new Error(pf(i));r[i]=!0}}}const bo=M0("TypeLiteralTransformation"),cs=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={...e.annotations,...t},s=Fm(e);return Z(s)&&(r[Uo]=cs(s.value,t)),n.annotations.value=r,Object.create(Object.getPrototypeOf(e),n)},N0="[\\s\\S]*",F0="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",Lm=(e,t)=>{switch(e._tag){case"Literal":return Do(String(e.literal));case"StringKeyword":return N0;case"NumberKeyword":return F0;case"TemplateLiteral":return Km(e);case"Union":return e.types.map(n=>Lm(n)).join("|")}},P0=(e,t,n,r)=>Mu(e)?`(${t})`:t,Km=(e,t,n)=>{let r="";if(e.head!==""){const s=Do(e.head);r+=s}for(const s of e.spans){const o=Lm(s.type);if(r+=P0(s.type,o),s.literal!==""){const i=Do(s.literal);r+=i}}return r},j0=e=>new RegExp(`^${Km(e)}$`),Sf=(e,t)=>{const n=[],r=[],s=o=>{switch(o._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":r.push(new Ms(o,t,!0));break;case"Literal":if(Be(o.literal)||St(o.literal))n.push(new Oe(o.literal,t,!1,!0));else throw new Error(Uv(o.literal));break;case"Enums":{for(const[i,c]of o.enums)n.push(new Oe(c,t,!1,!0));break}case"UniqueSymbol":n.push(new Oe(o.symbol,t,!1,!0));break;case"Union":o.types.forEach(s);break;default:throw new Error(Dv(o))}};return s(e),{propertySignatures:n,indexSignatures:r}},uc=e=>Fe.make([e,is]),qr=(e,t)=>{switch(e._tag){case"TupleType":return new xi(e.elements.map(n=>new tn(uc(n.type),!0)),_v(e.rest,{onEmpty:()=>e.rest,onNonEmpty:n=>[new As(Fe.make([...Iu(n),is]))]}),e.isReadonly);case"TypeLiteral":return new At(e.propertySignatures.map(n=>new Oe(n.name,uc(n.type),!0,n.isReadonly,n.annotations)),e.indexSignatures.map(n=>new Ms(n.parameter,uc(n.type),n.isReadonly)));case"Union":return Fe.make(e.types.map(n=>qr(n)));case"Suspend":return new Vn(()=>qr(e.f()));case"Declaration":case"Refinement":throw new Error(df(e));case"Transformation":{if(bo(e.transformation)&&e.transformation.propertySignatureTransformations.every(C0))return new Wn(qr(e.from),qr(e.to),e.transformation);throw new Error(df(e))}}return e},ae=e=>{switch(e._tag){case"Declaration":{const t=Ye(e.typeParameters,ae);return t===e.typeParameters?e:new Ti(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=Ye(e.elements,s=>{const o=ae(s.type);return o===s.type?s:new tn(o,s.isOptional)}),n=Iu(e.rest),r=Ye(n,ae);return t===e.elements&&r===n?e:new xi(t,r.map(s=>new As(s)),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=Ye(e.propertySignatures,r=>{const s=ae(r.type);return s===r.type?r:new Oe(r.name,s,r.isOptional,r.isReadonly)}),n=Ye(e.indexSignatures,r=>{const s=ae(r.type);return s===r.type?r:new Ms(r.parameter,s,r.isReadonly)});return t===e.propertySignatures&&n===e.indexSignatures?e:new At(t,n,e.annotations)}case"Union":{const t=Ye(e.types,ae);return t===e.types?e:Fe.make(t,e.annotations)}case"Suspend":return new Vn(()=>ae(e.f()),e.annotations);case"Refinement":{const t=ae(e.from);return t===e.from?e:new Ru(t,e.filter,e.annotations)}case"Transformation":return ae(e.to)}return e},L0=e=>t=>{let n;for(const r of e)Object.prototype.hasOwnProperty.call(t.annotations,r)&&(n===void 0&&(n={}),n[r]=t.annotations[r]);return n},K0=e=>t=>{const n={...t.annotations};for(const r of e)delete n[r];return n},jn=e=>Xe(d0(e),{onNone:()=>{},onSome:t=>({[xu]:t})});function Ye(e,t){let n=!1;const r=Oi(e.length);for(let s=0;s<e.length;s++){const o=e[s],i=t(o);i!==o&&(n=!0),r[s]=i}return n?r:e}const gt=(e,t)=>{switch(e._tag){case"Declaration":{const n=Ye(e.typeParameters,r=>gt(r));return n===e.typeParameters?e:new Ti(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const n=Ye(e.elements,o=>{const i=gt(o.type);return i===o.type?o:new tn(i,o.isOptional)}),r=Iu(e.rest),s=Ye(r,o=>gt(o));return n===e.elements&&s===r?e:new xi(n,s.map(o=>new As(o)),e.isReadonly,jn(e))}case"TypeLiteral":{const n=Ye(e.propertySignatures,s=>{const o=gt(s.type);return o===s.type?s:new Oe(s.name,o,s.isOptional,s.isReadonly)}),r=Ye(e.indexSignatures,s=>{const o=gt(s.type);return o===s.type?s:new Ms(s.parameter,o,s.isReadonly)});return n===e.propertySignatures&&r===e.indexSignatures?e:new At(n,r,jn(e))}case"Union":{const n=Ye(e.types,r=>gt(r));return n===e.types?e:Fe.make(n,jn(e))}case"Suspend":return new Vn(()=>gt(e.f()),jn(e));case"Refinement":{const n=gt(e.from),r=jn(e);return r?cs(n,r):n}case"Transformation":{const n=jn(e);return gt(n?cs(e.from,n):e.from)}}return e},ra=e=>gt(e),ve=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},Dm=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return Dm(e.from)}},Cn=e=>we(vt(e),()=>e._tag);function D0(e){return Xe(t0(e),{onNone:()=>"",onSome:t=>t.map(n=>` & Brand<${wt(n)}>`).join("")})}const Um=e=>Rm(e).pipe(Jt(()=>Nm(e)),Jt(()=>Cm(e)),hm(t=>t+D0(e))),vt=e=>Jt(Ei(e),()=>Um(e)),U0=Symbol.for("effect/Context/Tag"),Bo=Symbol.for("effect/Context/Reference"),B0="effect/STM",q0=Symbol.for(B0),Bm={...xs,_op:"Tag",[q0]:tr,[U0]:{_Service:e=>e,_Identifier:e=>e},toString(){return Te(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[ne](){return this.toJSON()},of(e){return e},context(e){return Jm(this,e)}},J0={...Bm,[Bo]:Bo},V0=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const r=Object.create(Bm);return Object.defineProperty(r,"stack",{get(){return n.stack}}),r.key=e,r},H0=()=>(e,t)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;Error.stackTraceLimit=n;function s(){}return Object.setPrototypeOf(s,J0),s.key=e,s.defaultValue=t.defaultValue,Object.defineProperty(s,"stack",{get(){return r.stack}}),s},qm=Symbol.for("effect/Context"),W0={[qm]:{_Services:e=>e},[L](e){if(z0(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!D(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[K](){return oe(this,Si(this.unsafeMap.size))},pipe(){return N(this,arguments)},toString(){return Te(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Se)}},[ne](){return this.toJSON()}},sr=e=>{const t=Object.create(W0);return t.unsafeMap=e,t},G0=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const n=e.stack.split(`
`);if(n.length>2){const r=n[2].match(/at (.*)/);r&&(t.message=t.message+` (defined at ${r[1]})`)}}if(t.stack){const n=t.stack.split(`
`);n.splice(1,3),t.stack=n.join(`
`)}return t},z0=e=>j(e,qm),Y0=e=>j(e,Bo),Z0=sr(new Map),Q0=()=>Z0,Jm=(e,t)=>sr(new Map([[e.key,t]])),X0=h(3,(e,t,n)=>{const r=new Map(e.unsafeMap);return r.set(t.key,n),sr(r)}),lc=J("effect/Context/defaultValueCache",()=>new Map),Cu=e=>{if(lc.has(e.key))return lc.get(e.key);const t=e.defaultValue();return lc.set(e.key,t),t},ek=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):Cu(t),Vm=h(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(Bo in t)return Cu(t);throw G0(t)}return e.unsafeMap.get(t.key)}),tk=Vm,nk=h(2,(e,t)=>e.unsafeMap.has(t.key)?Zc(e.unsafeMap.get(t.key)):Y0(t)?Zc(Cu(t)):rm),rk=h(2,(e,t)=>{const n=new Map(e.unsafeMap);for(const[r,s]of t.unsafeMap)n.set(r,s);return sr(n)}),Nn=V0,Nu=Q0,sk=Jm,Fr=X0,Hm=tk,Wm=Vm,Rs=nk,Gm=rk,zm=H0,Ym=Symbol.for("effect/Chunk");function ok(e,t,n,r,s){for(let o=t;o<Math.min(e.length,t+s);o++)n[r+o-t]=e[o];return n}const Zm=[],ik=e=>gu((t,n)=>t.length===n.length&&bn(t).every((r,s)=>e(r,Gn(n,s)))),ck=ik(D),ak={[Ym]:{_A:e=>e},toString(){return Te(this.toJSON())},toJSON(){return{_id:"Chunk",values:bn(this).map(Se)}},[ne](){return this.toJSON()},[L](e){return Qm(e)&&ck(this,e)},[K](){return oe(this,Es(bn(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return Zm[Symbol.iterator]();default:return bn(this)[Symbol.iterator]()}},pipe(){return N(this,arguments)}},fe=e=>{const t=Object.create(ak);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=bt,t.right=bt;break}case"ISingleton":{t.length=1,t.depth=0,t.left=bt,t.right=bt;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=bt,t.right=bt;break}}return t},Qm=e=>j(e,Ym),bt=fe({_tag:"IEmpty"}),Gt=()=>bt,fc=(...e)=>e.length===1?qe(e[0]):fk(e),qe=e=>fe({_tag:"ISingleton",a:e}),Xm=e=>Qm(e)?e:fe({_tag:"IArray",array:le(e)}),sa=(e,t,n)=>{switch(e.backing._tag){case"IArray":{ok(e.backing.array,0,t,n,e.length);break}case"IConcat":{sa(e.left,t,n),sa(e.right,t,n+e.left.length);break}case"ISingleton":{t[n]=e.backing.a;break}case"ISlice":{let r=0,s=n;for(;r<e.length;)t[s]=Gn(e,r),r+=1,s+=1;break}}},uk=e=>{switch(e.backing._tag){case"IEmpty":return Zm;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return sa(e,t,0),e.backing={_tag:"IArray",array:t},e.left=bt,e.right=bt,e.depth=0,t}}},bn=uk,lk=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return fe({_tag:"IArray",array:af(e.backing.array)});case"IConcat":return fe({_tag:"IConcat",left:or(e.backing.right),right:or(e.backing.left)});case"ISlice":return Fu(af(bn(e)))}},or=lk,Fu=e=>fe({_tag:"IArray",array:e}),fk=e=>Fu(e),Gn=h(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Gn(e.left,t):Gn(e.right,t-e.left.length);case"ISlice":return Gn(e.backing.chunk,t+e.backing.offset)}}),dk=h(2,(e,t)=>it(e,qe(t))),dt=h(2,(e,t)=>it(qe(t),e)),oa=h(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return bt;switch(e.backing._tag){case"ISlice":return fe({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?oa(e.right,t-e.left.length):fe({_tag:"IConcat",left:oa(e.left,t),right:e.right});default:return fe({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),it=h(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return fe({_tag:"IConcat",left:e,right:t});if(n<-1)if(e.left.depth>=e.right.depth){const r=it(e.right,t);return fe({_tag:"IConcat",left:e.left,right:r})}else{const r=it(e.right.right,t);if(r.depth===e.depth-3){const s=fe({_tag:"IConcat",left:e.right.left,right:r});return fe({_tag:"IConcat",left:e.left,right:s})}else{const s=fe({_tag:"IConcat",left:e.left,right:e.right.left});return fe({_tag:"IConcat",left:s,right:r})}}else if(t.right.depth>=t.left.depth){const r=it(e,t.left);return fe({_tag:"IConcat",left:r,right:t.right})}else{const r=it(e,t.left.left);if(r.depth===t.depth-3){const s=fe({_tag:"IConcat",left:r,right:t.left.right});return fe({_tag:"IConcat",left:s,right:t.right})}else{const s=fe({_tag:"IConcat",left:t.left.right,right:t.right});return fe({_tag:"IConcat",left:r,right:s})}}}),hk=e=>e.length===0,ir=e=>e.length>0,eg=e=>Gn(e,0),cr=eg,fn=e=>oa(e,1),ia=Symbol.for("effect/Duration"),pk=BigInt(0),wf=BigInt(24),to=BigInt(60),ca=BigInt(1e3),vf=BigInt(1e6),aa=BigInt(1e9),kf=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,Ct=e=>{if(tg(e))return e;if(St(e))return ua(e);if(_i(e))return dc(e);if(Array.isArray(e)){if(e.length===2&&St(e[0])&&St(e[1]))return dc(BigInt(e[0])*aa+BigInt(e[1]))}else if(Be(e)){kf.lastIndex=0;const t=kf.exec(e);if(t){const[n,r,s]=t,o=Number(r);switch(s){case"nano":case"nanos":return dc(BigInt(r));case"micro":case"micros":return yk(BigInt(r));case"milli":case"millis":return ua(o);case"second":case"seconds":return bk(o);case"minute":case"minutes":return Sk(o);case"hour":case"hours":return wk(o);case"day":case"days":return vk(o);case"week":case"weeks":return kk(o)}}}throw new Error("Invalid DurationInput")},Of={_tag:"Millis",millis:0},mk={_tag:"Infinity"},gk={[ia]:ia,[K](){return oe(this,Wp(this.value))},[L](e){return tg(e)&&Ik(this,e)},toString(){return`Duration(${Mk(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:Ek(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[ne](){return this.toJSON()},pipe(){return N(this,arguments)}},jt=e=>{const t=Object.create(gk);return St(e)?isNaN(e)||e<=0?t.value=Of:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=mk:e<=pk?t.value=Of:t.value={_tag:"Nanos",nanos:e},t},tg=e=>j(e,ia),_k=jt(0),dc=e=>jt(e),yk=e=>jt(e*ca),ua=e=>jt(e),bk=e=>jt(e*1e3),Sk=e=>jt(e*6e4),wk=e=>jt(e*36e5),vk=e=>jt(e*864e5),kk=e=>jt(e*6048e5),la=e=>Tk(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6}),Ok=e=>{const t=Ct(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},Ek=e=>{const t=Ct(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/aa),Number(t.value.nanos%aa)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},Tk=h(2,(e,t)=>{const n=Ct(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}}),ng=h(3,(e,t,n)=>{const r=Ct(e),s=Ct(t);if(r.value._tag==="Infinity"||s.value._tag==="Infinity")return n.onMillis(la(r),la(s));if(r.value._tag==="Nanos"||s.value._tag==="Nanos"){const o=r.value._tag==="Nanos"?r.value.nanos:BigInt(Math.round(r.value.millis*1e6)),i=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6));return n.onNanos(o,i)}return n.onMillis(r.value.millis,s.value.millis)}),xk=(e,t)=>ng(e,t,{onMillis:(n,r)=>n===r,onNanos:(n,r)=>n===r}),$k=h(2,(e,t)=>ng(e,t,{onMillis:(n,r)=>n>=r,onNanos:(n,r)=>n>=r})),Ik=h(2,(e,t)=>xk(Ct(e),Ct(t))),Ak=e=>{const t=Ct(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=Ok(t),r=n/vf,s=r/ca,o=s/to,i=o/to,c=i/wf;return{days:Number(c),hours:Number(i%wf),minutes:Number(o%to),seconds:Number(s%to),millis:Number(r%ca),nanos:Number(n%vf)}},Mk=e=>{const t=Ct(e);if(t.value._tag==="Infinity")return"Infinity";const n=Ak(t),r=[];return n.days!==0&&r.push(`${n.days}d`),n.hours!==0&&r.push(`${n.hours}h`),n.minutes!==0&&r.push(`${n.minutes}m`),n.seconds!==0&&r.push(`${n.seconds}s`),n.millis!==0&&r.push(`${n.millis}ms`),n.nanos!==0&&r.push(`${n.nanos}ns`),r.join(" ")},On=5,Pu=Math.pow(2,On),Rk=Pu-1,Ck=Pu/2,Nk=Pu/4;function Fk(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function ar(e,t){return t>>>e&Rk}function Bn(e){return 1<<e}function rg(e,t){return Fk(e&t-1)}const Pk=(e,t)=>({value:e,previous:t});function zn(e,t,n,r){let s=r;if(!e){const o=r.length;s=new Array(o);for(let i=0;i<o;++i)s[i]=r[i]}return s[t]=n,s}function sg(e,t,n){const r=n.length-1;let s=0,o=0,i=n;if(e)s=o=t;else for(i=new Array(r);s<t;)i[o++]=n[s++];for(++s;s<=r;)i[o++]=n[s++];return e&&(i.length=r),i}function jk(e,t,n,r){const s=r.length;if(e){let a=s;for(;a>=t;)r[a--]=r[a];return r[t]=n,r}let o=0,i=0;const c=new Array(s+1);for(;o<t;)c[i++]=r[o++];for(c[t]=n;o<s;)c[++i]=r[o++];return c}class zt{constructor(){u(this,"_tag","EmptyNode")}modify(t,n,r,s,o,i){const c=r(I());return ue(c)?new zt:(++i.value,new Sn(t,s,o,c))}}function ct(e){return Jp(e,"EmptyNode")}function Lk(e){return ct(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function $i(e,t){return ct(e)?!1:t===e.edit}class Sn{constructor(t,n,r,s){u(this,"edit");u(this,"hash");u(this,"key");u(this,"value");u(this,"_tag","LeafNode");this.edit=t,this.hash=n,this.key=r,this.value=s}modify(t,n,r,s,o,i){if(D(o,this.key)){const a=r(this.value);return a===this.value?this:ue(a)?(--i.value,new zt):$i(this,t)?(this.value=a,this):new Sn(t,s,o,a)}const c=r(I());return ue(c)?this:(++i.value,og(t,n,this.hash,this,s,new Sn(t,s,o,c)))}}class ju{constructor(t,n,r){u(this,"edit");u(this,"hash");u(this,"children");u(this,"_tag","CollisionNode");this.edit=t,this.hash=n,this.children=r}modify(t,n,r,s,o,i){if(s===this.hash){const a=$i(this,t),l=this.updateCollisionList(a,t,this.hash,this.children,r,o,i);return l===this.children?this:l.length>1?new ju(t,this.hash,l):l[0]}const c=r(I());return ue(c)?this:(++i.value,og(t,n,this.hash,this,s,new Sn(t,s,o,c)))}updateCollisionList(t,n,r,s,o,i,c){const a=s.length;for(let f=0;f<a;++f){const d=s[f];if("key"in d&&D(i,d.key)){const p=d.value,m=o(p);return m===p?s:ue(m)?(--c.value,sg(t,f,s)):zn(t,f,new Sn(n,r,i,m),s)}}const l=o(I());return ue(l)?s:(++c.value,zn(t,a,new Sn(n,r,i,l),s))}}class ur{constructor(t,n,r){u(this,"edit");u(this,"mask");u(this,"children");u(this,"_tag","IndexedNode");this.edit=t,this.mask=n,this.children=r}modify(t,n,r,s,o,i){const c=this.mask,a=this.children,l=ar(n,s),f=Bn(l),d=rg(c,f),p=c&f,m=$i(this,t);if(!p){const S=new zt().modify(t,n+On,r,s,o,i);return S?a.length>=Ck?Dk(t,l,S,c,a):new ur(t,c|f,jk(m,d,S,a)):this}const _=a[d],k=_.modify(t,n+On,r,s,o,i);if(_===k)return this;let g=c,b;if(ct(k)){if(g&=~f,!g)return new zt;if(a.length<=2&&Lk(a[d^1]))return a[d^1];b=sg(m,d,a)}else b=zn(m,d,k,a);return m?(this.mask=g,this.children=b,this):new ur(t,g,b)}}class Lu{constructor(t,n,r){u(this,"edit");u(this,"size");u(this,"children");u(this,"_tag","ArrayNode");this.edit=t,this.size=n,this.children=r}modify(t,n,r,s,o,i){let c=this.size;const a=this.children,l=ar(n,s),f=a[l],d=(f||new zt).modify(t,n+On,r,s,o,i);if(f===d)return this;const p=$i(this,t);let m;if(ct(f)&&!ct(d))++c,m=zn(p,l,d,a);else if(!ct(f)&&ct(d)){if(--c,c<=Nk)return Kk(t,c,l,a);m=zn(p,l,new zt,a)}else m=zn(p,l,d,a);return p?(this.size=c,this.children=m,this):new Lu(t,c,m)}}function Kk(e,t,n,r){const s=new Array(t-1);let o=0,i=0;for(let c=0,a=r.length;c<a;++c)if(c!==n){const l=r[c];l&&!ct(l)&&(s[o++]=l,i|=1<<c)}return new ur(e,i,s)}function Dk(e,t,n,r,s){const o=[];let i=r,c=0;for(let a=0;i;++a)i&1&&(o[a]=s[c++]),i>>>=1;return o[t]=n,new Lu(e,c+1,o)}function Uk(e,t,n,r,s,o){if(n===s)return new ju(e,n,[o,r]);const i=ar(t,n),c=ar(t,s);if(i===c)return a=>new ur(e,Bn(i)|Bn(c),[a]);{const a=i<c?[r,o]:[o,r];return new ur(e,Bn(i)|Bn(c),a)}}function og(e,t,n,r,s,o){let i,c=t;for(;;){const a=Uk(e,c,n,r,s,o);if(typeof a=="function")i=Pk(a,i),c=c+On;else{let l=a;for(;i!=null;)l=i.value(l),i=i.previous;return l}}}const ig="effect/HashMap",fa=Symbol.for(ig),Bk={[fa]:fa,[Symbol.iterator](){return new Ii(this,(e,t)=>[e,t])},[K](){let e=A(ig);for(const t of this)e^=y(A(t[0]),V(A(t[1])));return oe(this,e)},[L](e){if(Vk(e)){if(e._size!==this._size)return!1;for(const t of this){const n=y(e,Du(t[0],A(t[0])));if(ue(n))return!1;if(!D(t[1],n.value))return!1}return!0}return!1},toString(){return Te(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Se)}},[ne](){return this.toJSON()},pipe(){return N(this,arguments)}},Ku=(e,t,n,r)=>{const s=Object.create(Bk);return s._editable=e,s._edit=t,s._root=n,s._size=r,s};class Ii{constructor(t,n){u(this,"map");u(this,"f");u(this,"v");this.map=t,this.f=n,this.v=cg(this.map._root,this.f,void 0)}next(){if(ue(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=qo(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new Ii(this.map,this.f)}}const qo=e=>e?ag(e[0],e[1],e[2],e[3],e[4]):I(),cg=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return Z(e.value)?R({value:t(e.key,e.value.value),cont:n}):qo(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return ag(r.length,r,0,t,n)}default:return qo(n)}},ag=(e,t,n,r,s)=>{for(;n<e;){const o=t[n++];if(o&&!ct(o))return cg(o,r,[e,t,n,r,s])}return qo(s)},qk=Ku(!1,0,new zt,0),Ai=()=>qk,Jk=e=>{const t=lg(Ai());for(const n of e)as(t,n[0],n[1]);return Yk(t)},Vk=e=>j(e,fa),Hk=e=>e&&ct(e._root),Wk=h(2,(e,t)=>Du(e,t,A(t))),Du=h(3,(e,t,n)=>{let r=e._root,s=0;for(;;)switch(r._tag){case"LeafNode":return D(t,r.key)?r.value:I();case"CollisionNode":{if(n===r.hash){const o=r.children;for(let i=0,c=o.length;i<c;++i){const a=o[i];if("key"in a&&D(t,a.key))return a.value}}return I()}case"IndexedNode":{const o=ar(s,n),i=Bn(o);if(r.mask&i){r=r.children[rg(r.mask,i)],s+=On;break}return I()}case"ArrayNode":{if(r=r.children[ar(s,n)],r){s+=On;break}return I()}default:return I()}}),Gk=h(2,(e,t)=>Z(Du(e,t,A(t)))),as=h(3,(e,t,n)=>Uu(e,t,()=>R(n))),zk=h(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:Ku(e._editable,e._edit,t,n)),ug=e=>new Ii(e,t=>t),da=e=>e._size,lg=e=>Ku(!0,e._edit+1,e._root,e._size),Yk=e=>(e._editable=!1,e),Uu=h(3,(e,t,n)=>Zk(e,t,A(t),n)),Zk=h(4,(e,t,n,r)=>{const s={value:e._size},o=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,s);return y(e,zk(o,s.value))}),Ef=h(2,(e,t)=>Uu(e,t,I)),Qk=h(2,(e,t)=>Mi(e,Ai(),(n,r,s)=>as(n,s,t(r,s)))),Xk=h(2,(e,t)=>Mi(e,void 0,(n,r,s)=>t(r,s))),Mi=h(3,(e,t,n)=>{const r=e._root;if(r._tag==="LeafNode")return Z(r.value)?n(t,r.value.value,r.key):t;if(r._tag==="EmptyNode")return t;const s=[r.children];let o;for(;o=s.pop();)for(let i=0,c=o.length;i<c;){const a=o[i++];a&&!ct(a)&&(a._tag==="LeafNode"?Z(a.value)&&(t=n(t,a.value.value,a.key)):s.push(a.children))}return t}),fg="effect/HashSet",ha=Symbol.for(fg),eO={[ha]:ha,[Symbol.iterator](){return ug(this._keyMap)},[K](){return oe(this,V(A(this._keyMap))(A(fg)))},[L](e){return tO(e)?da(this._keyMap)===da(e._keyMap)&&D(this._keyMap,e._keyMap):!1},toString(){return Te(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Se)}},[ne](){return this.toJSON()},pipe(){return N(this,arguments)}},Ri=e=>{const t=Object.create(eO);return t._keyMap=e,t},tO=e=>j(e,ha),nO=Ri(Ai()),Ci=()=>nO,rO=e=>{const t=Bu(Ci());for(const n of e)us(t,n);return qu(t)},sO=(...e)=>{const t=Bu(Ci());for(const n of e)us(t,n);return qu(t)},oO=h(2,(e,t)=>Gk(e._keyMap,t)),iO=e=>da(e._keyMap),Bu=e=>Ri(lg(e._keyMap)),qu=e=>(e._keyMap._editable=!1,e),dg=h(2,(e,t)=>{const n=Bu(e);return t(n),qu(n)}),us=h(2,(e,t)=>e._keyMap._editable?(as(t,!0)(e._keyMap),e):Ri(as(t,!0)(e._keyMap))),hg=h(2,(e,t)=>e._keyMap._editable?(Ef(t)(e._keyMap),e):Ri(Ef(t)(e._keyMap))),cO=h(2,(e,t)=>dg(e,n=>{for(const r of t)hg(n,r)})),aO=h(2,(e,t)=>dg(Ci(),n=>{uO(e,r=>us(n,r));for(const r of t)us(n,r)})),uO=h(2,(e,t)=>Xk(e._keyMap,(n,r)=>t(r))),lO=h(3,(e,t,n)=>Mi(e._keyMap,t,(r,s,o)=>n(r,o))),En=Ci,fO=rO,Ju=sO,dO=oO,pg=iO,es=us,mg=hg,Tf=cO,ls=aO,Jo=lO,xf=Symbol.for("effect/MutableRef"),hO={[xf]:xf,toString(){return Te(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Se(this.current)}},[ne](){return this.toJSON()},pipe(){return N(this,arguments)}},gg=e=>{const t=Object.create(hO);return t.current=e,t},Ni=e=>e.current,_g=h(2,(e,t)=>(e.current=t,e)),Vu="effect/FiberId",fs=Symbol.for(Vu),Vo="None",pa="Runtime",pO="Composite",mO=de(`${Vu}-${Vo}`);var Ud;let gO=class{constructor(){u(this,Ud,fs);u(this,"_tag",Vo);u(this,"id",-1);u(this,"startTimeMillis",-1)}[(Ud=fs,K)](){return mO}[L](t){return yg(t)&&t._tag===Vo}toString(){return Te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[ne](){return this.toJSON()}};var Bd;class _O{constructor(t,n){u(this,"id");u(this,"startTimeMillis");u(this,Bd,fs);u(this,"_tag",pa);this.id=t,this.startTimeMillis=n}[(Bd=fs,K)](){return oe(this,de(`${Vu}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[L](t){return yg(t)&&t._tag===pa&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return Te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[ne](){return this.toJSON()}}const yO=new gO,yg=e=>j(e,fs),ma=e=>{switch(e._tag){case Vo:return En();case pa:return Ju(e.id);case pO:return y(ma(e.left),ls(ma(e.right)))}},$f=J(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>gg(0)),bg=e=>Array.from(ma(e)).map(n=>`#${n}`).join(","),bO=()=>{const e=Ni($f);return y($f,_g(e+1)),new _O(e,Date.now())},Tn=yO,SO=bg,Sg=bO,Hu=Ai,wO=Jk,vO=Hk,wg=Wk,vg=as,kg=ug,kO=Uu,OO=Qk,Og=Mi,ds=Symbol.for("effect/List"),ga=e=>le(e),EO=e=>mw(ku(e),ga),TO=EO(D),xO={[ds]:ds,_tag:"Cons",toString(){return Te(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:ga(this).map(Se)}},[ne](){return this.toJSON()},[L](e){return Tg(e)&&this._tag===e._tag&&TO(this,e)},[K](){return oe(this,Es(ga(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},pipe(){return N(this,arguments)}},Ho=(e,t)=>{const n=Object.create(xO);return n.head=e,n.tail=t,n},$O=de("Nil"),IO={[ds]:ds,_tag:"Nil",toString(){return Te(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[ne](){return this.toJSON()},[K](){return $O},[L](e){return Tg(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return N(this,arguments)}},Eg=Object.create(IO),Tg=e=>j(e,ds),Mt=e=>e._tag==="Nil",AO=e=>e._tag==="Cons",MO=()=>Eg,xn=(e,t)=>Ho(e,t),lr=MO,Wu=e=>Ho(e,Eg),RO=h(2,(e,t)=>NO(t,e)),CO=h(2,(e,t)=>xn(t,e)),NO=h(2,(e,t)=>{if(Mt(e))return t;if(Mt(t))return e;{const n=Ho(t.head,e);let r=n,s=t.tail;for(;!Mt(s);){const o=Ho(s.head,e);r.tail=o,r=o,s=s.tail}return n}}),FO=h(3,(e,t,n)=>{let r=t,s=e;for(;!Mt(s);)r=n(r,s.head),s=s.tail;return r}),PO=e=>{let t=lr(),n=e;for(;!Mt(n);)t=CO(t,n.head),n=n.tail;return t},Fi=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=vu,e}(),jO=Symbol.for("effect/DifferContextPatch");function If(e){return e}const Cs={...Fi.prototype,[jO]:{_Value:If,_Patch:If}},LO=Object.assign(Object.create(Cs),{_tag:"Empty"}),KO=Object.create(LO),xg=()=>KO,DO=Object.assign(Object.create(Cs),{_tag:"AndThen"}),UO=(e,t)=>{const n=Object.create(DO);return n.first=e,n.second=t,n},BO=Object.assign(Object.create(Cs),{_tag:"AddService"}),qO=(e,t)=>{const n=Object.create(BO);return n.key=e,n.service=t,n},JO=Object.assign(Object.create(Cs),{_tag:"RemoveService"}),VO=e=>{const t=Object.create(JO);return t.key=e,t},HO=Object.assign(Object.create(Cs),{_tag:"UpdateService"}),WO=(e,t)=>{const n=Object.create(HO);return n.key=e,n.update=t,n},GO=(e,t)=>{const n=new Map(e.unsafeMap);let r=xg();for(const[s,o]of t.unsafeMap.entries())if(n.has(s)){const i=n.get(s);n.delete(s),D(i,o)||(r=So(WO(s,()=>o))(r))}else n.delete(s),r=So(qO(s,o))(r);for(const[s]of n.entries())r=So(VO(s))(r);return r},So=h(2,(e,t)=>UO(e,t)),zO=h(2,(e,t)=>{if(e._tag==="Empty")return t;let n=!1,r=qe(e);const s=new Map(t.unsafeMap);for(;ir(r);){const i=cr(r),c=fn(r);switch(i._tag){case"Empty":{r=c;break}case"AddService":{s.set(i.key,i.service),r=c;break}case"AndThen":{r=dt(dt(c,i.second),i.first);break}case"RemoveService":{s.delete(i.key),r=c;break}case"UpdateService":{s.set(i.key,i.update(s.get(i.key))),n=!0,r=c;break}}}if(!n)return sr(s);const o=new Map;for(const[i]of t.unsafeMap)s.has(i)&&(o.set(i,s.get(i)),s.delete(i));for(const[i,c]of s)o.set(i,c);return sr(o)}),YO=Symbol.for("effect/DifferHashSetPatch");function hc(e){return e}const Pi={...Fi.prototype,[YO]:{_Value:hc,_Key:hc,_Patch:hc}},ZO=Object.assign(Object.create(Pi),{_tag:"Empty"}),QO=Object.create(ZO),$g=()=>QO,XO=Object.assign(Object.create(Pi),{_tag:"AndThen"}),eE=(e,t)=>{const n=Object.create(XO);return n.first=e,n.second=t,n},tE=Object.assign(Object.create(Pi),{_tag:"Add"}),nE=e=>{const t=Object.create(tE);return t.value=e,t},rE=Object.assign(Object.create(Pi),{_tag:"Remove"}),sE=e=>{const t=Object.create(rE);return t.value=e,t},oE=(e,t)=>{const[n,r]=Jo([e,$g()],([s,o],i)=>dO(i)(s)?[mg(i)(s),o]:[s,_a(nE(i))(o)])(t);return Jo(r,(s,o)=>_a(sE(o))(s))(n)},_a=h(2,(e,t)=>eE(e,t)),iE=h(2,(e,t)=>{if(e._tag==="Empty")return t;let n=t,r=qe(e);for(;ir(r);){const s=cr(r),o=fn(r);switch(s._tag){case"Empty":{r=o;break}case"AndThen":{r=dt(s.first)(dt(s.second)(o));break}case"Add":{n=es(s.value)(n),r=o;break}case"Remove":n=mg(s.value)(n),r=o}}return n}),cE=Symbol.for("effect/DifferReadonlyArrayPatch");function Af(e){return e}const Ns={...Fi.prototype,[cE]:{_Value:Af,_Patch:Af}},aE=Object.assign(Object.create(Ns),{_tag:"Empty"}),uE=Object.create(aE),Ig=()=>uE,lE=Object.assign(Object.create(Ns),{_tag:"AndThen"}),fE=(e,t)=>{const n=Object.create(lE);return n.first=e,n.second=t,n},dE=Object.assign(Object.create(Ns),{_tag:"Append"}),hE=e=>{const t=Object.create(dE);return t.values=e,t},pE=Object.assign(Object.create(Ns),{_tag:"Slice"}),mE=(e,t)=>{const n=Object.create(pE);return n.from=e,n.until=t,n},gE=Object.assign(Object.create(Ns),{_tag:"Update"}),_E=(e,t)=>{const n=Object.create(gE);return n.index=e,n.patch=t,n},yE=e=>{let t=0,n=Ig();for(;t<e.oldValue.length&&t<e.newValue.length;){const r=e.oldValue[t],s=e.newValue[t],o=e.differ.diff(r,s);D(o,e.differ.empty)||(n=wo(n,_E(t,o))),t=t+1}return t<e.oldValue.length&&(n=wo(n,mE(0,t))),t<e.newValue.length&&(n=wo(n,hE(xv(t)(e.newValue)))),n},wo=h(2,(e,t)=>fE(e,t)),bE=h(3,(e,t,n)=>{if(e._tag==="Empty")return t;let r=t.slice(),s=rt(e);for(;go(s);){const o=je(s),i=kn(s);switch(o._tag){case"Empty":{s=i;break}case"AndThen":{i.unshift(o.first,o.second),s=i;break}case"Append":{for(const c of o.values)r.push(c);s=i;break}case"Slice":{r=r.slice(o.from,o.until),s=i;break}case"Update":{r[o.index]=n.patch(o.patch,r[o.index]),s=i;break}}}return r}),SE=Symbol.for("effect/Differ"),wE={[SE]:{_P:te,_V:te}},kr=e=>{const t=Object.create(wE);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},vE=()=>kr({empty:xg(),combine:(e,t)=>So(t)(e),diff:(e,t)=>GO(e,t),patch:(e,t)=>zO(t)(e)}),kE=()=>kr({empty:$g(),combine:(e,t)=>_a(t)(e),diff:(e,t)=>oE(e,t),patch:(e,t)=>iE(t)(e)}),OE=e=>kr({empty:Ig(),combine:(t,n)=>wo(t,n),diff:(t,n)=>yE({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>bE(t,n,e)}),Ag=()=>EE((e,t)=>t),EE=e=>kr({empty:te,combine:(t,n)=>t===te?n:n===te?t:r=>n(t(r)),diff:(t,n)=>D(t,n)?te:mi(n),patch:(t,n)=>e(n,t(n))}),hs=255,Mg=8,ya=e=>e&hs,ba=e=>e>>Mg&hs,Fs=(e,t)=>(e&hs)+((t&e&hs)<<Mg),TE=Fs(0,0),xE=e=>Fs(e,e),$E=e=>Fs(e,0),IE=h(2,(e,t)=>Fs(ya(e)&~t,ba(e))),AE=h(2,(e,t)=>e|t),ME=e=>~e>>>0&hs,RE=0,Or=1,CE=2,Rg=4,Sa=16,Cg=32,NE=e=>ji(e,Cg),FE=h(2,(e,t)=>e|t),Ut=e=>Ng(e)&&!jE(e),Ng=e=>ji(e,Or),ji=h(2,(e,t)=>(e&t)!==0),Fg=(...e)=>e.reduce((t,n)=>t|n,0),PE=Fg(RE),Mf=e=>ji(e,Rg),jE=e=>ji(e,Sa),vo=h(2,(e,t)=>Fs(e^t,t)),ko=h(2,(e,t)=>e&(ME(ya(t))|ba(t))|ya(t)&ba(t)),Rf=kr({empty:TE,diff:(e,t)=>vo(e,t),combine:(e,t)=>AE(t)(e),patch:(e,t)=>ko(t,e)}),LE=xE,Pg=$E,Cf=IE,jg=(e,t)=>({_tag:"Par",left:e,right:t}),no=(e,t)=>({_tag:"Seq",left:e,right:t}),KE=e=>{let t=Wu(e),n=lr();for(;;){const[r,s]=FO(t,[Lg(),lr()],([o,i],c)=>{const[a,l]=DE(c);return[VE(o,a),RO(i,l)]});if(n=UE(n,r),Mt(s))return PO(n);t=s}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},DE=e=>{let t=e,n=Lg(),r=lr(),s=lr();for(;;)switch(t._tag){case"Empty":{if(Mt(r))return[n,s];t=r.head,r=r.tail;break}case"Par":{r=xn(t.right,r),t=t.left;break}case"Seq":{const o=t.left,i=t.right;switch(o._tag){case"Empty":{t=i;break}case"Par":{const c=o.left,a=o.right;t=jg(no(c,i),no(a,i));break}case"Seq":{const c=o.left,a=o.right;t=no(c,no(a,i));break}case"Single":{t=o,s=xn(i,s);break}}break}case"Single":{if(n=JE(n,t),Mt(r))return[n,s];t=r.head,r=r.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},UE=(e,t)=>{if(Mt(e))return Wu(pc(t));if(HE(t))return e;const n=QE(e.head),r=WE(t);return n.length===1&&r.length===1&&D(n[0],r[0])?xn(ZE(e.head,pc(t)),e.tail):xn(pc(t),e)},BE=Symbol.for("effect/RequestBlock/RequestBlockParallel"),qE={_R:e=>e};var qd;qd=BE;class Gu{constructor(t){u(this,"map");u(this,qd,qE);this.map=t}}const Lg=()=>new Gu(Hu()),JE=(e,t)=>new Gu(kO(e.map,t.dataSource,n=>iv(hm(n,dk(t.blockedRequest)),()=>qe(t.blockedRequest)))),VE=(e,t)=>new Gu(Og(e.map,t.map,(n,r,s)=>vg(n,s,Xe(wg(n,s),{onNone:()=>r,onSome:o=>it(r,o)})))),HE=e=>vO(e.map),WE=e=>Array.from(kg(e.map)),pc=e=>YE(OO(e.map,t=>qe(t))),GE=Symbol.for("effect/RequestBlock/RequestBlockSequential"),zE={_R:e=>e};var Jd;Jd=GE;class Kg{constructor(t){u(this,"map");u(this,Jd,zE);this.map=t}}const YE=e=>new Kg(e),ZE=(e,t)=>new Kg(Og(t.map,e.map,(n,r,s)=>vg(n,s,Xe(wg(n,s),{onNone:()=>Gt(),onSome:o=>it(o,r)})))),QE=e=>Array.from(kg(e.map)),XE=e=>Array.from(e.map),Ps="Die",$n="Empty",Er="Fail",Tr="Interrupt",fr="Parallel",dr="Sequential",Dg="effect/Cause",Ug=Symbol.for(Dg),eT={_E:e=>e},xr={[Ug]:eT,[K](){return y(A(Dg),V(A(hT(this))),oe(this))},[L](e){return tT(e)&&dT(this,e)},pipe(){return N(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Se(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Se(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Se(this.left),right:Se(this.right)}}},toString(){return Ls(this)},[ne](){return this.toJSON()}},ps=(()=>{const e=Object.create(xr);return e._tag=$n,e})(),Wo=e=>{const t=Object.create(xr);return t._tag=Er,t.error=e,t},Qe=e=>{const t=Object.create(xr);return t._tag=Ps,t.defect=e,t},Bt=e=>{const t=Object.create(xr);return t._tag=Tr,t.fiberId=e,t},js=(e,t)=>{const n=Object.create(xr);return n._tag=fr,n.left=e,n.right=t,n},Ue=(e,t)=>{const n=Object.create(xr);return n._tag=dr,n.left=e,n.right=t,n},tT=e=>j(e,Ug),nT=e=>e._tag===$n,rT=e=>e._tag===$n?!0:hr(e,!0,(t,n)=>{switch(n._tag){case $n:return R(t);case Ps:case Er:case Tr:return R(!1);default:return I()}}),sT=e=>Z(uT(e)),zu=e=>Zu(void 0,mT)(e),oT=e=>or(hr(e,Gt(),(t,n)=>n._tag===Er?R(y(t,dt(n.error))):I())),Bg=e=>or(hr(e,Gt(),(t,n)=>n._tag===Ps?R(y(t,dt(n.defect))):I())),iT=e=>hr(e,En(),(t,n)=>n._tag===Tr?R(y(t,es(n.fiberId))):I()),cT=e=>qg(e,t=>t._tag===Er?R(t.error):I()),aT=e=>{const t=cT(e);switch(t._tag){case"None":return be(e);case"Some":return q(t.value)}},uT=e=>qg(e,t=>t._tag===Tr?R(t.fiberId):I()),lT=e=>Yu(e,{onEmpty:I(),onFail:t=>R(Qe(t)),onDie:t=>R(Qe(t)),onInterrupt:()=>I(),onSequential:(t,n)=>Z(t)&&Z(n)?R(Ue(t.value,n.value)):Z(t)&&ue(n)?R(t.value):ue(t)&&Z(n)?R(n.value):I(),onParallel:(t,n)=>Z(t)&&Z(n)?R(js(t.value,n.value)):Z(t)&&ue(n)?R(t.value):ue(t)&&Z(n)?R(n.value):I()}),Nf=e=>Yu(e,{onEmpty:ps,onFail:()=>ps,onDie:t=>Qe(t),onInterrupt:t=>Bt(t),onSequential:Ue,onParallel:js}),fT=e=>Yu(e,{onEmpty:ps,onFail:t=>Qe(t),onDie:t=>Qe(t),onInterrupt:t=>Bt(t),onSequential:(t,n)=>Ue(t,n),onParallel:(t,n)=>js(t,n)}),dT=(e,t)=>{let n=qe(e),r=qe(t);for(;ir(n)&&ir(r);){const[s,o]=y(cr(n),hr([En(),Gt()],([a,l],f)=>{const[d,p]=wa(f);return R([y(a,ls(d)),y(l,it(p))])})),[i,c]=y(cr(r),hr([En(),Gt()],([a,l],f)=>{const[d,p]=wa(f);return R([y(a,ls(d)),y(l,it(p))])}));if(!D(s,i))return!1;n=o,r=c}return!0},hT=e=>pT(qe(e),Gt()),pT=(e,t)=>{for(;;){const[n,r]=y(e,ym([En(),Gt()],([o,i],c)=>{const[a,l]=wa(c);return[y(o,ls(a)),y(i,it(l))]})),s=pg(n)>0?y(t,dt(n)):t;if(hk(r))return or(s);e=r,t=s}throw new Error(yi("Cause.flattenCauseLoop"))},qg=h(2,(e,t)=>{const n=[e];for(;n.length>0;){const r=n.pop(),s=t(r);switch(s._tag){case"None":{switch(r._tag){case dr:case fr:{n.push(r.right),n.push(r.left);break}}break}case"Some":return s}}return I()}),wa=e=>{let t=e;const n=[];let r=En(),s=Gt();for(;t!==void 0;)switch(t._tag){case $n:{if(n.length===0)return[r,s];t=n.pop();break}case Er:{if(r=es(r,fc(t._tag,t.error)),n.length===0)return[r,s];t=n.pop();break}case Ps:{if(r=es(r,fc(t._tag,t.defect)),n.length===0)return[r,s];t=n.pop();break}case Tr:{if(r=es(r,fc(t._tag,t.fiberId)),n.length===0)return[r,s];t=n.pop();break}case dr:{switch(t.left._tag){case $n:{t=t.right;break}case dr:{t=Ue(t.left.left,Ue(t.left.right,t.right));break}case fr:{t=js(Ue(t.left.left,t.right),Ue(t.left.right,t.right));break}default:{s=dt(s,t.right),t=t.left;break}}break}case fr:{n.push(t.right),t=t.left;break}}throw new Error(yi("Cause.evaluateCauseLoop"))},mT={emptyCase:of,failCase:Gc,dieCase:Gc,interruptCase:of,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},Ff="SequentialCase",Pf="ParallelCase",Yu=h(2,(e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:s,onParallel:o,onSequential:i})=>Zu(e,void 0,{emptyCase:()=>n,failCase:(c,a)=>r(a),dieCase:(c,a)=>t(a),interruptCase:(c,a)=>s(a),sequentialCase:(c,a,l)=>i(a,l),parallelCase:(c,a,l)=>o(a,l)})),hr=h(3,(e,t,n)=>{let r=t,s=e;const o=[];for(;s!==void 0;){const i=n(r,s);switch(r=Z(i)?i.value:r,s._tag){case dr:{o.push(s.right),s=s.left;break}case fr:{o.push(s.right),s=s.left;break}default:{s=void 0;break}}s===void 0&&o.length>0&&(s=o.pop())}return r}),Zu=h(3,(e,t,n)=>{const r=[e],s=[];for(;r.length>0;){const i=r.pop();switch(i._tag){case $n:{s.push(be(n.emptyCase(t)));break}case Er:{s.push(be(n.failCase(t,i.error)));break}case Ps:{s.push(be(n.dieCase(t,i.defect)));break}case Tr:{s.push(be(n.interruptCase(t,i.fiberId)));break}case dr:{r.push(i.right),r.push(i.left),s.push(q({_tag:Ff}));break}case fr:{r.push(i.right),r.push(i.left),s.push(q({_tag:Pf}));break}}}const o=[];for(;s.length>0;){const i=s.pop();switch(i._tag){case"Left":{switch(i.left._tag){case Ff:{const c=o.pop(),a=o.pop(),l=n.sequentialCase(t,c,a);o.push(l);break}case Pf:{const c=o.pop(),a=o.pop(),l=n.parallelCase(t,c,a);o.push(l);break}}break}case"Right":{o.push(i.right);break}}}if(o.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return o.pop()}),Ls=(e,t)=>zu(e)?"All fibers interrupted without errors.":Vg(e).map(function(n){return(t==null?void 0:t.renderErrorCause)!==!0||n.cause===void 0?n.stack:`${n.stack} {
${Jg(n.cause,"  ")}
}`}).join(`
`),Jg=(e,t)=>{const n=e.stack.split(`
`);let r=`${t}[cause]: ${n[0]}`;for(let s=1,o=n.length;s<o;s++)r+=`
${t}${n[s]}`;return e.cause&&(r+=` {
${Jg(e.cause,`${t}  `)}
${t}}`),r};class Go extends globalThis.Error{constructor(n){const r=typeof n=="object"&&n!==null,s=Error.stackTraceLimit;Error.stackTraceLimit=1;super(gT(n),r&&"cause"in n&&typeof n.cause<"u"?{cause:new Go(n.cause)}:void 0);u(this,"span");this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=s,this.name=n instanceof Error?n.name:"Error",r&&(jf in n&&(this.span=n[jf]),Object.keys(n).forEach(o=>{o in this||(this[o]=n[o])})),this.stack=bT(`${this.name}: ${this.message}`,n instanceof Error&&n.stack?n.stack:"",this.span)}}const gT=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(j(e,"toString")&&ks(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return Gp(e)},_T=/\((.*)\)/g,yT=J("effect/Tracer/spanToTrace",()=>new WeakMap),bT=(e,t,n)=>{const r=[e],s=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let o=1;o<s.length&&!s[o].includes("Generator.next");o++){if(s[o].includes("effect_internal_function")){r.pop();break}r.push(s[o].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let o=n,i=0;for(;o&&o._tag==="Span"&&i<10;){const c=yT.get(o);if(typeof c=="function"){const a=c();if(typeof a=="string"){const l=a.matchAll(_T);let f=!1;for(const[,d]of l)f=!0,r.push(`    at ${o.name} (${d})`);f||r.push(`    at ${o.name} (${a.replace(/^at /,"")})`)}else r.push(`    at ${o.name}`)}else r.push(`    at ${o.name}`);o=Tt(o.parent),i++}}return r.join(`
`)},jf=Symbol.for("effect/SpanAnnotation"),Vg=e=>Zu(e,void 0,{emptyCase:()=>[],dieCase:(t,n)=>[new Go(n)],failCase:(t,n)=>[new Go(n)],interruptCase:()=>[],parallelCase:(t,n,r)=>[...n,...r],sequentialCase:(t,n,r)=>[...n,...r]}),Li="Pending",Hg="Done",ST="effect/Deferred",wT=Symbol.for(ST),vT={_E:e=>e,_A:e=>e},kT=e=>({_tag:Li,joiners:e}),OT=e=>({_tag:Hg,effect:e});class Ks{constructor(t){u(this,"self");u(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new Ks(this.self)}}const Wg=(e,t)=>{const n=new $e("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},ET=e=>{const t=new $e("RunBlocked");return t.effect_instruction_i0=e,t},pr=Symbol.for("effect/Effect");class TT{constructor(t,n){u(this,"patch");u(this,"op");u(this,"_op",wu);this.patch=t,this.op=n}}var Vd;class $e{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,Vd,tr);this._op=t}[(Vd=pr,L)](t){return this===t}[K](){return oe(this,yu(this))}pipe(){return N(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Se(this.effect_instruction_i0),effect_instruction_i1:Se(this.effect_instruction_i1),effect_instruction_i2:Se(this.effect_instruction_i2)}}toString(){return Te(this.toJSON())}[ne](){return this.toJSON()}[Symbol.iterator](){return new Ks(new Os(this))}}var Hd;class Gg{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,Hd,tr);this._op=t,this._tag=t}[(Hd=pr,L)](t){return il(t)&&t._op==="Failure"&&D(this.effect_instruction_i0,t.effect_instruction_i0)}[K](){return y(de(this._tag),V(A(this.effect_instruction_i0)),oe(this))}get cause(){return this.effect_instruction_i0}pipe(){return N(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return Te(this.toJSON())}[ne](){return this.toJSON()}[Symbol.iterator](){return new Ks(new Os(this))}}var Wd;class zg{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,Wd,tr);this._op=t,this._tag=t}[(Wd=pr,L)](t){return il(t)&&t._op==="Success"&&D(this.effect_instruction_i0,t.effect_instruction_i0)}[K](){return y(de(this._tag),V(A(this.effect_instruction_i0)),oe(this))}get value(){return this.effect_instruction_i0}pipe(){return N(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Se(this.value)}}toString(){return Te(this.toJSON())}[ne](){return this.toJSON()}[Symbol.iterator](){return new Ks(new Os(this))}}const Ki=e=>j(e,pr),Je=e=>{const t=new $e(Zp);return t.effect_instruction_i0=e,t},xT=h(3,(e,t,n)=>qi(r=>P(e,s=>P(Qg(ge(()=>r(t(s)))),o=>ge(()=>n(s,o)).pipe(In({onFailure:i=>{switch(o._tag){case ut:return et(Ue(o.effect_instruction_i0,i));case lt:return et(i)}},onSuccess:()=>o})))))),Ds=h(2,(e,t)=>P(e,()=>z(t))),Us=e=>Ds(e,void 0),Yg=function(){const e=new $e(wi);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(yi("you're not supposed to end up here"))}return e},zo=(e,t=Tn)=>{const n=new $e(Zr);let r;return n.effect_instruction_i0=s=>{r=e(s)},n.effect_instruction_i1=t,s_(n,s=>Ki(r)?r:ht)},Zg=(e,t=Tn)=>ge(()=>zo(e,t)),ms=(e,t=Tn)=>Yg(e,function(){let n,r;function s(a){n?n(a):r===void 0&&(r=a)}const o=new $e(Zr);o.effect_instruction_i0=a=>{n=a,r&&a(r)},o.effect_instruction_i1=t;let i,c;return this.effect_instruction_i0.length!==1?(c=new AbortController,i=Me(()=>this.effect_instruction_i0(s,c.signal))):i=Me(()=>this.effect_instruction_i0(s)),i||c?s_(o,a=>(c&&c.abort(),i??ht)):o}),va=h(2,(e,t)=>Di(e,{onFailure:t,onSuccess:z})),Yo=Symbol.for("effect/SpanAnnotation"),Lf=Symbol.for("effect/OriginalAnnotation"),Qu=(e,t)=>Z(t)?new Proxy(e,{has(n,r){return r===Yo||r===Lf||r in n},get(n,r){return r===Yo?t.value:r===Lf?e:n[r]}}):e,Kf=e=>Xt(e)&&!(Yo in e)?Je(t=>et(Qe(Qu(e,cl(t))))):et(Qe(e)),Df=e=>$T(()=>Qe(new ix(e))),Zo=e=>Di(e,{onFailure:t=>z(q(t)),onSuccess:t=>z(be(t))}),Qg=e=>MT(e,{onFailure:ee,onSuccess:_e}),Ne=e=>Xt(e)&&!(Yo in e)?Je(t=>et(Wo(Qu(e,cl(t))))):et(Wo(e)),Xg=e=>P(F(e),Ne),et=e=>{const t=new Gg(ut);return t.effect_instruction_i0=e,t},$T=e=>P(F(e),et),IT=Je(e=>z(e.id())),e_=e=>Je(t=>e(t.id())),P=h(2,(e,t)=>{const n=new $e(Fo);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),AT=e=>{const t=new $e("OnStep");return t.effect_instruction_i0=e,t},t_=e=>P(e,te),MT=h(2,(e,t)=>In(e,{onFailure:n=>z(t.onFailure(n)),onSuccess:n=>z(t.onSuccess(n))})),In=h(2,(e,t)=>{const n=new $e(Po);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),Di=h(2,(e,t)=>In(e,{onFailure:n=>{if(Bg(n).length>0)return et(fT(n));const s=oT(n);return s.length>0?t.onFailure(eg(s)):et(n)},onSuccess:t.onSuccess})),qt=h(2,(e,t)=>ge(()=>{const n=le(e),r=Oi(n.length);let s=0;return Ds(el({while:()=>s<n.length,body:()=>t(n[s],s),step:o=>{r[s++]=o}}),r)})),Ui=h(2,(e,t)=>ge(()=>{const n=le(e);let r=0;return el({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})),n_=e=>{const t=new $e(Ts);return t.effect_instruction_i0=LE(Or),t.effect_instruction_i1=()=>e,t},Pe=h(2,(e,t)=>P(e,n=>F(()=>t(n)))),r_=h(2,(e,t)=>Di(e,{onFailure:n=>Xg(()=>t.onFailure(n)),onSuccess:n=>F(()=>t.onSuccess(n))})),Bi=h(2,(e,t)=>In(e,{onFailure:n=>{const r=aT(n);switch(r._tag){case"Left":return Xg(()=>t(r.left));case"Right":return et(r.right)}},onSuccess:z})),Xu=h(2,(e,t)=>qi(n=>In(n(e),{onFailure:r=>{const s=ee(r);return In(t(s),{onFailure:o=>ee(Ue(r,o)),onSuccess:()=>s})},onSuccess:r=>{const s=_e(r);return Ji(t(s),s)}}))),s_=h(2,(e,t)=>Xu(e,p_({onFailure:n=>zu(n)?Us(t(iT(n))):ht,onSuccess:()=>ht}))),RT=h(2,(e,t)=>FT(e,t,z)),z=e=>{const t=new zg(lt);return t.effect_instruction_i0=e,t},ge=e=>{const t=new $e(wi);return t.commit=e,t},F=e=>{const t=new $e(Yp);return t.effect_instruction_i0=e,t},CT=h(e=>e.length===3||e.length===2&&!(Xt(e[1])&&"onlyEffect"in e[1]),(e,t)=>P(e,n=>{const r=typeof t=="function"?t(n):t;return Ki(r)?Ds(r,n):Ow(r)?zo(s=>{r.then(o=>s(z(n)),o=>s(Ne(new lx(o,"An unknown error occurred in Effect.tap"))))}):z(n)})),NT=e=>Je(t=>{const n=t.getFiberRef(Oa),r=y(n,we(()=>t.scope()));return e(Vi(Oa,R(r)))}),FT=h(3,(e,t,n)=>In(e,{onFailure:r=>Bg(r).length>0?et(dm(lT(r))):t(),onSuccess:n})),o_=e=>{const t=new $e(Ts);return t.effect_instruction_i0=Pg(Or),t.effect_instruction_i1=()=>e,t},qi=e=>Yg(e,function(){const t=new $e(Ts);return t.effect_instruction_i0=Pg(Or),t.effect_instruction_i1=n=>Ng(n)?Me(()=>this.effect_instruction_i0(n_)):Me(()=>this.effect_instruction_i0(o_)),t}),ht=z(void 0),PT=e=>{const t=new $e(Ts);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},el=e=>{const t=new $e(jo);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},tl=e=>{const t=new $e(mo);return typeof(e==null?void 0:e.priority)<"u"?ex(t,e.priority):t},i_=h(2,(e,t)=>P(e,n=>Pe(t,r=>[n,r]))),c_=h(2,(e,t)=>P(e,n=>Ds(t,n))),Ji=h(2,(e,t)=>P(e,()=>t)),mc=Zg(()=>{const e=setInterval(()=>{},2147483647);return F(()=>clearInterval(e))}),jT=e=>P(IT,t=>y(e,a_(t))),a_=h(2,(e,t)=>P(e.interruptAsFork(t),()=>e.await)),LT={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return N(this,arguments)}},KT={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return N(this,arguments)}},DT={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return N(this,arguments)}},UT={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return N(this,arguments)}},u_={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return N(this,arguments)}},l_={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return N(this,arguments)}},BT={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return N(this,arguments)}},qT={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return N(this,arguments)}},JT="effect/FiberRef",VT=Symbol.for(JT),HT={_A:e=>e},nl=e=>Je(t=>_e(t.getFiberRef(e))),rl=h(2,(e,t)=>P(nl(e),t)),Uf=h(2,(e,t)=>WT(e,()=>[void 0,t])),WT=h(2,(e,t)=>Je(n=>{const[r,s]=t(n.getFiberRef(e));return n.setFiberRef(e,s),z(r)})),Vi=h(3,(e,t,n)=>xT(c_(nl(t),Uf(t,n)),()=>e,r=>Uf(t,r))),Ve=(e,t)=>$r(e,{differ:Ag(),fork:(t==null?void 0:t.fork)??te,join:t==null?void 0:t.join}),GT=e=>{const t=kE();return $r(e,{differ:t,fork:t.empty})},zT=e=>{const t=OE(Ag());return $r(e,{differ:t,fork:t.empty})},f_=e=>{const t=vE();return $r(e,{differ:t,fork:t.empty})},$r=(e,t)=>({...$s,[VT]:HT,initial:e,commit(){return nl(this)},diff:(r,s)=>t.differ.diff(r,s),combine:(r,s)=>t.differ.combine(r,s),patch:r=>s=>t.differ.patch(r,s),fork:t.fork,join:t.join??((r,s)=>s)}),YT=e=>$r(e,{differ:Rf,fork:Rf.empty}),Bs=J(Symbol.for("effect/FiberRef/currentContext"),()=>f_(Nu())),Hi=J(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Ve(0)),d_=J(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Ve(2048)),ZT=J(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Ve(Hu())),QT=J(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Ve(u_)),XT=J(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Ve(lr())),ex=h(2,(e,t)=>Vi(e,Hi,t)),tx=J(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Ve("unbounded")),nx=J(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Ve(!0)),rx=J(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Ve(R(l_))),ka=J(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>zT(nr())),Oa=J(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Ve(I(),{fork:()=>I(),join:(e,t)=>e})),ro=J(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Ve(ps,{fork:()=>ps,join:(e,t)=>e})),sx=(e,t)=>e.addFinalizer(()=>Us(t)),ox=(e,t)=>e.close(t),Wi=(e,t)=>e.fork(t),sl=function(){class e extends globalThis.Error{commit(){return Ne(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[ne](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?Ls(Wo(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,Hw),e}(),ol=(e,t)=>{class n extends sl{constructor(){super(...arguments);u(this,"_tag",t)}}return Object.assign(n.prototype,e),n.prototype.name=t,n},Bf=Symbol.for("effect/Cause/errors/RuntimeException"),ix=ol({[Bf]:Bf},"RuntimeException"),cx=Symbol.for("effect/Cause/errors/InterruptedException"),ax=e=>j(e,cx),qf=Symbol.for("effect/Cause/errors/IllegalArgument"),ux=ol({[qf]:qf},"IllegalArgumentException"),Jf=Symbol.for("effect/Cause/errors/NoSuchElement"),h_=ol({[Jf]:Jf},"NoSuchElementException"),Vf=Symbol.for("effect/Cause/errors/UnknownException"),lx=function(){class e extends sl{constructor(r,s){super(s??"An unknown error occurred",{cause:r});u(this,"_tag","UnknownException");u(this,"error");this.error=r}}return Object.assign(e.prototype,{[Vf]:Vf,name:"UnknownException"}),e}(),il=e=>Ki(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),gc=(e,t)=>px(e,t!=null&&t.parallel?js:Ue),fx=e=>ee(Qe(e)),Hf=e=>ee(Wo(e)),ee=e=>{const t=new Gg(ut);return t.effect_instruction_i0=e,t},dx=e=>ee(Bt(e)),_c=h(2,(e,t)=>{switch(e._tag){case ut:return ee(e.effect_instruction_i0);case lt:return _e(t(e.effect_instruction_i0))}}),p_=h(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case ut:return t(e.effect_instruction_i0);case lt:return n(e.effect_instruction_i0)}}),_e=e=>{const t=new zg(lt);return t.effect_instruction_i0=e,t},dn=_e(void 0),hx=h(3,(e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case ut:switch(t._tag){case lt:return ee(e.effect_instruction_i0);case ut:return ee(n(e.effect_instruction_i0,t.effect_instruction_i0))}case lt:switch(t._tag){case lt:return _e(r(e.effect_instruction_i0,t.effect_instruction_i0));case ut:return ee(t.effect_instruction_i0)}}}),px=(e,t)=>{const n=Xm(e);return ir(n)?y(fn(n),ym(y(cr(n),_c(qe)),(r,s)=>y(r,hx(s,{onSuccess:(o,i)=>y(o,dt(i)),onFailure:t}))),_c(or),_c(r=>bn(r)),R):I()},mx=e=>({...$s,[wT]:vT,state:gg(kT([])),commit(){return m_(this)},blockingOn:e}),m_=e=>Zg(t=>{const n=Ni(e.state);switch(n._tag){case Hg:return t(n.effect);case Li:return n.joiners.push(t),gx(e,t)}},e.blockingOn),g_=(e,t)=>{const n=Ni(e.state);if(n._tag===Li){_g(e.state,OT(t));for(let r=0,s=n.joiners.length;r<s;r++)n.joiners[r](t)}},gx=(e,t)=>F(()=>{const n=Ni(e.state);if(n._tag===Li){const r=n.joiners.indexOf(t);r>=0&&n.joiners.splice(r,1)}}),_x=Je(e=>_e(e.currentContext)),yx=()=>_x,qs=e=>P(yx(),e),bx=h(2,(e,t)=>Vi(Bs,t)(e)),Sx=h(2,(e,t)=>qs(n=>bx(e,t(n)))),cl=e=>{const t=e.currentSpan;return t!==void 0&&t._tag==="Span"?R(t):I()},Wf=Symbol.for("effect/MutableHashMap"),wx={[Wf]:Wf,[Symbol.iterator](){return new al(this)},toString(){return Te(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Se)}},[ne](){return this.toJSON()},pipe(){return N(this,arguments)}};class al{constructor(t){u(this,"self");u(this,"referentialIterator");u(this,"bucketIterator");this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const t=this.referentialIterator.next();return t.done?(this.bucketIterator=new vx(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new al(this.self)}}class vx{constructor(t){u(this,"backing");u(this,"currentBucket");this.backing=t}next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}}const kx=()=>{const e=Object.create(wx);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},cn=h(2,(e,t)=>{if(No(t)===!1)return e.referential.has(t)?R(e.referential.get(t)):I();const n=t[K](),r=e.buckets.get(n);return r===void 0?I():Ox(e,r,t)}),Ox=(e,t,n,r=!1)=>{for(let s=0,o=t.length;s<o;s++)if(n[L](t[s][0])){const i=t[s][1];return r&&(t.splice(s,1),e.bucketsSize--),R(i)}return I()},Pr=h(2,(e,t)=>Z(cn(e,t))),jr=h(3,(e,t,n)=>{if(No(t)===!1)return e.referential.set(t,n),e;const r=t[K](),s=e.buckets.get(r);return s===void 0?(e.buckets.set(r,[[t,n]]),e.bucketsSize++,e):(Ex(e,s,t),s.push([t,n]),e.bucketsSize++,e)}),Ex=(e,t,n)=>{for(let r=0,s=t.length;r<s;r++)if(n[L](t[r][0])){t.splice(r,1),e.bucketsSize--;return}},Tx="effect/Clock",Gf=Symbol.for(Tx),ul=Nn("effect/Clock"),xx=2**31-1,zf={unsafeSchedule(e,t){const n=la(t);if(n>xx)return Gc;let r=!1;const s=setTimeout(()=>{r=!0,e()},n);return()=>(clearTimeout(s),!r)}},Yf=function(){const e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return()=>BigInt(Math.round(performance.now()*1e6));const t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return()=>t+BigInt(Math.round(performance.now()*1e6))}(),$x=function(){const e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return Yf;const t=Yf()-e.bigint();return()=>t+e.bigint()}();var Gd;Gd=Gf;class Ix{constructor(){u(this,Gd,Gf);u(this,"currentTimeMillis",F(()=>this.unsafeCurrentTimeMillis()));u(this,"currentTimeNanos",F(()=>this.unsafeCurrentTimeNanos()))}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return $x()}scheduler(){return z(zf)}sleep(t){return ms(n=>{const r=zf.unsafeSchedule(()=>n(ht),t);return Us(F(r))})}}const Ax=()=>new Ix,__="And",y_="Or",b_="InvalidData",S_="MissingData",w_="SourceUnavailable",v_="Unsupported",Mx="effect/ConfigError",Zf=Symbol.for(Mx),Ir={_tag:"ConfigError",[Zf]:Zf},k_=(e,t)=>{const n=Object.create(Ir);return n._op=__,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},O_=(e,t)=>{const n=Object.create(Ir);return n._op=y_,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},Rx=(e,t,n={pathDelim:"."})=>{const r=Object.create(Ir);return r._op=b_,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Invalid data at ${y(this.path,vr(n.pathDelim))}: "${this.message}")`}}),r},An=(e,t,n={pathDelim:"."})=>{const r=Object.create(Ir);return r._op=S_,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Missing data at ${y(this.path,vr(n.pathDelim))}: "${this.message}")`}}),r},Cx=(e,t,n,r={pathDelim:"."})=>{const s=Object.create(Ir);return s._op=w_,s.path=e,s.message=t,s.cause=n,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Source unavailable at ${y(this.path,vr(r.pathDelim))}: "${this.message}")`}}),s},Nx=(e,t,n={pathDelim:"."})=>{const r=Object.create(Ir);return r._op=v_,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${y(this.path,vr(n.pathDelim))}: "${this.message}")`}}),r},hn=h(2,(e,t)=>{switch(e._op){case __:return k_(hn(e.left,t),hn(e.right,t));case y_:return O_(hn(e.left,t),hn(e.right,t));case b_:return Rx([...t,...e.path],e.message);case S_:return An([...t,...e.path],e.message);case w_:return Cx([...t,...e.path],e.message,e.cause);case v_:return Nx([...t,...e.path],e.message)}}),Fx={_tag:"Empty"},yc=h(2,(e,t)=>{let n=Wu(t),r=e;for(;AO(n);){const s=n.head;switch(s._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=xn(s.first,xn(s.second,n.tail));break}case"MapName":{r=qn(r,s.f),n=n.tail;break}case"Nested":{r=Lo(r,s.name),n=n.tail;break}case"Unnested":{if(y(Qr(r),dv(s.name)))r=kn(r),n=n.tail;else return q(An(r,`Expected ${s.name} to be in path in ConfigProvider#unnested`));break}}}return be(r)}),Px="Constant",jx="Fail",Lx="Fallback",Kx="Described",Dx="Lazy",Ux="MapOrFail",Bx="Nested",qx="Primitive",Jx="Sequence",Vx="HashMap",Hx="ZipWith";var Qf={};const Qo=(e,t)=>[...e,...t],Wx="effect/ConfigProvider",Xf=Symbol.for(Wx),Gx=Nn("effect/ConfigProvider"),zx="effect/ConfigProviderFlat",ed=Symbol.for(zx),Yx=e=>({[Xf]:Xf,pipe(){return N(this,arguments)},...e}),Zx=e=>({[ed]:ed,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),Qx=e=>Yx({load:t=>P(ze(e,nr(),t,!1),n=>Xe(Qr(n),{onNone:()=>Ne(An(nr(),`Expected a single value having structure: ${t}`)),onSome:z})),flattened:e}),Xx=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),r=a=>y(a,vr(t)),s=a=>a.split(t),o=()=>typeof process<"u"&&"env"in process&&typeof Qf=="object"?Qf:{};return Qx(Zx({load:(a,l,f=!0)=>{const d=r(a),p=o(),m=d in p?R(p[d]):I();return y(m,Bi(()=>An(a,`Expected ${d} to exist in the process context`)),P(_=>s$(_,a,l,n,f)))},enumerateChildren:a=>F(()=>{const l=o(),p=Object.keys(l).map(m=>s(m.toUpperCase())).filter(m=>{for(let _=0;_<a.length;_++){const k=y(a,gm(_)),g=m[_];if(g===void 0||k!==g)return!1}return!0}).flatMap(m=>m.slice(a.length,a.length+1));return fO(p)}),patch:Fx}))},e$=(e,t,n,r)=>{const s=lf(n.length,a=>a>=r.length?I():R([e(a),a+1])),o=lf(r.length,a=>a>=n.length?I():R([t(a),a+1])),i=Qo(n,s),c=Qo(r,o);return[i,c]},t$=(e,t)=>{let n=t;if(n._tag==="Nested"){const r=e.slice();for(;n._tag==="Nested";)r.push(n.name),n=n.config;return r}return e},ze=(e,t,n,r)=>{const s=n;switch(s._tag){case Px:return z(rt(s.value));case Kx:return ge(()=>ze(e,t,s.config,r));case jx:return Ne(An(t,s.message));case Lx:return y(ge(()=>ze(e,t,s.first,r)),va(o=>s.condition(o)?y(ze(e,t,s.second,r),va(i=>Ne(O_(o,i)))):Ne(o)));case Dx:return ge(()=>ze(e,t,s.config(),r));case Ux:return ge(()=>y(ze(e,t,s.original,r),P(qt(o=>y(s.mapOrFail(o),Bi(hn(t$(t,s.original))))))));case Bx:return ge(()=>ze(e,Qo(t,rt(s.name)),s.config,r));case qx:return y(yc(t,e.patch),P(o=>y(e.load(o,s,r),P(i=>{if(i.length===0){const c=y(Ov(o),we(()=>"<n/a>"));return Ne(An([],`Expected ${s.description} with name ${c}`))}return z(i)}))));case Jx:return y(yc(t,e.patch),P(o=>y(e.enumerateChildren(o),P(i$),P(i=>i.length===0?ge(()=>Pe(ze(e,t,s.config,!0),rt)):y(qt(i,c=>ze(e,bv(t,`[${c}]`),s.config,!0)),Pe(c=>{const a=Nv(c);return a.length===0?rt(nr()):rt(a)}))))));case Vx:return ge(()=>y(yc(t,e.patch),P(o=>y(e.enumerateChildren(o),P(i=>y(i,qt(c=>ze(e,Qo(o,rt(c)),s.valueConfig,r)),Pe(c=>c.length===0?rt(Hu()):y(o$(c),qn(a=>wO(uf(le(i),a)))))))))));case Hx:return ge(()=>y(ze(e,t,s.left,r),Zo,P(o=>y(ze(e,t,s.right,r),Zo,P(i=>{if(Ie(o)&&Ie(i))return Ne(k_(o.left,i.left));if(Ie(o)&&$t(i))return Ne(o.left);if($t(o)&&Ie(i))return Ne(i.left);if($t(o)&&$t(i)){const c=y(t,vr(".")),a=n$(t,c),[l,f]=e$(a,a,y(o.right,qn(be)),y(i.right,qn(be)));return y(l,uf(f),qt(([d,p])=>y(i_(d,p),Pe(([m,_])=>s.zip(m,_)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},n$=(e,t)=>n=>q(An(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),r$=(e,t)=>e.split(new RegExp(`\\s*${Do(t)}\\s*`)),s$=(e,t,n,r,s)=>s?y(r$(e,r),qt(o=>n.parse(o.trim())),Bi(hn(t))):y(n.parse(e),r_({onFailure:hn(t),onSuccess:rt})),o$=e=>Object.keys(e[0]).map(t=>e.map(n=>n[t])),i$=e=>y(qt(e,a$),r_({onFailure:()=>nr(),onSuccess:os(rr)}),Zo,Pe(nv)),c$=/^(\[(\d+)\])$/,a$=e=>{const t=e.match(c$);if(t!==null){const n=t[2];return y(n!==void 0&&n.length>0?R(n):I(),ki(u$))}return I()},u$=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?I():R(t)},td=Symbol.for("effect/Console"),E_=Nn("effect/Console"),l$={[td]:td,assert(e,...t){return F(()=>{console.assert(e,...t)})},clear:F(()=>{console.clear()}),count(e){return F(()=>{console.count(e)})},countReset(e){return F(()=>{console.countReset(e)})},debug(...e){return F(()=>{console.debug(...e)})},dir(e,t){return F(()=>{console.dir(e,t)})},dirxml(...e){return F(()=>{console.dirxml(...e)})},error(...e){return F(()=>{console.error(...e)})},group(e){return e!=null&&e.collapsed?F(()=>console.groupCollapsed(e==null?void 0:e.label)):F(()=>console.group(e==null?void 0:e.label))},groupEnd:F(()=>{console.groupEnd()}),info(...e){return F(()=>{console.info(...e)})},log(...e){return F(()=>{console.log(...e)})},table(e,t){return F(()=>{console.table(e,t)})},time(e){return F(()=>console.time(e))},timeEnd(e){return F(()=>console.timeEnd(e))},timeLog(e,...t){return F(()=>{console.timeLog(e,...t)})},trace(...e){return F(()=>{console.trace(...e)})},warn(...e){return F(()=>{console.warn(...e)})},unsafe:console},f$="effect/Random",nd=Symbol.for(f$),d$=Nn("effect/Random");var zd;zd=nd;class h${constructor(t){u(this,"seed");u(this,zd,nd);u(this,"PRNG");this.seed=t,this.PRNG=new Mw(t)}get next(){return F(()=>this.PRNG.number())}get nextBoolean(){return Pe(this.next,t=>t>.5)}get nextInt(){return F(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,n){return Pe(this.next,r=>(n-t)*r+t)}nextIntBetween(t,n){return F(()=>this.PRNG.integer(n-t)+t)}shuffle(t){return p$(t,n=>this.nextIntBetween(0,n))}}const p$=(e,t)=>ge(()=>y(F(()=>Array.from(e)),P(n=>{const r=[];for(let s=n.length;s>=2;s=s-1)r.push(s);return y(r,Ui(s=>y(t(s),Pe(o=>m$(n,s-1,o)))),Ds(Xm(n)))}))),m$=(e,t,n)=>{const r=e[t];return e[t]=e[n],e[n]=r,e},g$=e=>new h$(A(e)),rd=Symbol.for("effect/Tracer"),_$=e=>({[rd]:rd,...e}),T_=Nn("effect/Tracer"),x_=Nn("effect/ParentSpan"),sd=function(){const e="abcdef0123456789",t=e.length;return function(n){let r="";for(let s=0;s<n;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}}();class y${constructor(t,n,r,s,o,i){u(this,"name");u(this,"parent");u(this,"context");u(this,"links");u(this,"startTime");u(this,"kind");u(this,"_tag","Span");u(this,"spanId");u(this,"traceId","native");u(this,"sampled",!0);u(this,"status");u(this,"attributes");u(this,"events",[]);this.name=t,this.parent=n,this.context=r,this.links=s,this.startTime=o,this.kind=i,this.status={_tag:"Started",startTime:o},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:sd(32),this.spanId=sd(16)}end(t,n){this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime}}attribute(t,n){this.attributes.set(t,n)}event(t,n,r){this.events.push([t,n,r??{}])}}const b$=_$({span:(e,t,n,r,s,o)=>new y$(e,t,n,r,s,o),context:e=>e()}),S$=y(Nu(),Fr(ul,Ax()),Fr(E_,l$),Fr(d$,g$(Math.random())),Fr(Gx,Xx()),Fr(T_,b$)),Xo=J(Symbol.for("effect/DefaultServices/currentServices"),()=>f_(S$));function w$(e){return new Yt(e)}function v$(){return w$(new Map)}const od=Symbol.for("effect/FiberRefs");var Yd;Yd=od;class Yt{constructor(t){u(this,"locals");u(this,Yd,od);this.locals=t}pipe(){return N(this,arguments)}}const k$=(e,t,n,r=!1)=>{const s=e;let o=t,i=n,c=r,a;for(;a===void 0;)if(se(o)&&se(i)){const l=je(o)[0],f=kn(o),d=je(i)[0],p=je(i)[1],m=kn(i);l.startTimeMillis<d.startTimeMillis?(i=m,c=!0):l.startTimeMillis>d.startTimeMillis?o=f:l.id<d.id?(i=m,c=!0):l.id>d.id?o=f:a=[p,c]}else a=[s.initial,!0];return a},O$=h(3,(e,t,n)=>{const r=new Map(e.locals);return n.locals.forEach((s,o)=>{const i=s[0][1];if(!s[0][0][L](t)){if(!r.has(o)){if(D(i,o.initial))return;r.set(o,[[t,o.join(o.initial,i)]]);return}const c=r.get(o),[a,l]=k$(o,c,s);if(l){const f=o.diff(a,i),d=c[0][1],p=o.join(d,o.patch(f)(d));if(!D(d,p)){let m;const _=c[0][0];_[L](t)?m=[[_,p],...c.slice(1)]:m=[[t,p],...c],r.set(o,m)}}}}),new Yt(r)}),E$=h(2,(e,t)=>{const n=new Map;return $_(e,n,t),new Yt(n)}),$_=(e,t,n)=>{e.locals.forEach((r,s)=>{const o=r[0][1],i=s.patch(s.fork)(o);D(o,i)?t.set(s,r):t.set(s,[[n,i],...r])})},I_=h(2,(e,t)=>{const n=new Map(e.locals);return n.delete(t),new Yt(n)}),T$=h(2,(e,t)=>e.locals.has(t)?R(je(e.locals.get(t))[1]):I()),gs=h(2,(e,t)=>y(T$(e,t),we(()=>t.initial))),Ea=h(2,(e,{fiberId:t,fiberRef:n,value:r})=>{if(e.locals.size===0)return new Yt(new Map([[n,[[t,r]]]]));const s=new Map(e.locals);return Ta(s,t,n,r),new Yt(s)}),Ta=(e,t,n,r)=>{const s=e.get(n)??[];let o;if(se(s)){const[i,c]=je(s);if(i[L](t)){if(D(c,r))return;o=[[t,r],...s.slice(1)]}else o=[[t,r],...s]}else o=[[t,r]];e.set(n,o)},x$=h(2,(e,{entries:t,forkAs:n})=>{if(e.locals.size===0)return new Yt(new Map(t));const r=new Map(e.locals);return n!==void 0&&$_(e,r,n),t.forEach(([s,o])=>{o.length===1?Ta(r,o[0][0],s,o[0][1]):o.forEach(([i,c])=>{Ta(r,i,s,c)})}),new Yt(r)}),$$=gs,I$=x$,A$=v$,M$=LT,R$=KT,C$=DT,N$=UT,F$=u_,P$=l_,j$=BT,L$=qT,K$=y(rr,fm(e=>e.ordinal)),D$=ov(K$),U$=e=>{switch(e){case"All":return M$;case"Debug":return P$;case"Error":return C$;case"Fatal":return R$;case"Info":return F$;case"Trace":return j$;case"None":return L$;case"Warning":return N$}},A_=e=>e.replace(/[\s="]/g,"_"),B$=e=>t=>`${A_(t.label)}=${e-t.startTime}ms`,q$=xs,J$=Ww;let V$=class extends J${};const M_="Empty",R_="Add",C_="Remove",N_="Update",F_="AndThen",H$={_tag:M_},W$=(e,t)=>{const n=new Map(e.locals);let r=H$;for(const[s,o]of t.locals.entries()){const i=je(o)[1],c=n.get(s);if(c!==void 0){const a=je(c)[1];D(a,i)||(r=bc({_tag:N_,fiberRef:s,patch:s.diff(a,i)})(r))}else r=bc({_tag:R_,fiberRef:s,value:i})(r);n.delete(s)}for(const[s]of n.entries())r=bc({_tag:C_,fiberRef:s})(r);return r},bc=h(2,(e,t)=>({_tag:F_,first:e,second:t})),G$=h(3,(e,t,n)=>{let r=n,s=rt(e);for(;se(s);){const o=je(s),i=kn(s);switch(o._tag){case M_:{s=i;break}case R_:{r=Ea(r,{fiberId:t,fiberRef:o.fiberRef,value:o.value}),s=i;break}case C_:{r=I_(r,o.fiberRef),s=i;break}case N_:{const c=gs(r,o.fiberRef);r=Ea(r,{fiberId:t,fiberRef:o.fiberRef,value:o.fiberRef.patch(o.patch)(c)}),s=i;break}case F_:{s=Lo(o.first)(Lo(o.second)(i));break}}}return r}),P_="effect/MetricLabel",xa=Symbol.for(P_);var Zd;class z${constructor(t,n){u(this,"key");u(this,"value");u(this,Zd,xa);u(this,"_hash");this.key=t,this.value=n,this._hash=de(P_+this.key+this.value)}[(Zd=xa,K)](){return this._hash}[L](t){return Z$(t)&&this.key===t.key&&this.value===t.value}pipe(){return N(this,arguments)}}const Y$=(e,t)=>new z$(e,t),Z$=e=>j(e,xa),Q$="Sequential",X$="Parallel",eI="ParallelN",j_={_tag:Q$},tI={_tag:X$},nI=e=>({_tag:eI,parallelism:e}),$a=j_,Ia=tI,Aa=nI,rI=W$,sI=G$,Gi="effect/FiberStatus",Mn=Symbol.for(Gi),ei="Done",id="Running",cd="Suspended",oI=de(`${Gi}-${ei}`);var Qd;class iI{constructor(){u(this,Qd,Mn);u(this,"_tag",ei)}[(Qd=Mn,K)](){return oI}[L](t){return ll(t)&&t._tag===ei}}var Xd;class cI{constructor(t){u(this,"runtimeFlags");u(this,Xd,Mn);u(this,"_tag",id);this.runtimeFlags=t}[(Xd=Mn,K)](){return y(A(Gi),V(A(this._tag)),V(A(this.runtimeFlags)),oe(this))}[L](t){return ll(t)&&t._tag===id&&this.runtimeFlags===t.runtimeFlags}}var eh;class aI{constructor(t,n){u(this,"runtimeFlags");u(this,"blockingOn");u(this,eh,Mn);u(this,"_tag",cd);this.runtimeFlags=t,this.blockingOn=n}[(eh=Mn,K)](){return y(A(Gi),V(A(this._tag)),V(A(this.runtimeFlags)),V(A(this.blockingOn)),oe(this))}[L](t){return ll(t)&&t._tag===cd&&this.runtimeFlags===t.runtimeFlags&&D(this.blockingOn,t.blockingOn)}}const uI=new iI,lI=e=>new cI(e),fI=(e,t)=>new aI(e,t),ll=e=>j(e,Mn),dI=e=>e._tag===ei,hI=uI,L_=lI,pI=fI,mI=dI,gI=Symbol.for("effect/Micro"),ti=Symbol.for("effect/Micro/MicroExit"),ad=Symbol.for("effect/Micro/MicroCause"),_I={_E:te};var th;class K_ extends globalThis.Error{constructor(n,r,s){const o=`MicroCause.${n}`;let i,c,a;if(r instanceof globalThis.Error){i=`(${o}) ${r.name}`,c=r.message;const l=c.split(`
`).length;a=r.stack?`(${o}) ${r.stack.split(`
`).slice(0,l+3).join(`
`)}`:`${i}: ${c}`}else i=o,c=er(r,0),a=`${i}: ${c}`;s.length>0&&(a+=`
    ${s.join(`
    `)}`);super(c);u(this,"_tag");u(this,"traces");u(this,th);this._tag=n,this.traces=s,this[ad]=_I,this.name=i,this.stack=a}pipe(){return N(this,arguments)}toString(){return this.stack}[(th=ad,ne)](){return this.stack}}class yI extends K_{constructor(n,r=[]){super("Die",n,r);u(this,"defect");this.defect=n}}const bI=(e,t=[])=>new yI(e,t);class SI extends K_{constructor(t=[]){super("Interrupt","interrupted",t)}}const wI=(e=[])=>new SI(e),vI=e=>e._tag==="Interrupt",ud=Symbol.for("effect/Micro/MicroFiber"),kI={_A:te,_E:te};var nh;nh=ud;class OI{constructor(t,n=!0){u(this,"context");u(this,"interruptible");u(this,nh);u(this,"_stack",[]);u(this,"_observers",[]);u(this,"_exit");u(this,"_children");u(this,"currentOpCount",0);u(this,"_interrupted",!1);u(this,"_yielded");this.context=t,this.interruptible=n,this[ud]=kI}getRef(t){return ek(this.context,t)}addObserver(t){return this._exit?(t(this._exit),pw):(this._observers.push(t),()=>{const n=this._observers.indexOf(t);n>=0&&this._observers.splice(n,1)})}unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(ml))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){const s=this._yielded;this._yielded=void 0,s()}const n=this.runLoop(t);if(n===so)return;const r=ld.interruptChildren&&ld.interruptChildren(this);if(r!==void 0)return this.evaluate(ri(r,()=>n));this._exit=n;for(let s=0;s<this._observers.length;s++)this._observers[s](n);this._observers.length=0}runLoop(t){let n=!1,r=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(gl).shouldYield(this)){n=!0;const s=r;r=ri(II,()=>s)}if(r=r[Ma](this),r===so){const s=this._yielded;return ti in s?(this._yielded=void 0,s):so}}}catch(s){return j(r,Ma)?Ra(s):Ra(`MicroFiber.runLoop: Not a valid effect: ${String(r)}`)}}getCont(t){for(;;){const n=this._stack.pop();if(!n)return;const r=n[ni]&&n[ni](this);if(r)return{[t]:r};if(n[t])return n}}yieldWith(t){return this._yielded=t,so}children(){return this._children??(this._children=new Set)}}const ld=J("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),D_=Symbol.for("effect/Micro/identifier"),ye=Symbol.for("effect/Micro/args"),Ma=Symbol.for("effect/Micro/evaluate"),mr=Symbol.for("effect/Micro/successCont"),Yn=Symbol.for("effect/Micro/failureCont"),ni=Symbol.for("effect/Micro/ensureCont"),so=Symbol.for("effect/Micro/Yield"),EI={_A:te,_E:te,_R:te},TI={...q$,_op:"Micro",[gI]:EI,pipe(){return N(this,arguments)},[Symbol.iterator](){return new Vp(new Os(this))},toJSON(){return{_id:"Micro",op:this[D_],...ye in this?{args:this[ye]}:void 0}},toString(){return Te(this)},[ne](){return Te(this)}};function xI(e){return Ra("Micro.evaluate: Not implemented")}const zi=e=>({...TI,[D_]:e.op,[Ma]:e.eval??xI,[mr]:e.contA,[Yn]:e.contE,[ni]:e.ensure}),fl=e=>{const t=zi(e);return function(){const n=Object.create(t);return n[ye]=e.single===!1?arguments:arguments[0],n}},U_=e=>{const t={...zi(e),[ti]:ti,_tag:e.op,get[e.prop](){return this[ye]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[ye]}},[L](n){return RI(n)&&n._tag===e.op&&D(this[ye],n[ye])},[K](){return oe(this,V(de(e.op))(A(this[ye])))}};return function(n){const r=Object.create(t);return r[ye]=n,r[mr]=void 0,r[Yn]=void 0,r[ni]=void 0,r}},dl=U_({op:"Success",prop:"value",eval(e){const t=e.getCont(mr);return t?t[mr](this[ye],e):e.yieldWith(this)}}),B_=U_({op:"Failure",prop:"cause",eval(e){let t=e.getCont(Yn);for(;vI(this[ye])&&t&&e.interruptible;)t=e.getCont(Yn);return t?t[Yn](this[ye],e):e.yieldWith(this)}}),$I=fl({op:"Yield",eval(e){let t=!1;return e.getRef(gl).scheduleTask(()=>{t||e.evaluate(CI)},this[ye]??0),e.yieldWith(()=>{t=!0})}}),II=$I(0),AI=dl(void 0),hl=fl({op:"WithMicroFiber",eval(e){return this[ye](e)}}),ri=h(2,(e,t)=>{const n=Object.create(MI);return n[ye]=e,n[mr]=t,n}),MI=zi({op:"OnSuccess",eval(e){return e._stack.push(this),this[ye]}}),RI=e=>j(e,ti),q_=dl,pl=B_,ml=pl(wI()),Ra=e=>pl(bI(e)),CI=q_(void 0),NI="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class J_{constructor(){u(this,"tasks",[]);u(this,"running",!1);u(this,"afterScheduled",()=>{this.running=!1,this.runTasks()})}scheduleTask(t,n){this.tasks.push(t),this.running||(this.running=!0,NI(this.afterScheduled))}runTasks(){const t=this.tasks;this.tasks=[];for(let n=0,r=t.length;n<r;n++)t[n]()}shouldYield(t){return t.currentOpCount>=t.getRef(jI)}flush(){for(;this.tasks.length>0;)this.runTasks()}}const FI=h(2,(e,t)=>hl(n=>{const r=n.context;return n.context=t(r),DI(e,()=>(n.context=r,AI))})),PI=h(2,(e,t)=>FI(e,Gm(t)));class jI extends zm()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class gl extends zm()("effect/Micro/currentScheduler",{defaultValue:()=>new J_}){}const LI=h(2,(e,t)=>{const n=Object.create(KI);return n[ye]=e,n[mr]=t.onSuccess,n[Yn]=t.onFailure,n}),KI=zi({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[ye]}}),DI=h(2,(e,t)=>BI(n=>LI(n(e),{onFailure:r=>ri(t(pl(r)),()=>B_(r)),onSuccess:r=>ri(t(q_(r)),()=>dl(r))}))),V_=fl({op:"SetInterruptible",ensure(e){if(e.interruptible=this[ye],e._interrupted&&e.interruptible)return()=>ml}}),UI=e=>hl(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(V_(!1)),t._interrupted?ml:e)),BI=e=>hl(t=>t.interruptible?(t.interruptible=!1,t._stack.push(V_(!0)),e(UI)):e(te)),qI=(e,t)=>{const n=new OI(gl.context(new J_));return n.evaluate(e),n};class H_{constructor(){u(this,"buckets",[])}scheduleTask(t,n){const r=this.buckets.length;let s,o=0;for(;o<r&&this.buckets[o][0]<=n;o++)s=this.buckets[o];s&&s[0]===n?s[1].push(t):o===r?this.buckets.push([n,[t]]):this.buckets.splice(o,0,[n,[t]])}}class JI{constructor(t){u(this,"maxNextTickBeforeTimer");u(this,"running",!1);u(this,"tasks",new H_);this.maxNextTickBeforeTimer=t}starveInternal(t){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[r,s]of n)for(let o=0;o<s.length;o++)s[o]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(d_)?t.getFiberRef(Hi):!1}scheduleTask(t,n){this.tasks.scheduleTask(t,n),this.running||(this.running=!0,this.starve())}}const W_=J(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new JI(2048));class VI{constructor(){u(this,"tasks",new H_);u(this,"deferred",!1)}scheduleTask(t,n){this.deferred?W_.scheduleTask(t,n):this.tasks.scheduleTask(t,n)}shouldYield(t){return t.currentOpCount>t.getFiberRef(d_)?t.getFiberRef(Hi):!1}flush(){for(;this.tasks.buckets.length>0;){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of t)for(let s=0;s<r.length;s++)r[s]()}this.deferred=!0}}const G_=J(Symbol.for("effect/FiberRef/currentScheduler"),()=>Ve(W_)),z_=J(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Ve(new Map)),fd=(e,t,n,r)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return rl(tx,s=>s==="unbounded"?n():s>1?r(s):t());default:return e>1?r(e):t()}},_l="InterruptSignal",yl="Stateful",bl="Resume",Sl="YieldNow",Sc=e=>({_tag:_l,cause:e}),Oo=e=>({_tag:yl,onFiber:e}),Ln=e=>({_tag:bl,effect:e}),HI=()=>({_tag:Sl}),WI="effect/FiberScope",si=Symbol.for(WI);var rh;rh=si;class GI{constructor(){u(this,rh,si);u(this,"fiberId",Tn);u(this,"roots",new Set)}add(t,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}var sh;sh=si;class zI{constructor(t,n){u(this,"fiberId");u(this,"parent");u(this,sh,si);this.fiberId=t,this.parent=n}add(t,n){this.parent.tell(Oo(r=>{r.addChild(n),n.addObserver(()=>{r.removeChild(n)})}))}}const YI=e=>new zI(e.id(),e),wl=J(Symbol.for("effect/FiberScope/Global"),()=>new GI),ZI="effect/Fiber",Y_=Symbol.for(ZI),Z_={_E:e=>e,_A:e=>e},QI={[Y_]:Z_,pipe(){return N(this,arguments)}},XI="effect/Fiber",eA=Symbol.for(XI),vl=e=>c_(t_(e.await),e.inheritAll);({...$s,...QI});const rn="effect/FiberCurrent",tA="effect/Logger",nA=Symbol.for(tA),rA={_Message:e=>e,_Output:e=>e},kl=e=>({[nA]:rA,log:e,pipe(){return N(this,arguments)}}),sA=/^[^\s"=]*$/,oA=(e,t)=>({annotations:n,cause:r,date:s,fiberId:o,logLevel:i,message:c,spans:a})=>{const l=_=>_.match(sA)?_:e(_),f=(_,k)=>`${A_(_)}=${l(k)}`,d=(_,k)=>" "+f(_,k);let p=f("timestamp",s.toISOString());p+=d("level",i.label),p+=d("fiber",bg(o));const m=gv(c);for(let _=0;_<m.length;_++)p+=d("message",er(m[_],t));nT(r)||(p+=d("cause",Ls(r,{renderErrorCause:!0})));for(const _ of a)p+=" "+B$(s.getTime())(_);for(const[_,k]of n)p+=d(_,er(k,t));return p},iA=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,cA=kl(oA(iA)),aA=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;aA&&process.stdout.isTTY;const Q_="effect/MetricBoundaries",Ca=Symbol.for(Q_);var oh;class uA{constructor(t){u(this,"values");u(this,oh,Ca);u(this,"_hash");this.values=t,this._hash=y(de(Q_),V(Es(this.values)))}[(oh=Ca,K)](){return this._hash}[L](t){return lA(t)&&D(this.values,t.values)}pipe(){return N(this,arguments)}}const lA=e=>j(e,Ca),fA=e=>{const t=y(e,pm(qe(Number.POSITIVE_INFINITY)),Pv);return new uA(t)},dA=e=>y(mv(e.count-1,t=>e.start*Math.pow(e.factor,t)),Fu,fA),hA="effect/MetricKeyType",X_=Symbol.for(hA),ey="effect/MetricKeyType/Counter",Na=Symbol.for(ey),pA="effect/MetricKeyType/Frequency",mA=Symbol.for(pA),gA="effect/MetricKeyType/Gauge",_A=Symbol.for(gA),ty="effect/MetricKeyType/Histogram",Fa=Symbol.for(ty),yA="effect/MetricKeyType/Summary",bA=Symbol.for(yA),ny={_In:e=>e,_Out:e=>e};var ih,ch;class SA{constructor(t,n){u(this,"incremental");u(this,"bigint");u(this,ch,ny);u(this,ih,Na);u(this,"_hash");this.incremental=t,this.bigint=n,this._hash=de(ey)}[(ch=X_,ih=Na,K)](){return this._hash}[L](t){return ry(t)}pipe(){return N(this,arguments)}}var ah,uh;class wA{constructor(t){u(this,"boundaries");u(this,uh,ny);u(this,ah,Fa);u(this,"_hash");this.boundaries=t,this._hash=y(de(ty),V(A(this.boundaries)))}[(uh=X_,ah=Fa,K)](){return this._hash}[L](t){return sy(t)&&D(this.boundaries,t.boundaries)}pipe(){return N(this,arguments)}}const vA=e=>new SA((e==null?void 0:e.incremental)??!1,(e==null?void 0:e.bigint)??!1),kA=e=>new wA(e),ry=e=>j(e,Na),OA=e=>j(e,mA),EA=e=>j(e,_A),sy=e=>j(e,Fa),TA=e=>j(e,bA),xA="effect/MetricKey",oy=Symbol.for(xA),$A={_Type:e=>e},IA=ku(D);var lh;class Ol{constructor(t,n,r,s=[]){u(this,"name");u(this,"keyType");u(this,"description");u(this,"tags");u(this,lh,$A);u(this,"_hash");this.name=t,this.keyType=n,this.description=r,this.tags=s,this._hash=y(de(this.name+this.description),V(A(this.keyType)),V(Es(this.tags)))}[(lh=oy,K)](){return this._hash}[L](t){return AA(t)&&this.name===t.name&&D(this.keyType,t.keyType)&&D(this.description,t.description)&&IA(this.tags,t.tags)}pipe(){return N(this,arguments)}}const AA=e=>j(e,oy),MA=(e,t)=>new Ol(e,vA(t),vi(t==null?void 0:t.description)),RA=(e,t,n)=>new Ol(e,kA(t),vi(n)),CA=h(2,(e,t)=>t.length===0?e:new Ol(e.name,e.keyType,e.description,_o(e.tags,t))),NA="effect/MetricState",Js=Symbol.for(NA),iy="effect/MetricState/Counter",Pa=Symbol.for(iy),cy="effect/MetricState/Frequency",ja=Symbol.for(cy),ay="effect/MetricState/Gauge",La=Symbol.for(ay),uy="effect/MetricState/Histogram",Ka=Symbol.for(uy),ly="effect/MetricState/Summary",Da=Symbol.for(ly),Vs={_A:e=>e};var fh,dh;class FA{constructor(t){u(this,"count");u(this,dh,Vs);u(this,fh,Pa);this.count=t}[(dh=Js,fh=Pa,K)](){return y(A(iy),V(A(this.count)),oe(this))}[L](t){return HA(t)&&this.count===t.count}pipe(){return N(this,arguments)}}const PA=ku(D);var hh,ph;class jA{constructor(t){u(this,"occurrences");u(this,ph,Vs);u(this,hh,ja);u(this,"_hash");this.occurrences=t}[(ph=Js,hh=ja,K)](){return y(de(cy),V(Es(le(this.occurrences.entries()))),oe(this))}[L](t){return WA(t)&&PA(le(this.occurrences.entries()),le(t.occurrences.entries()))}pipe(){return N(this,arguments)}}var mh,gh;class LA{constructor(t){u(this,"value");u(this,gh,Vs);u(this,mh,La);this.value=t}[(gh=Js,mh=La,K)](){return y(A(ay),V(A(this.value)),oe(this))}[L](t){return GA(t)&&this.value===t.value}pipe(){return N(this,arguments)}}var _h,yh;class KA{constructor(t,n,r,s,o){u(this,"buckets");u(this,"count");u(this,"min");u(this,"max");u(this,"sum");u(this,yh,Vs);u(this,_h,Ka);this.buckets=t,this.count=n,this.min=r,this.max=s,this.sum=o}[(yh=Js,_h=Ka,K)](){return y(A(uy),V(A(this.buckets)),V(A(this.count)),V(A(this.min)),V(A(this.max)),V(A(this.sum)),oe(this))}[L](t){return zA(t)&&D(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return N(this,arguments)}}var bh,Sh;class DA{constructor(t,n,r,s,o,i){u(this,"error");u(this,"quantiles");u(this,"count");u(this,"min");u(this,"max");u(this,"sum");u(this,Sh,Vs);u(this,bh,Da);this.error=t,this.quantiles=n,this.count=r,this.min=s,this.max=o,this.sum=i}[(Sh=Js,bh=Da,K)](){return y(A(ly),V(A(this.error)),V(A(this.quantiles)),V(A(this.count)),V(A(this.min)),V(A(this.max)),V(A(this.sum)),oe(this))}[L](t){return YA(t)&&this.error===t.error&&D(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return N(this,arguments)}}const UA=e=>new FA(e),BA=e=>new jA(e),qA=e=>new LA(e),JA=e=>new KA(e.buckets,e.count,e.min,e.max,e.sum),VA=e=>new DA(e.error,e.quantiles,e.count,e.min,e.max,e.sum),HA=e=>j(e,Pa),WA=e=>j(e,ja),GA=e=>j(e,La),zA=e=>j(e,Ka),YA=e=>j(e,Da),ZA="effect/MetricHook",QA=Symbol.for(ZA),XA={_In:e=>e,_Out:e=>e},Hs=e=>({[QA]:XA,pipe(){return N(this,arguments)},...e}),dd=BigInt(0),eM=e=>{let t=e.keyType.bigint?dd:0;const n=e.keyType.incremental?e.keyType.bigint?s=>s>=dd:s=>s>=0:s=>!0,r=s=>{n(s)&&(t=t+s)};return Hs({get:()=>UA(t),update:r,modify:r})},tM=e=>{const t=new Map;for(const r of e.keyType.preregisteredWords)t.set(r,0);const n=r=>{const s=t.get(r)??0;t.set(r,s+1)};return Hs({get:()=>BA(t),update:n,modify:n})},nM=(e,t)=>{let n=t;return Hs({get:()=>qA(n),update:r=>{n=r},modify:r=>{n=n+r}})},rM=e=>{const t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),s=new Float32Array(n);let o=0,i=0,c=Number.MAX_VALUE,a=Number.MIN_VALUE;y(t,os(rr),qn((d,p)=>{s[p]=d}));const l=d=>{let p=0,m=n;for(;p!==m;){const _=Math.floor(p+(m-p)/2),k=s[_];d<=k?m=_:p=_,m===p+1&&(d<=s[p]?m=p:p=m)}r[p]=r[p]+1,o=o+1,i=i+d,d<c&&(c=d),d>a&&(a=d)},f=()=>{const d=Oi(n);let p=0;for(let m=0;m<n;m++){const _=s[m],k=r[m];p=p+k,d[m]=[_,p]}return d};return Hs({get:()=>JA({buckets:f(),count:o,min:c,max:a,sum:i}),update:l,modify:l})},sM=e=>{const{error:t,maxAge:n,maxSize:r,quantiles:s}=e.keyType,o=y(s,os(rr)),i=Oi(r);let c=0,a=0,l=0,f=Number.MAX_VALUE,d=Number.MIN_VALUE;const p=_=>{const k=[];let g=0;for(;g!==r-1;){const b=i[g];if(b!=null){const[S,w]=b,x=ua(_-S);$k(x,_k)&&x<=n&&k.push(w)}g=g+1}return oM(t,o,os(k,rr))},m=(_,k)=>{if(r>0){c=c+1;const g=c%r;i[g]=[k,_]}a=a+1,l=l+_,_<f&&(f=_),_>d&&(d=_)};return Hs({get:()=>VA({error:t,quantiles:p(Date.now()),count:a,min:f,max:d,sum:l}),update:([_,k])=>m(_,k),modify:([_,k])=>m(_,k)})},oM=(e,t,n)=>{const r=n.length;if(!se(t))return nr();const s=t[0],o=t.slice(1),i=hd(e,r,I(),0,s,n),c=rt(i);return o.forEach(a=>{c.push(hd(e,r,i.value,i.consumed,a,i.rest))}),qn(c,a=>[a.quantile,a.value])},hd=(e,t,n,r,s,o)=>{let i=e,c=t,a=n,l=r,f=s,d=o,p=e,m=t,_=n,k=r,g=s,b=o;for(;;){if(!se(d))return{quantile:f,value:I(),consumed:l,rest:[]};if(f===1)return{quantile:f,value:R(_m(d)),consumed:l+d.length,rest:[]};const S=Tv(d,O=>O<=d[0]),w=f*c,x=i/2*w,v=l+S[0].length,E=Math.abs(v-w);if(v<w-x){p=i,m=c,_=Qr(d),k=v,g=f,b=S[1],i=p,c=m,a=_,l=k,f=g,d=b;continue}if(v>w+x)return{quantile:f,value:a,consumed:l,rest:d};switch(a._tag){case"None":{p=i,m=c,_=Qr(d),k=v,g=f,b=S[1],i=p,c=m,a=_,l=k,f=g,d=b;continue}case"Some":{const O=Math.abs(w-a.value);if(E<O){p=i,m=c,_=Qr(d),k=v,g=f,b=S[1],i=p,c=m,a=_,l=k,f=g,d=b;continue}return{quantile:f,value:R(a.value),consumed:l,rest:d}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},iM="effect/MetricPair",cM=Symbol.for(iM),aM={_Type:e=>e},uM=(e,t)=>({[cM]:aM,metricKey:e,metricState:t,pipe(){return N(this,arguments)}}),lM="effect/MetricRegistry",pd=Symbol.for(lM);var wh;wh=pd;class fM{constructor(){u(this,wh,pd);u(this,"map",kx())}snapshot(){const t=[];for(const[n,r]of this.map)t.push(uM(n,r.get()));return t}get(t){const n=y(this.map,cn(t),Tt);if(n==null){if(ry(t.keyType))return this.getCounter(t);if(EA(t.keyType))return this.getGauge(t);if(OA(t.keyType))return this.getFrequency(t);if(sy(t.keyType))return this.getHistogram(t);if(TA(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(t){let n=y(this.map,cn(t),Tt);if(n==null){const r=eM(t);y(this.map,Pr(t))||y(this.map,jr(t,r)),n=r}return n}getFrequency(t){let n=y(this.map,cn(t),Tt);if(n==null){const r=tM(t);y(this.map,Pr(t))||y(this.map,jr(t,r)),n=r}return n}getGauge(t){let n=y(this.map,cn(t),Tt);if(n==null){const r=nM(t,t.keyType.bigint?BigInt(0):0);y(this.map,Pr(t))||y(this.map,jr(t,r)),n=r}return n}getHistogram(t){let n=y(this.map,cn(t),Tt);if(n==null){const r=rM(t);y(this.map,Pr(t))||y(this.map,jr(t,r)),n=r}return n}getSummary(t){let n=y(this.map,cn(t),Tt);if(n==null){const r=sM(t);y(this.map,Pr(t))||y(this.map,jr(t,r)),n=r}return n}}const dM=()=>new fM,hM="effect/Metric",pM=Symbol.for(hM),mM={_Type:e=>e,_In:e=>e,_Out:e=>e},md=J(Symbol.for("effect/Metric/globalMetricRegistry"),()=>dM()),fy=function(e,t,n,r){const s=Object.assign(o=>CT(o,i=>bM(s,i)),{[pM]:mM,keyType:e,unsafeUpdate:t,unsafeValue:n,unsafeModify:r,register(){return this.unsafeValue([]),this},pipe(){return N(this,arguments)}});return s},Yi=(e,t)=>dy(MA(e,t)),dy=e=>{let t;const n=new WeakMap,r=s=>{if(s.length===0)return t!==void 0||(t=md.get(e)),t;let o=n.get(s);return o!==void 0||(o=md.get(CA(e,s)),n.set(s,o)),o};return fy(e.keyType,(s,o)=>r(o).update(s),s=>r(s).get(),(s,o)=>r(o).modify(s))},gM=(e,t,n)=>dy(RA(e,t,n)),_M=h(3,(e,t,n)=>yM(e,[Y$(t,n)])),yM=h(2,(e,t)=>fy(e.keyType,(n,r)=>e.unsafeUpdate(n,_o(t,r)),n=>e.unsafeValue(_o(t,n)),(n,r)=>e.unsafeModify(n,_o(t,r)))),bM=h(2,(e,t)=>rl(ka,n=>F(()=>e.unsafeUpdate(t,n)))),SM="effect/Request",wM=Symbol.for(SM),vM={_E:e=>e,_A:e=>e};({...vu,[wM]:0});const kM=h(2,(e,t)=>rl(z_,n=>F(()=>{if(n.has(e)){const r=n.get(e);r.state.completed||(r.state.completed=!0,g_(r.result,t))}}))),OM="effect/Supervisor",Zi=Symbol.for(OM),El={_T:e=>e};var vh;vh=Zi;const jl=class jl{constructor(t,n){u(this,"underlying");u(this,"value0");u(this,vh,El);this.underlying=t,this.value0=n}get value(){return this.value0}onStart(t,n,r,s){this.underlying.onStart(t,n,r,s)}onEnd(t,n){this.underlying.onEnd(t,n)}onEffect(t,n){this.underlying.onEffect(t,n)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new jl(this,y(this.value,Pe(t)))}zip(t){return new ii(this,t)}};let oi=jl;var kh;kh=Zi;const Ll=class Ll{constructor(t,n){u(this,"left");u(this,"right");u(this,"_tag","Zip");u(this,kh,El);this.left=t,this.right=n}get value(){return i_(this.left.value,this.right.value)}onStart(t,n,r,s){this.left.onStart(t,n,r,s),this.right.onStart(t,n,r,s)}onEnd(t,n){this.left.onEnd(t,n),this.right.onEnd(t,n)}onEffect(t,n){this.left.onEffect(t,n),this.right.onEffect(t,n)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new oi(this,y(this.value,Pe(t)))}zip(t){return new Ll(this,t)}};let ii=Ll;const hy=e=>j(e,Zi)&&Jp(e,"Zip");var Oh;Oh=Zi;class EM{constructor(t){u(this,"effect");u(this,Oh,El);this.effect=t}get value(){return this.effect}onStart(t,n,r,s){}onEnd(t,n){}onEffect(t,n){}onSuspend(t){}onResume(t){}map(t){return new oi(this,y(this.value,Pe(t)))}zip(t){return new ii(this,t)}onRun(t,n){return t()}}const TM=e=>new EM(e),Qi=J("effect/Supervisor/none",()=>TM(ht)),xM=kr,py="Empty",my="AddSupervisor",gy="RemoveSupervisor",_y="AndThen",ts={_tag:py},Eo=(e,t)=>({_tag:_y,first:e,second:t}),$M=(e,t)=>IM(t,qe(e)),IM=(e,t)=>{let n=e,r=t;for(;ir(r);){const s=cr(r);switch(s._tag){case py:{r=fn(r);break}case my:{n=n.zip(s.supervisor),r=fn(r);break}case gy:{n=Ua(n,s.supervisor),r=fn(r);break}case _y:{r=dt(s.first)(dt(s.second)(fn(r)));break}}}return n},Ua=(e,t)=>D(e,t)?Qi:hy(e)?Ua(e.left,t).zip(Ua(e.right,t)):e,ci=e=>D(e,Qi)?En():hy(e)?y(ci(e.left),ls(ci(e.right))):Ju(e),AM=(e,t)=>{if(D(e,t))return ts;const n=ci(e),r=ci(t),s=y(r,Tf(n),Jo(ts,(i,c)=>Eo(i,{_tag:my,supervisor:c}))),o=y(n,Tf(r),Jo(ts,(i,c)=>Eo(i,{_tag:gy,supervisor:c})));return Eo(s,o)},MM=xM({empty:ts,patch:$M,combine:Eo,diff:AM}),RM=Yi("effect_fiber_started",{incremental:!0}),gd=Yi("effect_fiber_active"),CM=Yi("effect_fiber_successes",{incremental:!0}),NM=Yi("effect_fiber_failures",{incremental:!0}),FM=_M(gM("effect_fiber_lifetimes",dA({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Lr="Continue",PM="Done",_d="Yield",jM={_E:e=>e,_A:e=>e},oo=e=>{throw new Error(`BUG: FiberRuntime - ${er(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},kt=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Ot=J("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Kr={[Fo]:(e,t,n)=>Me(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>_e(_e(n)),[Po]:(e,t,n)=>Me(()=>t.effect_instruction_i2(n)),[wu]:(e,t,n)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),Ut(e.currentRuntimeFlags)&&e.isInterrupted()?ee(e.getInterruptedCause()):_e(n)),[jo]:(e,t,n)=>(Me(()=>t.effect_instruction_i2(n)),Me(()=>t.effect_instruction_i0())?(e.pushStack(t),Me(()=>t.effect_instruction_i1())):ht),[po]:(e,t,n)=>{const r=Me(()=>t.effect_instruction_i0.next(n));return r.done?_e(r.value):(e.pushStack(t),Cw(r.value))}},LM={[_l]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),Ut(t)?ee(r.cause):n),[bl]:(e,t,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[yl]:(e,t,n,r)=>(r.onFiber(e,L_(t)),n),[Sl]:(e,t,n,r)=>P(tl(),()=>n)},KM=e=>Ui(KE(e),t=>wn(XE(t),([n,r])=>{const s=new Map,o=[];for(const c of r){o.push(bn(c));for(const a of c)s.set(a.request,a)}const i=o.flat();return Vi(XM(n.runAll(o),i,()=>i.forEach(c=>{c.listeners.interrupted=!0})),z_,s)},!1,!1)),DM=gi();var Eh,Th;class yy extends V${constructor(n,r,s){super();u(this,Th,Z_);u(this,Eh,jM);u(this,"_fiberRefs");u(this,"_fiberId");u(this,"_queue",new Array);u(this,"_children",null);u(this,"_observers",new Array);u(this,"_running",!1);u(this,"_stack",[]);u(this,"_asyncInterruptor",null);u(this,"_asyncBlockingOn",null);u(this,"_exitValue",null);u(this,"_steps",[]);u(this,"_isYielding",!1);u(this,"currentRuntimeFlags");u(this,"currentOpCount",0);u(this,"currentSupervisor");u(this,"currentScheduler");u(this,"currentTracer");u(this,"currentSpan");u(this,"currentContext");u(this,"currentDefaultServices");u(this,"run",()=>{this.drainQueueOnCurrentThread()});if(this.currentRuntimeFlags=s,this._fiberId=n,this._fiberRefs=r,Mf(s)){const o=this.getFiberRef(ka);RM.unsafeUpdate(1,o),gd.unsafeUpdate(1,o)}this.refreshRefCache()}commit(){return vl(this)}id(){return this._fiberId}resume(n){this.tell(Ln(n))}get status(){return this.ask((n,r)=>r)}get runtimeFlags(){return this.ask((n,r)=>mI(r)?n.currentRuntimeFlags:r.runtimeFlags)}scope(){return YI(this)}get children(){return this.ask(n=>Array.from(n.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(ro)}fiberRefs(){return this.ask(n=>n.getFiberRefs())}ask(n){return ge(()=>{const r=mx(this._fiberId);return this.tell(Oo((s,o)=>{g_(r,F(()=>n(s,o)))})),m_(r)})}tell(n){this._queue.push(n),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return ms(n=>{const r=s=>n(z(s));return this.tell(Oo((s,o)=>{s._exitValue!==null?r(this._exitValue):s.addObserver(r)})),F(()=>this.tell(Oo((s,o)=>{s.removeObserver(r)})))},this.id())}get inheritAll(){return Je((n,r)=>{const s=n.id(),o=n.getFiberRefs(),i=r.runtimeFlags,c=this.getFiberRefs(),a=O$(o,s,c);n.setFiberRefs(a);const l=n.getFiberRef(vd),f=y(vo(i,l),Cf(Or),Cf(Sa));return PT(f)})}get poll(){return F(()=>vi(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(n){return F(()=>this.tell(Sc(Bt(n))))}unsafeInterruptAsFork(n){this.tell(Sc(Bt(n)))}addObserver(n){this._exitValue!==null?n(this._exitValue):this._observers.push(n)}removeObserver(n){this._observers=this._observers.filter(r=>r!==n)}getFiberRefs(){return this.setFiberRef(vd,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(n){this._fiberRefs=I_(this._fiberRefs,n)}getFiberRef(n){return this._fiberRefs.locals.has(n)?this._fiberRefs.locals.get(n)[0][1]:n.initial}setFiberRef(n,r){this._fiberRefs=Ea(this._fiberRefs,{fiberId:this._fiberId,fiberRef:n,value:r}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(Xo),this.currentTracer=this.currentDefaultServices.unsafeMap.get(T_.key),this.currentSupervisor=this.getFiberRef(QM),this.currentScheduler=this.getFiberRef(G_),this.currentContext=this.getFiberRef(Bs),this.currentSpan=this.currentContext.unsafeMap.get(x_.key)}setFiberRefs(n){this._fiberRefs=n,this.refreshRefCache()}addChild(n){this.getChildren().add(n)}removeChild(n){this.getChildren().delete(n)}transferChildren(n){const r=this._children;if(this._children=null,r!==null&&r.size>0)for(const s of r)s._exitValue===null&&n.add(this.currentRuntimeFlags,s)}drainQueueOnCurrentThread(){let n=!0;for(;n;){let r=Lr;const s=globalThis[rn];globalThis[rn]=this;try{for(;r===Lr;)r=this._queue.length===0?PM:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[rn]=s}this._queue.length>0&&!this._running?(this._running=!0,r===_d?(this.drainQueueLaterOnExecutor(),n=!1):n=!0):n=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(Hi))}drainQueueWhileRunning(n,r){let s=r;for(;this._queue.length>0;){const o=this._queue.splice(0,1)[0];s=LM[o._tag](this,n,s,o)}return s}isInterrupted(){return!rT(this.getFiberRef(ro))}addInterruptedCause(n){const r=this.getFiberRef(ro);this.setFiberRef(ro,Ue(r,n))}processNewInterruptSignal(n){this.addInterruptedCause(n),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let n=!1;for(const r of this._children)r.tell(Sc(Bt(this.id()))),n=!0;return n}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const n=this._children.values();this._children=null;let r=!1;return el({while:()=>!r,body:()=>{const o=n.next();return o.done?F(()=>{r=!0}):Us(o.value.await)},step:()=>{}})}return null}reportExitValue(n){if(Mf(this.currentRuntimeFlags)){const r=this.getFiberRef(ka),s=this.id().startTimeMillis,o=Date.now();switch(FM.unsafeUpdate(o-s,r),gd.unsafeUpdate(-1,r),n._tag){case lt:{CM.unsafeUpdate(1,r);break}case ut:{NM.unsafeUpdate(1,r);break}}}if(n._tag==="Failure"){const r=this.getFiberRef(rx);!zu(n.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",n.cause,r)}}setExitValue(n){this._exitValue=n,this.reportExitValue(n);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](n);this._observers=[]}getLoggers(){return this.getFiberRef(VM)}log(n,r,s){const o=Z(s)?s.value:this.getFiberRef(QT),i=this.getFiberRef(UM);if(D$(i,o))return;const c=this.getFiberRef(XT),a=this.getFiberRef(ZT),l=this.getLoggers(),f=this.getFiberRefs();if(pg(l)>0){const d=Hm(this.getFiberRef(Xo),ul),p=new Date(d.unsafeCurrentTimeMillis());jw(f,()=>{for(const m of l)m.log({fiberId:this.id(),logLevel:o,message:n,cause:r,context:f,spans:c,annotations:a,date:p})})}}evaluateMessageWhileSuspended(n){switch(n._tag){case Sl:return _d;case _l:return this.processNewInterruptSignal(n.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(ee(n.cause)),this._asyncInterruptor=null),Lr;case bl:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(n.effect),Lr;case yl:return n.onFiber(this,this._exitValue!==null?hI:pI(this.currentRuntimeFlags,this._asyncBlockingOn)),Lr;default:return oo(n)}}evaluateEffect(n){this.currentSupervisor.onResume(this);try{let r=Ut(this.currentRuntimeFlags)&&this.isInterrupted()?ee(this.getInterruptedCause()):n;for(;r!==null;){const s=r,o=this.runLoop(s);if(o===kt){const i=Ot.currentOp;Ot.currentOp=null,i._op===mo?NE(this.currentRuntimeFlags)?(this.tell(HI()),this.tell(Ln(dn)),r=null):r=dn:i._op===Zr&&(r=null)}else{this.currentRuntimeFlags=y(this.currentRuntimeFlags,FE(Sa));const i=this.interruptAllChildren();i!==null?r=P(i,()=>o):(this._queue.length===0?this.setExitValue(o):this.tell(Ln(o)),r=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(n){if(this._running)this.tell(Ln(n));else{this._running=!0;const r=globalThis[rn];globalThis[rn]=this;try{this.evaluateEffect(n)}finally{this._running=!1,globalThis[rn]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(n){this.tell(Ln(n))}patchRuntimeFlags(n,r){const s=ko(n,r);return globalThis[rn]=this,this.currentRuntimeFlags=s,s}initiateAsync(n,r){let s=!1;const o=i=>{s||(s=!0,this.tell(Ln(i)))};Ut(n)&&(this._asyncInterruptor=o);try{r(o)}catch(i){o(et(Qe(i)))}}pushStack(n){this._stack.push(n),n._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const n=this._stack.pop();if(n)return n._op==="OnStep"&&this._steps.pop(),n}getNextSuccessCont(){let n=this.popStack();for(;n;){if(n._op!==ic)return n;n=this.popStack()}}getNextFailCont(){let n=this.popStack();for(;n;){if(n._op!==Fo&&n._op!==jo&&n._op!==po)return n;n=this.popStack()}}[(Th=Y_,Eh=eA,Kw)](n){return F(()=>Wm(this.currentContext,n))}Left(n){return Ne(n.left)}None(n){return Ne(new h_)}Right(n){return _e(n.right)}Some(n){return _e(n.value)}Micro(n){return zo(r=>{let s=r;const o=qI(PI(n,this.currentContext));return o.addObserver(i=>{if(i._tag==="Success")return s(_e(i.value));switch(i.cause._tag){case"Interrupt":return s(ee(Bt(Tn)));case"Fail":return s(Ne(i.cause.error));case"Die":return s(Kf(i.cause.defect))}}),zo(i=>{s=c=>{i(ht)},o.unsafeInterrupt()})})}[Yp](n){const r=Me(()=>n.effect_instruction_i0()),s=this.getNextSuccessCont();return s!==void 0?(s._op in Kr||oo(s),Kr[s._op](this,s,r)):(Ot.currentOp=_e(r),kt)}[lt](n){const r=n,s=this.getNextSuccessCont();return s!==void 0?(s._op in Kr||oo(s),Kr[s._op](this,s,r.effect_instruction_i0)):(Ot.currentOp=r,kt)}[ut](n){const r=n.effect_instruction_i0,s=this.getNextFailCont();if(s!==void 0)switch(s._op){case ic:case Po:return Ut(this.currentRuntimeFlags)&&this.isInterrupted()?ee(Nf(r)):Me(()=>s.effect_instruction_i1(r));case"OnStep":return Ut(this.currentRuntimeFlags)&&this.isInterrupted()?ee(Nf(r)):_e(ee(r));case wu:return this.patchRuntimeFlags(this.currentRuntimeFlags,s.patch),Ut(this.currentRuntimeFlags)&&this.isInterrupted()?ee(Ue(r,this.getInterruptedCause())):ee(r);default:oo(s)}else return Ot.currentOp=ee(r),kt}[Zp](n){return Me(()=>n.effect_instruction_i0(this,L_(this.currentRuntimeFlags)))}Blocked(n){const r=this.getFiberRefs(),s=this.currentRuntimeFlags;if(this._steps.length>0){const o=[],i=this._steps[this._steps.length-1];let c=this.popStack();for(;c&&c._op!=="OnStep";)o.push(c),c=this.popStack();this.setFiberRefs(i.refs),this.currentRuntimeFlags=i.flags;const a=rI(i.refs,r),l=vo(i.flags,s);return _e(Wg(n.effect_instruction_i0,Je(f=>{for(;o.length>0;)f.pushStack(o.pop());return f.setFiberRefs(sI(f.id(),f.getFiberRefs())(a)),f.currentRuntimeFlags=ko(l)(f.currentRuntimeFlags),n.effect_instruction_i1})))}return qi(o=>P(by(ET(n.effect_instruction_i0)),()=>o(n.effect_instruction_i1)))}RunBlocked(n){return KM(n.effect_instruction_i0)}[Ts](n){const r=n.effect_instruction_i0,s=this.currentRuntimeFlags,o=ko(s,r);if(Ut(o)&&this.isInterrupted())return ee(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,r),n.effect_instruction_i1){const i=vo(o,s);return this.pushStack(new TT(i,n)),Me(()=>n.effect_instruction_i1(s))}else return dn}[Fo](n){return this.pushStack(n),n.effect_instruction_i0}OnStep(n){return this.pushStack(n),n.effect_instruction_i0}[ic](n){return this.pushStack(n),n.effect_instruction_i0}[Po](n){return this.pushStack(n),n.effect_instruction_i0}[Zr](n){return this._asyncBlockingOn=n.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,n.effect_instruction_i0),Ot.currentOp=n,kt}[mo](n){return this._isYielding=!1,Ot.currentOp=n,kt}[jo](n){const r=n.effect_instruction_i0,s=n.effect_instruction_i1;return r()?(this.pushStack(n),s()):dn}[po](n){return Kr[po](this,n,void 0)}[wi](n){return Me(()=>n.commit())}runLoop(n){let r=n;for(this.currentOpCount=0;;){if(this.currentRuntimeFlags&CE&&this.currentSupervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this.currentRuntimeFlags,r)),!this._isYielding){this.currentOpCount+=1;const s=this.currentScheduler.shouldYield(this);if(s!==!1){this._isYielding=!0,this.currentOpCount=0;const o=r;r=P(tl({priority:s}),()=>o)}}try{if(r=this.currentTracer.context(()=>DM!==r[pr]._V?Df(`Cannot execute an Effect versioned ${r[pr]._V} with a Runtime of version ${gi()}`):this[r._op](r),this),r===kt){const s=Ot.currentOp;return s._op===mo||s._op===Zr?kt:(Ot.currentOp=null,s._op===lt||s._op===ut?s:ee(Qe(s)))}}catch(s){r!==kt&&!j(r,"_op")||!(r._op in this)?r=Df(`Not a valid effect: ${er(r)}`):ax(s)?r=ee(Ue(Qe(s),Bt(Tn))):r=Kf(s)}}}}const UM=J("effect/FiberRef/currentMinimumLogLevel",()=>Ve(U$("Info"))),BM=e=>kl(t=>{const n=$$(t.context,Xo);Hm(n,E_).unsafe.log(e.log(t))}),qM=J(Symbol.for("effect/Logger/defaultLogger"),()=>BM(cA)),JM=J(Symbol.for("effect/Logger/tracerLogger"),()=>kl(({annotations:e,cause:t,context:n,fiberId:r,logLevel:s,message:o})=>{const i=Rs(gs(n,Bs),x_);if(i._tag==="None"||i.value._tag==="ExternalSpan")return;const c=Wm(gs(n,Xo),ul),a={};for(const[l,f]of e)a[l]=f;a["effect.fiberId"]=SO(r),a["effect.logLevel"]=s.label,t!==null&&t._tag!=="Empty"&&(a["effect.cause"]=Ls(t,{renderErrorCause:!0})),i.value.event(er(Array.isArray(o)?o[0]:o),c.unsafeCurrentTimeNanos(),a)})),VM=J(Symbol.for("effect/FiberRef/currentLoggers"),()=>GT(Ju(qM,JM))),HM=h(e=>vw(e[0]),(e,t,n)=>Je(r=>{const s=(n==null?void 0:n.batching)===!0||(n==null?void 0:n.batching)==="inherit"&&r.getFiberRef(nx);return n!=null&&n.discard?fd(n.concurrency,()=>Kn($a,n==null?void 0:n.concurrentFinalizers)(o=>s?wn(e,(i,c)=>o(t(i,c)),!0,!1,1):Ui(e,(i,c)=>o(t(i,c)))),()=>Kn(Ia,n==null?void 0:n.concurrentFinalizers)(o=>wn(e,(i,c)=>o(t(i,c)),s,!1)),o=>Kn(Aa(o),n==null?void 0:n.concurrentFinalizers)(i=>wn(e,(c,a)=>i(t(c,a)),s,!1,o))):fd(n==null?void 0:n.concurrency,()=>Kn($a,n==null?void 0:n.concurrentFinalizers)(o=>s?yd(e,1,(i,c)=>o(t(i,c)),!0):qt(e,(i,c)=>o(t(i,c)))),()=>Kn(Ia,n==null?void 0:n.concurrentFinalizers)(o=>WM(e,(i,c)=>o(t(i,c)),s)),o=>Kn(Aa(o),n==null?void 0:n.concurrentFinalizers)(i=>yd(e,o,(c,a)=>i(t(c,a)),s)))})),WM=(e,t,n)=>ge(()=>{const r=le(e),s=new Array(r.length);return Ji(wn(r,(i,c)=>P(t(i,c),a=>F(()=>s[c]=a)),n,!1),z(s))}),wn=(e,t,n,r,s)=>qi(o=>NT(i=>Je(c=>{let a=Array.from(e).reverse(),l=a.length;if(l===0)return ht;let f=0,d=!1;const p=s?Math.min(a.length,s):a.length,m=new Set,_=new Array,k=()=>m.forEach($=>{$.currentScheduler.scheduleTask(()=>{$.unsafeInterruptAsFork(c.id())},0)}),g=new Array,b=new Array,S=new Array,w=()=>{const $=_.filter(({exit:M})=>M._tag==="Failure").sort((M,B)=>M.index<B.index?-1:M.index===B.index?0:1).map(({exit:M})=>M);return $.length===0&&$.push(dn),$},x=($,M=!1)=>{const B=o_(i($)),U=zM(B,c,c.currentRuntimeFlags,wl);return c.currentScheduler.scheduleTask(()=>{M&&U.unsafeInterruptAsFork(c.id()),U.resume(B)},0),U},v=()=>{r||(l-=a.length,a=[]),d=!0,k()},E=n?AT:Qg,O=x(ms($=>{const M=(U,G)=>{U._op==="Blocked"?S.push(U):(_.push({index:G,exit:U}),U._op==="Failure"&&!d&&v())},B=()=>{if(a.length>0){const U=a.pop();let G=f++;const ie=()=>{const C=a.pop();return G=f++,P(tl(),()=>P(E(o(t(C,G))),X))},X=C=>a.length>0&&(M(C,G),a.length>0)?ie():z(C),me=P(E(o(t(U,G))),X),Y=x(me);g.push(Y),m.add(Y),d&&Y.currentScheduler.scheduleTask(()=>{Y.unsafeInterruptAsFork(c.id())},0),Y.addObserver(C=>{let W;if(C._op==="Failure"?W=C:W=C.effect_instruction_i0,b.push(Y),m.delete(Y),M(W,G),_.length===l)$(z(we(gc(w(),{parallel:!0}),()=>dn)));else if(S.length+_.length===l){const tt=S.map(He=>He.effect_instruction_i0).reduce(jg);$(z(Wg(tt,wn([we(gc(w(),{parallel:!0}),()=>dn),...S.map(He=>He.effect_instruction_i1)],He=>He,n,!0,s))))}else B()})}};for(let U=0;U<p;U++)B()}));return Us(Xu(t_(o(vl(O))),p_({onFailure:()=>{v();const $=S.length+1,M=Math.min(typeof s=="number"?s:S.length,S.length),B=Array.from(S);return ms(U=>{const G=[];let ie=0,X=0;const me=(C,W)=>tt=>{G[C]=tt,ie++,ie===$&&U(dm(gc(G,{parallel:!0}))),B.length>0&&W&&Y()},Y=()=>{x(B.pop(),!0).addObserver(me(X,!0)),X++};O.addObserver(me(X,!1)),X++;for(let C=0;C<M;C++)Y()})},onSuccess:()=>qt(b,$=>$.inheritAll)})))}))),yd=(e,t,n,r)=>ge(()=>{const s=le(e),o=new Array(s.length);return Ji(wn(s,(c,a)=>Pe(n(c,a),l=>o[a]=l),r,!1,t),z(o))}),by=e=>YM(e,wl),GM=(e,t,n,r=null)=>{const s=Sy(e,t,n,r);return s.resume(e),s},zM=(e,t,n,r=null)=>Sy(e,t,n,r),Sy=(e,t,n,r=null)=>{const s=Sg(),o=t.getFiberRefs(),i=E$(o,s),c=new yy(s,i,n),a=gs(i,Bs),l=c.currentSupervisor;return l.onStart(a,e,R(t),c),c.addObserver(d=>l.onEnd(d,c)),(r!==null?r:y(t.getFiberRef(Oa),we(()=>t.scope()))).add(n,c),c},YM=(e,t)=>Je((n,r)=>z(GM(e,n,r.runtimeFlags,t))),bd=e=>qs(t=>Xe(Rs(t,Ws),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return P(Wi(n,Ia),r=>Tl(e,r))}}})),Sd=e=>t=>qs(n=>Xe(Rs(n,Ws),{onNone:()=>t,onSome:r=>r.strategy._tag==="ParallelN"&&r.strategy.parallelism===e?t:P(Wi(r,Aa(e)),s=>Tl(t,s))})),Kn=(e,t)=>n=>qs(r=>Xe(Rs(r,Ws),{onNone:()=>n(te),onSome:s=>{if(t===!0){const o=e._tag==="Parallel"?bd:e._tag==="Sequential"?wd:Sd(e.parallelism);switch(s.strategy._tag){case"Parallel":return o(n(bd));case"Sequential":return o(n(wd));case"ParallelN":return o(n(Sd(s.strategy.parallelism)))}}else return n(te)}})),wd=e=>qs(t=>Xe(Rs(t,Ws),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return P(Wi(n,$a),r=>Tl(e,r))}}})),Ws=Nn("effect/Scope"),Tl=h(2,(e,t)=>Sx(e,Gm(sk(Ws,t)))),ZM=e=>$r(e,{differ:MM,fork:ts}),vd=YT(PE),QM=ZM(Qi),XM=(e,t,n)=>e_(r=>P(P(by(n_(e)),s=>ms(o=>{const i=t.map(l=>l.listeners.count),c=()=>{i.every(l=>l===0)&&t.every(l=>l.result.state.current._tag==="Pending"?!0:!!(l.result.state.current._tag==="Done"&&il(l.result.state.current.effect)&&l.result.state.current.effect._tag==="Failure"&&sT(l.result.state.current.effect.cause)))&&(a.forEach(l=>l()),n==null||n(),o(jT(s)))};s.addObserver(l=>{a.forEach(f=>f()),o(l)});const a=t.map((l,f)=>{const d=p=>{i[f]=p,c()};return l.listeners.addObserver(d),()=>l.listeners.removeObserver(d)});return c(),F(()=>{a.forEach(l=>l())})})),()=>ge(()=>{const s=t.flatMap(o=>o.state.completed?[]:[o]);return Ui(s,o=>kM(o.request,dx(r)))}))),e1=ux,t1=ox,n1=Wi,r1=Fi,s1=function(){const e=Symbol.for("effect/Data/Error/plainArgs");return class extends sl{constructor(n){super(n==null?void 0:n.message,n!=null&&n.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,e,{value:n,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}(),o1=e=>{class t extends s1{constructor(){super(...arguments);u(this,"_tag",e)}}return t.prototype.name=e,t},Ba=Symbol.for("effect/DateTime"),i1={[Ba]:Ba,pipe(){return N(this,arguments)},[ne](){return this.toString()},toJSON(){return wy(this).toJSON()}},c1={...i1,_tag:"Utc",[K](){return oe(this,Si(this.epochMillis))},[L](e){return xl(e)&&e._tag==="Utc"&&this.epochMillis===e.epochMillis},toString(){return`DateTime.Utc(${wy(this).toJSON()})`}},xl=e=>j(e,Ba),a1=e=>xl(e[0]),u1=e=>{const t=Object.create(c1);return t.epochMillis=e,Object.defineProperty(t,"partsUtc",{value:void 0,enumerable:!1,writable:!0}),t},wc=e=>{const t=e.getTime();if(Number.isNaN(t))throw new e1("Invalid date");return u1(t)},l1=e=>{if(xl(e))return e;if(e instanceof Date)return wc(e);if(typeof e=="object"){const t=new Date(0);return p1(t,e),wc(t)}return wc(new Date(e))},f1=h(2,(e,t)=>kd(t)-kd(e)),wy=e=>new Date(e.epochMillis),d1=e=>{if(e._tag==="Utc")return new Date(e.epochMillis);if(e.zone._tag==="Offset")return new Date(e.epochMillis+e.zone.offset);if(e.adjustedEpochMillis!==void 0)return new Date(e.adjustedEpochMillis);const t=e.zone.format.formatToParts(e.epochMillis).filter(r=>r.type!=="literal"),n=new Date(0);return n.setUTCFullYear(Number(t[2].value),Number(t[0].value)-1,Number(t[1].value)),n.setUTCHours(Number(t[3].value),Number(t[4].value),Number(t[5].value),Number(t[6].value)),e.adjustedEpochMillis=n.getTime(),n},h1=e=>{const t=Math.abs(e);let n=Math.floor(t/(60*60*1e3)),r=Math.round(t%(60*60*1e3)/(60*1e3));return r===60&&(n+=1,r=0),`${e<0?"-":"+"}${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`},kd=e=>e.epochMillis,p1=(e,t)=>{if(t.year!==void 0&&e.setUTCFullYear(t.year),t.month!==void 0&&e.setUTCMonth(t.month-1),t.day!==void 0&&e.setUTCDate(t.day),t.weekDay!==void 0){const n=t.weekDay-e.getUTCDay();e.setUTCDate(e.getUTCDate()+n)}t.hours!==void 0&&e.setUTCHours(t.hours),t.minutes!==void 0&&e.setUTCMinutes(t.minutes),t.seconds!==void 0&&e.setUTCSeconds(t.seconds),t.millis!==void 0&&e.setUTCMilliseconds(t.millis)},m1=e=>e._tag==="Named"?e.id:h1(e.offset),g1=h(a1,(e,t)=>{try{return new Intl.DateTimeFormat(t==null?void 0:t.locale,{timeZone:e._tag==="Utc"?"UTC":m1(e.zone),...t}).format(e.epochMillis)}catch{return new Intl.DateTimeFormat(t==null?void 0:t.locale,{timeZone:"UTC",...t}).format(d1(e))}}),_1=e=>(t,n)=>{const r=Sg(),s=[[Bs,[[r,e.context]]]];n!=null&&n.scheduler&&s.push([G_,[[r,n.scheduler]]]);let o=I$(e.fiberRefs,{entries:s,forkAs:r});n!=null&&n.updateRefs&&(o=n.updateRefs(o,r));const i=new yy(r,o,e.runtimeFlags);let c=t;n!=null&&n.scope&&(c=P(n1(n.scope,j_),l=>Ji(sx(l,e_(f=>D(f,i.id())?ht:a_(i,f))),Xu(t,f=>t1(l,f)))));const a=i.currentSupervisor;return a!==Qi&&(a.onStart(e.context,c,I(),i),i.addObserver(l=>a.onEnd(l,i))),wl.add(e.runtimeFlags,i),(n==null?void 0:n.immediate)===!1?i.resume(c):i.start(c),i},y1=e=>t=>{const n=O1(e)(t);if(n._tag==="Failure")throw v1(n.effect_instruction_i0);return n.effect_instruction_i0};class b1 extends Error{constructor(n){super(`Fiber #${n.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`);u(this,"fiber");u(this,"_tag","AsyncFiberException");this.fiber=n,this.name=this._tag,this.stack=this.message}}const S1=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new b1(e);return Error.stackTraceLimit=t,n},vc=Symbol.for("effect/Runtime/FiberFailure"),io=Symbol.for("effect/Runtime/FiberFailure/Cause");var xh,$h;class w1 extends Error{constructor(n){const r=Vg(n)[0];super((r==null?void 0:r.message)||"An error has occurred");u(this,$h);u(this,xh);this[vc]=vc,this[io]=n,this.name=r?`(FiberFailure) ${r.name}`:"FiberFailure",r!=null&&r.stack&&(this.stack=r.stack)}toJSON(){return{_id:"FiberFailure",cause:this[io].toJSON()}}toString(){return"(FiberFailure) "+Ls(this[io],{renderErrorCause:!0})}[($h=vc,xh=io,ne)](){return this.toString()}}const v1=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new w1(e);return Error.stackTraceLimit=t,n},k1=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return Hf(t.left);case"Right":return _e(t.right);case"Some":return _e(t.value);case"None":return Hf(h_())}},O1=e=>t=>{const n=k1(t);if(n)return n;const r=new VI,s=_1(e)(t,{scheduler:r});r.flush();const o=s.unsafePoll();return o||fx(Qu(S1(s),cl(s)))};class E1{constructor(t,n,r){u(this,"context");u(this,"runtimeFlags");u(this,"fiberRefs");this.context=t,this.runtimeFlags=n,this.fiberRefs=r}pipe(){return N(this,arguments)}}const T1=e=>new E1(e.context,e.runtimeFlags,e.fiberRefs),x1=Fg(Or,Cg,Rg),$1=T1({context:Nu(),runtimeFlags:x1,fiberRefs:A$()}),I1=y1($1),A1=Ki,To=HM,Nt=z,co=ge,We=ht,$l=va,st=Pe,M1=Bi,an=Zo,De=P,R1=Di,C1=RT,vy=I1,Od=l1,N1=f1,Ed=g1;class xe{constructor(t,n,r){u(this,"path");u(this,"actual");u(this,"issue");u(this,"_tag","Pointer");this.path=t,this.actual=n,this.issue=r}}class Td{constructor(t,n){u(this,"actual");u(this,"message");u(this,"_tag","Unexpected");this.actual=t,this.message=n}}class Dr{constructor(t,n){u(this,"ast");u(this,"message");u(this,"_tag","Missing");u(this,"actual");this.ast=t,this.message=n}}class ce{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"issues");u(this,"output");u(this,"_tag","Composite");this.ast=t,this.actual=n,this.issues=r,this.output=s}}class kc{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"kind");u(this,"issue");u(this,"_tag","Refinement");this.ast=t,this.actual=n,this.kind=r,this.issue=s}}class Oc{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"kind");u(this,"issue");u(this,"_tag","Transformation");this.ast=t,this.actual=n,this.kind=r,this.issue=s}}class ot{constructor(t,n,r){u(this,"ast");u(this,"actual");u(this,"message");u(this,"_tag","Type");this.ast=t,this.actual=n,this.message=r}}class F1{constructor(t,n,r){u(this,"ast");u(this,"actual");u(this,"message");u(this,"_tag","Forbidden");this.ast=t,this.actual=n,this.message=r}}const xd=Symbol.for("effect/Schema/ParseErrorTypeId");var Ih;class P1 extends o1("ParseError"){constructor(){super(...arguments);u(this,Ih,xd)}get message(){return this.toString()}toString(){return xo.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[(Ih=xd,ne)](){return this.toJSON()}}const j1=e=>new P1({issue:e}),_s=be,ky=q,ao=h(2,(e,t)=>{const n=e;return n._tag==="Left"?n:n._tag==="Right"?t(n.right):De(e,t)}),Oy=h(2,(e,t)=>{const n=e;return n._tag==="Left"?n:n._tag==="Right"?be(t(n.right)):st(e,t)}),Ec=h(2,(e,t)=>{const n=e;return n._tag==="Left"?q(t(n.left)):n._tag==="Right"?n:M1(e,t)}),Et=e=>{const t=e;if(t._tag==="Left"||t._tag==="Right")return t},Ey=h(2,(e,t)=>{const n=e;return n._tag==="Left"?t(n.left):n._tag==="Right"?n:$l(e,t)}),Xi=(e,t)=>t===void 0||St(t)?e:e===void 0?t:{...e,...t},L1=(e,t,n)=>{const r=ke(e,t);return(s,o)=>r(s,Xi(n,o))},Ty=(e,t,n)=>{const r=L1(e,t,n);return(s,o)=>rv(r(s,o),j1)},K1=(e,t,n)=>{const r=ke(e,t);return(s,o)=>r(s,{...Xi(n,o),isEffectAllowed:!0})},D1=(e,t)=>Ty(e.ast,!0,t),U1=(e,t)=>K1(e.ast,!1,t),Il=(e,t)=>Ty(ae(e.ast),!0,t),B1=(e,t)=>{const n=ke(ae(e.ast),!0);return(r,s)=>$t(n(r,{exact:!0,...Xi(t,s)}))},q1=J(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),J1=J(Symbol.for("effect/ParseResult/encodeMemoMap"),()=>new WeakMap),ke=(e,t)=>{const n=t?q1:J1,r=n.get(e);if(r)return r;const s=V1(e,t),o=c0(e),i=Z(o)?(l,f)=>s(l,Xi(f,o.value)):s,c=a0(e),a=t&&Z(c)?(l,f)=>Vr(Ey(i(l,f),c.value),e,l,f):i;return n.set(e,a),a},Tc=e=>Tt(s0(e)),xc=e=>Tt(o0(e)),V1=(e,t)=>{switch(e._tag){case"Refinement":if(t){const n=ke(e.from,!0);return(r,s)=>{s=s??ac;const o=(s==null?void 0:s.errors)==="all",i=ao(Ey(n(r,s),c=>{const a=new kc(e,r,"From",c);return o&&l0(e)&&Ay(c)?Xe(e.filter(r,s,e),{onNone:()=>q(a),onSome:l=>q(new ce(e,r,[a,new kc(e,r,"Predicate",l)]))}):q(a)}),c=>Xe(e.filter(c,s,e),{onNone:()=>be(c),onSome:a=>q(new kc(e,r,"Predicate",a))}));return Vr(i,e,r,s)}}else{const n=ke(ae(e),!0),r=ke(xy(e.from),!1);return(s,o)=>Vr(ao(n(s,o),i=>r(i,o)),e,s,o)}case"Transformation":{const n=G1(e.transformation,t),r=t?ke(e.from,!0):ke(e.to,!1),s=t?ke(e.to,!0):ke(e.from,!1);return(o,i)=>Vr(ao(Ec(r(o,i),c=>new Oc(e,o,t?"Encoded":"Type",c)),c=>ao(Ec(n(c,i??ac,e,o),a=>new Oc(e,o,"Transformation",a)),a=>Ec(s(a,i),l=>new Oc(e,o,t?"Type":"Encoded",l)))),e,o,i)}case"Declaration":{const n=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(r,s)=>Vr(n(r,s??ac,e),e,r,s)}case"Literal":return Le(e,n=>n===e.literal);case"UniqueSymbol":return Le(e,n=>n===e.symbol);case"UndefinedKeyword":return Le(e,yw);case"NeverKeyword":return Le(e,bw);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return be;case"StringKeyword":return Le(e,Be);case"NumberKeyword":return Le(e,St);case"BooleanKeyword":return Le(e,Xn);case"BigIntKeyword":return Le(e,_i);case"SymbolKeyword":return Le(e,zc);case"ObjectKeyword":return Le(e,Xt);case"Enums":return Le(e,n=>e.enums.some(([r,s])=>s===n));case"TemplateLiteral":{const n=j0(e);return Le(e,r=>Be(r)&&n.test(r))}case"TupleType":{const n=e.elements.map(l=>ke(l.type,t)),r=e.rest.map(l=>ke(l.type,t));let s=e.elements.filter(l=>!l.isOptional);e.rest.length>0&&(s=s.concat(e.rest.slice(1)));const o=s.length,i=e.elements.length>0?e.elements.map((l,f)=>f).join(" | "):"never",c=Tc(e),a=xc(e);return(l,f)=>{if(!Qc(l))return q(new ot(e,l));const d=(f==null?void 0:f.errors)==="all",p=[];let m=0;const _=[],k=l.length;for(let w=k;w<=o-1;w++){const x=new xe(w,l,new Dr(s[w-k]));if(d){p.push([m++,x]);continue}else return q(new ce(e,l,x,_))}if(e.rest.length===0)for(let w=e.elements.length;w<=k-1;w++){const x=new xe(w,l,new Td(l[w],`is unexpected, expected: ${i}`));if(d){p.push([m++,x]);continue}else return q(new ce(e,l,x,_))}let g=0,b;for(;g<n.length;g++)if(k<g+1){if(e.elements[g].isOptional)continue}else{const w=n[g],x=w(l[g],f),v=Et(x);if(v){if(Ie(v)){const E=new xe(g,l,v.left);if(d){p.push([m++,E]);continue}else return q(new ce(e,l,E,nt(_)))}_.push([m++,v.right])}else{const E=m++,O=g;b||(b=[]),b.push(({es:$,output:M})=>De(an(x),B=>{if(Ie(B)){const U=new xe(O,l,B.left);return d?($.push([E,U]),We):q(new ce(e,l,U,nt(M)))}return M.push([E,B.right]),We}))}}if(se(r)){const[w,...x]=r;for(;g<k-x.length;g++){const v=w(l[g],f),E=Et(v);if(E)if(Ie(E)){const O=new xe(g,l,E.left);if(d){p.push([m++,O]);continue}else return q(new ce(e,l,O,nt(_)))}else _.push([m++,E.right]);else{const O=m++,$=g;b||(b=[]),b.push(({es:M,output:B})=>De(an(v),U=>{if(Ie(U)){const G=new xe($,l,U.left);return d?(M.push([O,G]),We):q(new ce(e,l,G,nt(B)))}else return B.push([O,U.right]),We}))}}for(let v=0;v<x.length;v++)if(g+=v,!(k<g+1)){const E=x[v](l[g],f),O=Et(E);if(O){if(Ie(O)){const $=new xe(g,l,O.left);if(d){p.push([m++,$]);continue}else return q(new ce(e,l,$,nt(_)))}_.push([m++,O.right])}else{const $=m++,M=g;b||(b=[]),b.push(({es:B,output:U})=>De(an(E),G=>{if(Ie(G)){const ie=new xe(M,l,G.left);return d?(B.push([$,ie]),We):q(new ce(e,l,ie,nt(U)))}return U.push([$,G.right]),We}))}}}const S=({es:w,output:x})=>go(w)?q(new ce(e,l,nt(w),nt(x))):be(nt(x));if(b&&b.length>0){const w=b;return co(()=>{const x={es:Br(p),output:Br(_)};return De(To(w,v=>v(x),{concurrency:c,batching:a,discard:!0}),()=>S(x))})}return S({output:_,es:p})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return Le(e,Sw);const n=[],r={},s=[];for(const f of e.propertySignatures)n.push([ke(f.type,t),f]),r[f.name]=null,s.push(f.name);const o=e.indexSignatures.map(f=>[ke(f.parameter,t),ke(f.type,t),f.parameter]),i=Fe.make(e.indexSignatures.map(f=>f.parameter).concat(s.map(f=>zc(f)?new h0(f):new Xc(f)))),c=ke(i,t),a=Tc(e),l=xc(e);return(f,d)=>{if(!kw(f))return q(new ot(e,f));const p=(d==null?void 0:d.errors)==="all",m=[];let _=0;const k=(d==null?void 0:d.onExcessProperty)==="error",g=(d==null?void 0:d.onExcessProperty)==="preserve",b={};let S;if(k||g){S=It(f);for(const E of S){const O=Et(c(E,d));if(Ie(O))if(k){const $=new xe(E,f,new Td(f[E],`is unexpected, expected: ${String(i)}`));if(p){m.push([_++,$]);continue}else return q(new ce(e,f,$,b))}else b[E]=f[E]}}let w;const x=(d==null?void 0:d.exact)===!0;for(let E=0;E<n.length;E++){const O=n[E][1],$=O.name,M=Object.prototype.hasOwnProperty.call(f,$);if(!M){if(O.isOptional)continue;if(x){const ie=new xe($,f,new Dr(O));if(p){m.push([_++,ie]);continue}else return q(new ce(e,f,ie,b))}}const B=n[E][0],U=B(f[$],d),G=Et(U);if(G){if(Ie(G)){const ie=new xe($,f,M?G.left:new Dr(O));if(p){m.push([_++,ie]);continue}else return q(new ce(e,f,ie,b))}b[$]=G.right}else{const ie=_++,X=$;w||(w=[]),w.push(({es:me,output:Y})=>De(an(U),C=>{if(Ie(C)){const W=new xe(X,f,M?C.left:new Dr(O));return p?(me.push([ie,W]),We):q(new ce(e,f,W,Y))}return Y[X]=C.right,We}))}}for(let E=0;E<o.length;E++){const O=o[E],$=O[0],M=O[1],B=bm(f,O[2]);for(const U of B){const G=Et($(U,d));if(G&&$t(G)){const ie=M(f[U],d),X=Et(ie);if(X)if(Ie(X)){const me=new xe(U,f,X.left);if(p){m.push([_++,me]);continue}else return q(new ce(e,f,me,b))}else Object.prototype.hasOwnProperty.call(r,U)||(b[U]=X.right);else{const me=_++,Y=U;w||(w=[]),w.push(({es:C,output:W})=>De(an(ie),tt=>{if(Ie(tt)){const He=new xe(Y,f,tt.left);return p?(C.push([me,He]),We):q(new ce(e,f,He,W))}else return Object.prototype.hasOwnProperty.call(r,U)||(W[U]=tt.right),We}))}}}}const v=({es:E,output:O})=>{if(go(E))return q(new ce(e,f,nt(E),O));if((d==null?void 0:d.propertyOrder)==="original"){const $=S||It(f);for(const B of s)$.indexOf(B)===-1&&$.push(B);const M={};for(const B of $)Object.prototype.hasOwnProperty.call(O,B)&&(M[B]=O[B]);return be(M)}return be(O)};if(w&&w.length>0){const E=w;return co(()=>{const O={es:Br(m),output:Object.assign({},b)};return De(To(E,$=>$(O),{concurrency:a,batching:l,discard:!0}),()=>v(O))})}return v({es:m,output:b})}}case"Union":{const n=H1(e.types,t),r=It(n.keys),s=r.length,o=e.types.length,i=new Map;for(let l=0;l<o;l++)i.set(e.types[l],ke(e.types[l],t));const c=Tc(e)??1,a=xc(e);return(l,f)=>{const d=[];let p=0,m=[];if(s>0)if(_u(l))for(let g=0;g<s;g++){const b=r[g],S=n.keys[b].buckets;if(Object.prototype.hasOwnProperty.call(l,b)){const w=String(l[b]);if(Object.prototype.hasOwnProperty.call(S,w))m=m.concat(S[w]);else{const{candidates:x,literals:v}=n.keys[b],E=Fe.make(v),O=x.length===o?new At([new Oe(b,E,!1,!0)],[]):Fe.make(x);d.push([p++,new ce(O,l,new xe(b,l,new ot(E,l[b])))])}}else{const{candidates:w,literals:x}=n.keys[b],v=new Oe(b,Fe.make(x),!1,!0),E=w.length===o?new At([v],[]):Fe.make(w);d.push([p++,new ce(E,l,new xe(b,l,new Dr(v)))])}}else{const g=n.candidates.length===o?e:Fe.make(n.candidates);d.push([p++,new ot(g,l)])}n.otherwise.length>0&&(m=m.concat(n.otherwise));let _;for(let g=0;g<m.length;g++){const b=m[g],S=i.get(b)(l,f),w=!_||_.length===0?Et(S):void 0;if(w){if($t(w))return w;d.push([p++,w.left])}else{const x=p++;_||(_=[]),_.push(v=>co(()=>"finalResult"in v?We:De(an(S),E=>($t(E)?v.finalResult=E:v.es.push([x,E.left]),We))))}}const k=g=>go(g)?g.length===1&&g[0][1]._tag==="Type"?q(g[0][1]):q(new ce(e,l,nt(g))):q(new ot(e,l));if(_&&_.length>0){const g=_;return co(()=>{const b={es:Br(d)};return De(To(g,S=>S(b),{concurrency:c,batching:a,discard:!0}),()=>"finalResult"in b?b.finalResult:k(b.es))})}return k(d)}}case"Suspend":{const n=Sm(()=>ke(cs(e.f(),e.annotations),t));return(r,s)=>n()(r,s)}}},Le=(e,t)=>n=>t(n)?be(n):q(new ot(e,n)),Jr=(e,t)=>{switch(e._tag){case"Declaration":{const n=Fm(e);if(Z(n))return Jr(n.value,t);break}case"TypeLiteral":{const n=[];for(let r=0;r<e.propertySignatures.length;r++){const s=e.propertySignatures[r],o=t?ra(s.type):ae(s.type);Xr(o)&&!s.isOptional&&n.push([s.name,o])}return n}case"TupleType":{const n=[];for(let r=0;r<e.elements.length;r++){const s=e.elements[r],o=t?ra(s.type):ae(s.type);Xr(o)&&!s.isOptional&&n.push([r,o])}return n}case"Refinement":return Jr(e.from,t);case"Suspend":return Jr(e.f(),t);case"Transformation":return Jr(t?e.from:e.to,t)}return[]},H1=(e,t)=>{const n={},r=[],s=[];for(let o=0;o<e.length;o++){const i=e[o],c=Jr(i,t);if(c.length>0){s.push(i);for(let a=0;a<c.length;a++){const[l,f]=c[a],d=String(f.literal);n[l]=n[l]||{buckets:{},literals:[],candidates:[]};const p=n[l].buckets;if(Object.prototype.hasOwnProperty.call(p,d)){if(a<c.length-1)continue;p[d].push(i),n[l].literals.push(f),n[l].candidates.push(i)}else{p[d]=[i],n[l].literals.push(f),n[l].candidates.push(i);break}}}else r.push(i)}return{keys:n,otherwise:r,candidates:s}},xy=e=>Hn(e)?xy(e.from):e,Vr=(e,t,n,r)=>{const s=Et(e);if(s)return s;if((r==null?void 0:r.isEffectAllowed)===!0)return e;try{return vy(an(e))}catch{return q(new F1(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},W1=([e],[t])=>e>t?1:e<t?-1:0;function nt(e){return e.sort(W1).map(t=>t[1])}const G1=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return be;case"TypeLiteralTransformation":return n=>{let r=be(n);for(const s of e.propertySignatureTransformations){const[o,i]=t?[s.from,s.to]:[s.to,s.from],c=t?s.decode:s.encode;r=Oy(r,l=>{const f=c(Object.prototype.hasOwnProperty.call(l,o)?R(l[o]):I());return delete l[o],Z(f)&&(l[i]=f.value),l})}return r}}},Ke=(e,t=[])=>({value:e,forest:t}),xo={formatIssue:e=>st(Un(e),z1),formatIssueSync:e=>vy(xo.formatIssue(e)),formatError:e=>xo.formatIssue(e.issue),formatErrorSync:e=>xo.formatIssueSync(e.issue)},z1=e=>e.value+$y(`
`,e.forest),$y=(e,t)=>{let n="";const r=t.length;let s;for(let o=0;o<r;o++){s=t[o];const i=o===r-1;n+=e+(i?"└":"├")+"─ "+s.value,n+=$y(e+(r>1&&!i?"│  ":"   "),s.forest)}return n},Y1=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},Z1=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},Iy=e=>"ast"in e?R(e.ast):I(),Q1=e=>Iy(e).pipe(ki(n0),De(t=>{const n=t(e);return Be(n)?Nt({message:n,override:!1}):A1(n)?st(n,r=>({message:r,override:!1})):Be(n.message)?Nt({message:n.message,override:n.override}):st(n.message,r=>({message:r,override:n.override}))})),Al=e=>t=>t._tag===e,Ay=Al("Composite"),$d=Al("Refinement"),Id=Al("Transformation"),Ml=e=>Q1(e).pipe(De(t=>!t.override&&(Ay(e)||$d(e)&&e.kind==="From"||Id(e)&&e.kind!=="Transformation")?Id(e)||$d(e)?Ml(e.issue):I():Nt(t.message))),My=e=>Iy(e).pipe(ki(i0),uv(t=>vi(t(e))));function X1(e){return Nm(e).pipe(Jt(()=>Rm(e)),Jt(()=>Cm(e)),Jt(()=>Ei(e)),we(()=>`{ ${e.from} | filter }`))}function eR(e){return e.message!==void 0?e.message:`Expected ${Hn(e.ast)?X1(e.ast):String(e.ast)}, actual ${wt(e.actual)}`}const tR=e=>Ml(e).pipe(C1(()=>My(e)),$l(()=>Nt(eR(e)))),uo=e=>we(My(e),()=>String(e.ast)),nR=e=>e.message??"is forbidden",rR=e=>e.message??"is unexpected",sR=e=>r0(e.ast).pipe(De(t=>{const n=t();return Be(n)?Nt(n):n}),$l(()=>Nt(e.message??"is missing"))),$c=(e,t)=>R1(Ml(e),{onFailure:t,onSuccess:n=>Nt(Ke(n))}),Un=e=>{switch(e._tag){case"Type":return st(tR(e),Ke);case"Forbidden":return Nt(Ke(uo(e),[Ke(nR(e))]));case"Unexpected":return Nt(Ke(rR(e)));case"Missing":return st(sR(e),Ke);case"Transformation":return $c(e,()=>st(Un(e.issue),t=>Ke(uo(e),[Ke(Y1(e.kind),[t])])));case"Refinement":return $c(e,()=>st(Un(e.issue),t=>Ke(uo(e),[Ke(Z1(e.kind),[t])])));case"Pointer":return st(Un(e.issue),t=>Ke(km(e.path),[t]));case"Composite":{const t=uo(e);return $c(e,()=>vm(e.issues)?st(To(e.issues,Un),n=>Ke(t,n)):st(Un(e.issues),n=>Ke(t,[n])))}}},oR=h(e=>Xt(e[0]),(e,...t)=>{const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}),iR=h(e=>Xt(e[0]),(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n}),gr=Symbol.for("effect/Schema"),he=e=>{var t,n,r;return n=gr,t=gr,r=class{constructor(){u(this,n,qa)}static annotations(o){return he(nn(this.ast,o))}static pipe(){return N(this,arguments)}static toString(){return String(e)}},u(r,"ast",e),u(r,"Type"),u(r,"Encoded"),u(r,"Context"),u(r,t,qa),r},qa={_A:e=>e,_I:e=>e,_R:e=>e},Ad={schemaId:Hv,message:Tm,missingMessage:Eu,identifier:Tu,title:Pt,description:Is,examples:Wv,default:Gv,documentation:Xv,jsonSchema:zv,arbitrary:Yv,pretty:Zv,equivalence:Qv,concurrency:xm,batching:$m,parseIssueTitle:Im,parseOptions:Am,decodingFallback:Mm},Ar=e=>{if(!e)return{};const t={...e};for(const n in Ad)if(n in e){const r=Ad[n];t[r]=e[n],delete t[n]}return t},nn=(e,t)=>cs(e,Ar(t)),cR=e=>he(ra(e.ast)),Md=e=>he(ae(e.ast)),Zt=e=>j(e,gr)&&Xt(e[gr]),aR=e=>Au(e)?Fe.make(I0(e,t=>new Xc(t))):new Xc(e[0]),Ry=(e,t=aR(e))=>{var n;return n=class extends he(t){static annotations(s){return Ry(this.literals,nn(this.ast,s))}},u(n,"literals",[...e]),n};function Cy(...e){return se(e)?Ry(e):Ny}const uR=(e,t,n)=>he(new Ti(e.map(r=>r.ast),(...r)=>t.decode(...r.map(he)),(...r)=>t.encode(...r.map(he)),Ar(n))),lR=(e,t)=>{const n=()=>(s,o,i)=>e(s)?_s(s):ky(new ot(i,s)),r=n;return he(new Ti([],n,r,Ar(t)))},fR=function(){if(Array.isArray(arguments[0])){const n=arguments[0],r=arguments[1],s=arguments[2];return uR(n,r,s)}const e=arguments[0],t=arguments[1];return lR(e,t)};class dR extends he(is){}class Ny extends he($u){}class hR extends he(ea){}class pR extends he(na){}const mR=e=>Fe.make(e.map(t=>t.ast)),Fy=(e,t=mR(e))=>{var n;return n=class extends he(t){static annotations(s){return Fy(this.members,nn(this.ast,s))}},u(n,"members",[...e]),n};function gR(...e){return Au(e)?Fy(e):se(e)?e[0]:Ny}const _R=e=>gR(e,dR),yR=(e,t)=>new xi(e.map(n=>Zt(n)?new tn(n.ast,!1):n.ast),t.map(n=>Zt(n)?new As(n.ast):n.ast),!0),Py=(e,t,n=yR(e,t))=>{var r;return r=class extends he(n){static annotations(o){return Py(this.elements,this.rest,nn(this.ast,o))}},u(r,"elements",[...e]),u(r,"rest",[...t]),r},jy=(e,t)=>{var n;return n=class extends Py([e],[e],t){static annotations(s){return jy(this.value,nn(this.ast,s))}},u(n,"value",e),n},at=e=>jy(e),Ja=e=>e?'"?:"':'":"';class Ly extends tn{constructor(n,r,s,o,i){super(n,r,o);u(this,"isReadonly");u(this,"defaultValue");u(this,"_tag","PropertySignatureDeclaration");this.isReadonly=s,this.defaultValue=i}toString(){const n=Ja(this.isOptional),r=String(this.type);return`PropertySignature<${n}, ${r}, never, ${n}, ${r}>`}}class bR extends tn{constructor(n,r,s,o,i){super(n,r,o);u(this,"isReadonly");u(this,"fromKey");this.isReadonly=s,this.fromKey=i}}class SR extends tn{constructor(n,r,s,o,i){super(n,r,o);u(this,"isReadonly");u(this,"defaultValue");this.isReadonly=s,this.defaultValue=i}}const wR=e=>e===void 0?"never":Be(e)?JSON.stringify(e):String(e);class vR{constructor(t,n,r,s){u(this,"from");u(this,"to");u(this,"decode");u(this,"encode");u(this,"_tag","PropertySignatureTransformation");this.from=t,this.to=n,this.decode=r,this.encode=s}toString(){return`PropertySignature<${Ja(this.to.isOptional)}, ${this.to.type}, ${wR(this.from.fromKey)}, ${Ja(this.from.isOptional)}, ${this.from.type}>`}}const Ky=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new Ly(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new vR(new bR(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new SR(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},Dy=Symbol.for("effect/PropertySignature"),Rl=e=>j(e,Dy);var Ah,Mh;Mh=gr,Ah=Dy;const Kl=class Kl{constructor(t){u(this,"ast");u(this,Mh);u(this,Ah,null);u(this,"_TypeToken");u(this,"_Key");u(this,"_EncodedToken");u(this,"_HasDefault");this.ast=t}pipe(){return N(this,arguments)}annotations(t){return new Kl(Ky(this.ast,Ar(t)))}toString(){return String(this.ast)}};let Va=Kl;class Cl extends Va{constructor(n,r){super(n);u(this,"from");this.from=r}annotations(n){return new Cl(Ky(this.ast,Ar(n)),this.from)}}const Vt=e=>{const t=e.ast===is||e.ast===$u?is:_R(e).ast;return new Cl(new Ly(t,!0,!0,{},void 0),e)},kR=L0([Eu]),OR=(e,t)=>{const n=It(e),r=[];if(n.length>0){const o=[],i=[],c=[];for(let a=0;a<n.length;a++){const l=n[a],f=e[l];if(Rl(f)){const d=f.ast;switch(d._tag){case"PropertySignatureDeclaration":{const p=d.type,m=d.isOptional,_=d.annotations;o.push(new Oe(l,p,m,!0,kR(d))),i.push(new Oe(l,ae(p),m,!0,_)),r.push(new Oe(l,p,m,!0,_));break}case"PropertySignatureTransformation":{const p=d.from.fromKey??l;o.push(new Oe(p,d.from.type,d.from.isOptional,!0,d.from.annotations)),i.push(new Oe(l,d.to.type,d.to.isOptional,!0,d.to.annotations)),c.push(new R0(p,l,d.decode,d.encode));break}}}else o.push(new Oe(l,f.ast,!1,!0)),i.push(new Oe(l,ae(f.ast),!1,!0)),r.push(new Oe(l,f.ast,!1,!0))}if(se(c)){const a=[],l=[];for(const f of t){const{indexSignatures:d,propertySignatures:p}=Sf(f.key.ast,f.value.ast);p.forEach(m=>{o.push(m),i.push(new Oe(m.name,ae(m.type),m.isOptional,m.isReadonly,m.annotations))}),d.forEach(m=>{a.push(m),l.push(new Ms(m.parameter,ae(m.type),m.isReadonly))})}return new Wn(new At(o,a,{[Jn]:"Struct (Encoded side)"}),new At(i,l,{[Jn]:"Struct (Type side)"}),new yo(c))}}const s=[];for(const o of t){const{indexSignatures:i,propertySignatures:c}=Sf(o.key.ast,o.value.ast);c.forEach(a=>r.push(a)),i.forEach(a=>s.push(a))}return new At(r,s)},Uy=(e,t)=>{const n=It(e);for(const r of n){const s=e[r];if(t[r]===void 0&&Rl(s)){const o=s.ast,i=o._tag==="PropertySignatureDeclaration"?o.defaultValue:o.to.defaultValue;i!==void 0&&(t[r]=i())}}return t},By=(e,t,n=OR(e,t))=>{var r;return r=class extends he(n){static annotations(o){return By(this.fields,this.records,nn(this.ast,o))}static pick(...o){return pt(oR(e,...o))}static omit(...o){return pt(iR(e,...o))}},u(r,"fields",{...e}),u(r,"records",[...t]),u(r,"make",(o,i)=>{const c=Uy(e,{...o});return Fl(i)?c:Il(r)(c)}),r};function pt(e,...t){return By(e,t)}const ER=e=>he(qr(e.ast)),sn=(e,t,n)=>{if(bf(e)&&bf(t)){const r=[...e.propertySignatures];for(const s of t.propertySignatures){const o=s.name,i=r.findIndex(c=>c.name===o);if(i===-1)r.push(s);else{const{isOptional:c,type:a}=r[i];r[i]=new Oe(o,ns(a,s.type,n.concat(o)),c,!0)}}return new At(r,e.indexSignatures.concat(t.indexSignatures))}throw new Error(Om(e,t,n))},TR=K0([Tu]),Dn=(e,t)=>t.map(n=>new Ru(n,e.filter,TR(e))),ns=(e,t,n)=>Fe.make(_t([e],[t],n)),Kt=e=>Mu(e)?e.types:[e],_t=(e,t,n)=>Ko(e,r=>Ko(t,s=>{switch(s._tag){case"Literal":{if(Be(s.literal)&&ta(r)||St(s.literal)&&mf(r)||Xn(s.literal)&&_f(r))return[s];break}case"StringKeyword":{if(s===ea){if(ta(r)||Xr(r)&&Be(r.literal))return[r];if(Hn(r))return Dn(r,_t(Kt(r.from),[s],n))}else if(r===ea)return[s];break}case"NumberKeyword":{if(s===na){if(mf(r)||Xr(r)&&St(r.literal))return[r];if(Hn(r))return Dn(r,_t(Kt(r.from),[s],n))}else if(r===na)return[s];break}case"BooleanKeyword":{if(s===gf){if(_f(r)||Xr(r)&&Xn(r.literal))return[r];if(Hn(r))return Dn(r,_t(Kt(r.from),[s],n))}else if(r===gf)return[s];break}case"Union":return _t(Kt(r),s.types,n);case"Suspend":return[new Vn(()=>ns(r,s.f(),n))];case"Refinement":return Dn(s,_t(Kt(r),Kt(s.from),n));case"TypeLiteral":{switch(r._tag){case"Union":return _t(r.types,[s],n);case"Suspend":return[new Vn(()=>ns(r.f(),s,n))];case"Refinement":return Dn(r,_t(Kt(r.from),[s],n));case"TypeLiteral":return[sn(r,s,n)];case"Transformation":{if(bo(r.transformation))return[new Wn(sn(r.from,s,n),sn(r.to,ae(s),n),new yo(r.transformation.propertySignatureTransformations))];break}}break}case"Transformation":{if(bo(s.transformation))switch(r._tag){case"Union":return _t(r.types,[s],n);case"Suspend":return[new Vn(()=>ns(r.f(),s,n))];case"Refinement":return Dn(r,_t(Kt(r.from),[s],n));case"TypeLiteral":return[new Wn(sn(r,s.from,n),sn(ae(r),s.to,n),new yo(s.transformation.propertySignatureTransformations))];case"Transformation":if(bo(r.transformation))return[new Wn(sn(r.from,s.from,n),sn(r.to,s.to,n),new yo(s.transformation.propertySignatureTransformations.concat(r.transformation.propertySignatureTransformations)))];break}break}}throw new Error(Om(r,s,n))})),xR=h(2,(e,t)=>he(ns(e.ast,t.ast,[]))),qy=Symbol.for("effect/SchemaId/Refine"),Jy=(e,t,n)=>{var r,s,o;return o=class extends(s=he(n),r=qy,s){static annotations(c){return Jy(this.from,this.filter,nn(this.ast,c))}},u(o,r,e),u(o,"from",e),u(o,"filter",t),u(o,"make",(c,a)=>Fl(a)?c:Il(o)(c)),o},Rd=(e,t,n)=>{if(Xn(e))return e?I():R(new ot(t,n));if(Be(e))return R(new ot(t,n,e));if(e!==void 0){if("_tag"in e)return R(e);const r=new ot(t,n,e.message);return R(se(e.path)?new xe(e.path,n,r):r)}return I()},$R=(e,t,n)=>{if(Lv(e))return Rd(e,t,n);if(se(e)){const r=Fv(e,s=>Rd(s,t,n));if(se(r))return R(r.length===1?r[0]:new ce(t,n,r))}return I()};function Vy(e,t){return n=>{function r(o,i,c){return $R(e(o,i,c),c,o)}const s=new Ru(n.ast,r,Ar(t));return Jy(n,r,s)}}const Hy=(e,t,n)=>{var r;return r=class extends he(n){static annotations(o){return Hy(this.from,this.to,nn(this.ast,o))}},u(r,"from",e),u(r,"to",t),r},Ha=h(e=>Zt(e[0])&&Zt(e[1]),(e,t,n)=>Hy(e,t,new Wn(e.ast,t.ast,new A0(n.decode,n.encode)))),IR=h(e=>Zt(e[0])&&Zt(e[1]),(e,t,n)=>Ha(e,t,{strict:!0,decode:(r,s,o,i)=>_s(n.decode(r,i)),encode:(r,s,o,i)=>_s(n.encode(r,i))})),AR=Jv,MR=(e,t)=>n=>n.pipe(Vy(r=>r.length>=e,{schemaId:AR,title:`minLength(${e})`,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t})),Cd=Symbol.for("effect/SchemaId/Pattern"),Wy=(e,t)=>n=>{const r=e.source;return n.pipe(Vy(s=>(e.lastIndex=0,e.test(s)),{schemaId:Cd,[Cd]:{regex:e},description:`a string matching the pattern ${r}`,jsonSchema:{pattern:r},...t}))},RR=e=>MR(1,{title:"nonEmptyString",description:"a non empty string",...e});class H extends hR.pipe(RR({identifier:"NonEmptyString"})){}const CR=e=>Zt(e)||Rl(e),Gy=e=>It(e).every(t=>CR(e[t])),Nl=e=>"fields"in e?e.fields:Nl(e[qy]),zy=e=>Gy(e)?pt(e):Zt(e)?e:pt(Nl(e)),Yy=e=>Gy(e)?e:Nl(e),Gs=e=>(t,n)=>$o({kind:"Class",identifier:e,schema:zy(t),fields:Yy(t),Base:r1,annotations:n}),Ic=(e,t)=>{const n={...e};for(const r of It(t)){if(r in e)throw new Error(Em(r));n[r]=t[r]}return n},Fl=e=>Xn(e)?e:(e==null?void 0:e.disableValidation)??!1,Nd=J("effect/Schema/astCache",()=>new WeakMap),NR=e=>e===void 0?[]:Array.isArray(e)?e:[e],$o=({Base:e,annotations:t,disableToString:n,fields:r,identifier:s,kind:o,schema:i})=>{var w,x;const c=Symbol.for(`effect/Schema/${o}/${s}`),[a,l,f]=NR(t),d=Md(i),p=d.annotations({identifier:s,...a}),m=d.annotations({[Jn]:`${s} (Type side)`,...a}),_=i.annotations({[Jn]:`${s} (Constructor)`,...a}),k=i.annotations({[Jn]:`${s} (Encoded side)`,...f}),g=i.annotations({[xu]:s,...f,...a,...l}),b=v=>j(v,c)&&B1(m)(v),S=(x=class extends e{constructor(v={},E=!1){v={...v},o!=="Class"&&delete v._tag,v=Uy(r,v),Fl(E)||(v=Il(_)(v)),super(v,!0)}static get ast(){let v=Nd.get(this);if(v)return v;const E=fR([m],{decode:()=>(O,$,M)=>O instanceof this||b(O)?_s(O):ky(new ot(M,O)),encode:()=>(O,$)=>O instanceof this?_s(O):Oy(U1(m)(O,$),M=>new this(M,!0))},{identifier:s,pretty:O=>$=>`${s}(${O($)})`,arbitrary:O=>$=>O($).map(M=>new this(M)),equivalence:te,[Uo]:p.ast,...a});return v=IR(k,E,{strict:!0,decode:O=>new this(O,!0),encode:te}).annotations({[Uo]:g.ast,...l}).ast,Nd.set(this,v),v}static pipe(){return N(this,arguments)}static annotations(v){return he(this.ast).annotations(v)}static toString(){return`(${String(k)} <-> ${s})`}static make(...v){return new this(...v)}static extend(v){return(E,O)=>{const $=Yy(E),M=zy(E),B=Ic(r,$);return $o({kind:o,identifier:v,schema:xR(i,M),fields:B,Base:this,annotations:O})}}static transformOrFail(v){return(E,O,$)=>{const M=Ic(r,E);return $o({kind:o,identifier:v,schema:Ha(i,Md(pt(M)),O),fields:M,Base:this,annotations:$})}}static transformOrFailFrom(v){return(E,O,$)=>{const M=Ic(r,E);return $o({kind:o,identifier:v,schema:Ha(cR(i),pt(M),O),fields:M,Base:this,annotations:$})}}get[(w=gr,c)](){return c}},u(x,w,qa),u(x,"fields",{...r}),u(x,"identifier",s),x);return n!==!0&&Object.defineProperty(S.prototype,"toString",{value(){return`${s}({ ${It(r).map(v=>`${wm(v)}: ${wt(this[v])}`).join(", ")} })`},configurable:!0}),S};var Zy,Ee,Qy,FR=[];function PR(e,t,n){var r,s,o,i={};for(o in t)o=="key"?r=t[o]:o=="ref"?s=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?Zy.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)i[o]===void 0&&(i[o]=e.defaultProps[o]);return jR(e,i,r,s,null)}function jR(e,t,n,r,s){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Qy,__i:-1,__u:0};return s==null&&Ee.vnode!=null&&Ee.vnode(o),o}function Hr(e){return e.children}Zy=FR.slice,Ee={__e:function(e,t,n,r){for(var s,o,i;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(e)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),i=s.__d),i)return s.__E=s}catch(c){e=c}throw e}},Qy=0,typeof Promise=="function"&&Promise.prototype.then.bind(Promise.resolve());var Fd=/[\s\n\\/='"\0<>]/,Pd=/^(xlink|xmlns|xml)([A-Z])/,LR=/^(?:accessK|auto[A-Z]|cell|ch|col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z])/,KR=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,DR=new Set(["draggable","spellcheck"]),UR=/["&<]/;function lo(e){if(e.length===0||UR.test(e)===!1)return e;for(var t=0,n=0,r="",s="";n<e.length;n++){switch(e.charCodeAt(n)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;default:continue}n!==t&&(r+=e.slice(t,n)),r+=s,t=n+1}return n!==t&&(r+=e.slice(t,n)),r}var jd={},BR=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),qR=/[A-Z]/g;function JR(e){var t="";for(var n in e){var r=e[n];if(r!=null&&r!==""){var s=n[0]=="-"?n:jd[n]||(jd[n]=n.replace(qR,"-$&").toLowerCase()),o=";";typeof r!="number"||s.startsWith("--")||BR.has(s)||(o="px;"),t=t+s+":"+r+o}}return t||void 0}function Ld(){this.__d=!0}function VR(e,t){return{__v:e,context:t,props:e.props,setState:Ld,forceUpdate:Ld,__d:!0,__h:new Array(0)}}var Wa,un,ys,Wr,Pl={},Kd=[],Gr=Array.isArray,Ga=Object.assign,Ae="";function HR(e,t,n){var r=Ee.__s;Ee.__s=!0,Wa=Ee.__b,un=Ee.diffed,ys=Ee.__r,Wr=Ee.unmount;var s=PR(Hr,null);s.__k=[e];try{var o=Dt(e,t||Pl,!1,void 0,s,!1,n);return Gr(o)?o.join(Ae):o}catch(i){throw i.then?new Error('Use "renderToStringAsync" for suspenseful rendering.'):i}finally{Ee.__c&&Ee.__c(e,Kd),Ee.__s=r,Kd.length=0}}function Dd(e,t){var n,r=e.type,s=!0;return e.__c?(s=!1,(n=e.__c).state=n.__s):n=new r(e.props,t),e.__c=n,n.__v=e,n.props=e.props,n.context=t,n.__d=!0,n.state==null&&(n.state=Pl),n.__s==null&&(n.__s=n.state),r.getDerivedStateFromProps?n.state=Ga({},n.state,r.getDerivedStateFromProps(n.props,n.state)):s&&n.componentWillMount?(n.componentWillMount(),n.state=n.__s!==n.state?n.__s:n.state):!s&&n.componentWillUpdate&&n.componentWillUpdate(),ys&&ys(e),n.render(n.props,n.state,t)}function Dt(e,t,n,r,s,o,i){if(e==null||e===!0||e===!1||e===Ae)return Ae;var c=typeof e;if(c!="object")return c=="function"?Ae:c=="string"?lo(e):e+Ae;if(Gr(e)){var a,l=Ae;s.__k=e;for(var f=e.length,d=0;d<f;d++){var p=e[d];if(p!=null&&typeof p!="boolean"){var m,_=Dt(p,t,n,r,s,o,i);typeof _=="string"?l+=_:(a||(a=new Array(f)),l&&a.push(l),l=Ae,Gr(_)?(m=a).push.apply(m,_):a.push(_))}}return a?(l&&a.push(l),a):l}if(e.constructor!==void 0)return Ae;e.__=s,Wa&&Wa(e);var k=e.type,g=e.props;if(typeof k=="function"){var b,S,w,x=t;if(k===Hr){if("tpl"in g){for(var v=Ae,E=0;E<g.tpl.length;E++)if(v+=g.tpl[E],g.exprs&&E<g.exprs.length){var O=g.exprs[E];if(O==null)continue;typeof O!="object"||O.constructor!==void 0&&!Gr(O)?v+=O:v+=Dt(O,t,n,r,e,o,i)}return v}if("UNSTABLE_comment"in g)return"<!--"+lo(g.UNSTABLE_comment)+"-->";S=g.children}else{if((b=k.contextType)!=null){var $=t[b.__c];x=$?$.props.value:b.__}var M=k.prototype&&typeof k.prototype.render=="function";if(M)S=Dd(e,x),w=e.__c;else{e.__c=w=VR(e,x);for(var B=0;w.__d&&B++<25;)w.__d=!1,ys&&ys(e),S=k.call(w,g,x);w.__d=!0}if(w.getChildContext!=null&&(t=Ga({},t,w.getChildContext())),M&&Ee.errorBoundaries&&(k.getDerivedStateFromError||w.componentDidCatch)){S=S!=null&&S.type===Hr&&S.key==null&&S.props.tpl==null?S.props.children:S;try{return Dt(S,t,n,r,e,o,i)}catch(Fn){return k.getDerivedStateFromError&&(w.__s=k.getDerivedStateFromError(Fn)),w.componentDidCatch&&w.componentDidCatch(Fn,Pl),w.__d?(S=Dd(e,t),(w=e.__c).getChildContext!=null&&(t=Ga({},t,w.getChildContext())),Dt(S=S!=null&&S.type===Hr&&S.key==null&&S.props.tpl==null?S.props.children:S,t,n,r,e,o,i)):Ae}finally{un&&un(e),Wr&&Wr(e)}}}S=S!=null&&S.type===Hr&&S.key==null&&S.props.tpl==null?S.props.children:S;try{var U=Dt(S,t,n,r,e,o,i);return un&&un(e),Ee.unmount&&Ee.unmount(e),U}catch(Fn){if(i&&i.onError){var G=i.onError(Fn,e,function(eb,tb){return Dt(eb,t,n,r,tb,o,i)});if(G!==void 0)return G;var ie=Ee.__e;return ie&&ie(Fn,e),Ae}throw Fn}}var X,me="<"+k,Y=Ae;for(var C in g){var W=g[C];if(typeof W!="function"||C==="class"||C==="className"){switch(C){case"children":X=W;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in g)continue;C="for";break;case"className":if("class"in g)continue;C="class";break;case"defaultChecked":C="checked";break;case"defaultSelected":C="selected";break;case"defaultValue":case"value":switch(C="value",k){case"textarea":X=W;continue;case"select":r=W;continue;case"option":r!=W||"selected"in g||(me+=" selected")}break;case"dangerouslySetInnerHTML":Y=W&&W.__html;continue;case"style":typeof W=="object"&&(W=JR(W));break;case"acceptCharset":C="accept-charset";break;case"httpEquiv":C="http-equiv";break;default:if(Pd.test(C))C=C.replace(Pd,"$1:$2").toLowerCase();else{if(Fd.test(C))continue;C[4]!=="-"&&!DR.has(C)||W==null?n?KR.test(C)&&(C=C==="panose1"?"panose-1":C.replace(/([A-Z])/g,"-$1").toLowerCase()):LR.test(C)&&(C=C.toLowerCase()):W+=Ae}}W!=null&&W!==!1&&(me=W===!0||W===Ae?me+" "+C:me+" "+C+'="'+(typeof W=="string"?lo(W):W+Ae)+'"')}}if(Fd.test(k))throw new Error(k+" is not a valid HTML tag name in "+me+">");if(Y||(typeof X=="string"?Y=lo(X):X!=null&&X!==!1&&X!==!0&&(Y=Dt(X,t,k==="svg"||k!=="foreignObject"&&n,r,e,o,i))),un&&un(e),Wr&&Wr(e),!Y&&WR.has(k))return me+"/>";var tt="</"+k+">",He=me+">";return Gr(Y)?[He].concat(Y,[tt]):typeof Y!="string"?[He,Y,tt]:He+Y+tt}var WR=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),GR=HR;const Xy=/https:\/\//;class zR extends Gs("ProjectTechnology")({id:H,name:H,category:Cy("programming language","framework","cloud computing","database","devops tool","testing","collaboration tool","frontend","other"),version:H.pipe(Vt),url:H.pipe(Vt)}){}class YR extends Gs("ProjectDetails")({order:pR,client:pt({name:H,description:H}).pipe(Vt),title:H,stack:H.pipe(at),tools:H.pipe(at),roles:H.pipe(at),achivements:pt({technical:H,human:H.pipe(Vt)}).pipe(at)}){}class ZR extends Gs("EmploymentRecord")({position:H,workType:Cy("hybrid","on-site","remote"),companyName:H,companyDescription:H,website:H.pipe(Wy(Xy)),start:H,end:H,location:pt({city:H,country:H,timezone:H}).pipe(ER),projects:YR.pipe(at)}){}class QR extends Gs("Me")({name:H,coverLetter:pt({position:H,content:H.pipe(at)}).pipe(Vt),expertise:H.pipe(at),location:H.pipe(Vt),phone:H.pipe(Vt),email:H,profiles:pt({url:H.pipe(Wy(Xy)),icon:H}).pipe(at),expertSummary:H.pipe(at)}){}class XR extends Gs("ResumeObject")({$schema:H.pipe(Vt),me:QR,technologies:zR.pipe(at),employmentHistory:ZR.pipe(at)}){}var eC=0;function T(e,t,n,r,s,o){t||(t={});var i,c,a=t;if("ref"in a)for(c in a={},t)c=="ref"?i=t[c]:a[c]=t[c];var l={type:e,props:a,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--eC,__i:-1,__u:0,__source:s,__self:o};if(typeof e=="function"&&(i=e.defaultProps))for(c in i)a[c]===void 0&&(a[c]=i[c]);return Ee.vnode&&Ee.vnode(l),l}function tC(e){const t=e.me.coverLetter;return T("div",{id:"resume",children:[iC(e),t?T("div",{children:[T("div",{className:"section-header",children:T("span",{id:"label",children:[`Why I'm the Right Choice for "`,t.position,'"']})}),T("div",{id:"summary",children:t.content.map(n=>T("p",{dangerouslySetInnerHTML:{__html:n}}))})]}):null,T("div",{className:"section-header",children:T("span",{id:"label",children:"Summary"})}),T("div",{id:"summary",children:e.me.expertSummary.map(n=>T("p",{dangerouslySetInnerHTML:{__html:n}}))}),T("div",{className:"section-header",children:T("span",{id:"label",children:"Skills"})}),T("div",{id:"skills",children:Object.entries(lC(e)).map(([n,r])=>T("div",{className:"skill-group",children:[T("span",{children:n}),T("div",{className:"group-list",children:r.map(s=>T("span",{className:"stack-item",children:s.technology.name}))})]}))}),T("div",{className:"section-header",children:T("span",{id:"label",children:"Employment"})}),T("div",{id:"employment",children:aC(e)})]})}function nC(e){var t;return T("span",{children:["Software Engineer. ",T("span",{id:"expertise",children:["Expertise: ",(t=e.me)==null?void 0:t.expertise.join("/")]})]})}function rC(e){return T("span",{children:[e.position," · ",e.location.city,", ",e.location.country," · ",e.workType]})}function sC(e){return T("span",{children:[T("a",{className:"companyLink",href:e.website,children:e.companyName})," · ",e.companyDescription]})}function oC(e){return T("span",{children:e.stack.map(t=>T("span",{className:"stack-item",children:t}))})}function iC(e){var t;return T("div",{id:"head",children:[T("div",{id:"name",children:e.me.name}),T("div",{id:"role",children:nC(e)}),T("div",{id:"location",children:(t=e.me)==null?void 0:t.location}),T("div",{id:"contact",children:[T("div",{id:"email",children:[T("span",{className:"fa-regular fa-envelope"}),T("a",{href:`mailto:${e.me.email}`,children:[" ",e.me.email]})]}),T("div",{id:"phone",children:[T("span",{className:"fa-solid fa-mobile-screen-button"}),T("a",{href:`tel:${e.me.phone}`,children:[" ",e.me.phone]})]})]}),T("div",{id:"profiles",children:e.me.profiles.map(n=>{const r=`fa-${n.icon.split(" ").at(0)}`;return T("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",children:T("span",{className:`fa-brands fa-lg ${r}`,style:{color:n.icon.split(" ").at(1)}})})})})]})}function cC(e){return T("div",{className:"project",children:[T("div",{style:{display:"flex"},children:[T("div",{style:{marginBottom:"3px"},children:[T("b",{children:"Project: "}),T("span",{children:e.title})]}),T("div",{style:{marginLeft:"auto"},children:[T("b",{children:"Roles: "}),T("span",{children:e.roles.join("/")})]})]}),T("span",{style:{display:"block"},children:[T("b",{children:"Stack: "}),oC(e)]}),T("ul",{children:e.achivements.map(t=>T("div",{children:T("li",{children:t.human??t.technical})}))})]})}function aC(e){return T("div",{id:"employment",children:e.employmentHistory.map(t=>T("div",{className:"company",children:[T("div",{style:{display:"flex"},children:[T("span",{children:sC(t)}),T("span",{style:{marginLeft:"auto"},children:uC(t)})]}),T("span",{style:{display:"block",marginBottom:"5px"},children:rC(t)}),t.projects.map(cC),T("hr",{})]}))})}function uC(e){const t=Od(e.start),n=Od(e.end),r=N1(t,n),s=365.25*24*60*60*1e3,o=s/12;let i=Math.floor(r/s),c=Math.ceil(r%s/o);c===12&&(i=i+1,c=0);const a=Ed(t,{month:"short",year:"numeric"}),l=Ed(n,{month:"short",year:"numeric"});let f=`${c} mos`;return i&&(f=`${i} yr ${f}`),T("span",{children:[a," - ",l," · ",f]})}function lC(e){var r;const t=(r=e.employmentHistory)==null?void 0:r.flatMap(s=>s.projects.flatMap(o=>[...o.stack,...o.tools].flatMap(i=>{var a;const c=(a=e.technologies)==null?void 0:a.find(l=>l.id==i);return c?[{code:i,category:c.category,technology:c}]:[]})));return t?y(t,Ou((s,o)=>s.code==o.code),Rv(s=>s.technology.category)):(console.warn("Skill categories not found"),{})}const Ac=e=>{try{return GR(tC(e))}catch(t){return console.log("render error",t),""}},fC=async()=>{const e=await fetch("./john-doe.json").then(n=>n.json());return delete e.$schema,D1(XR)(e)},dC=e=>{if(e)try{return JSON.parse(e)}catch{}},hC=()=>{if(!("monaco_loader"in window)||typeof window.monaco_loader!="object"||window.monaco_loader==null){console.warn("monaco loader is not available");return}return window.monaco_loader},pC=()=>{const e=hC();if(e)return e.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs"}}),e.init()},mC=async(e,t)=>{const n=document.getElementById("code-editor");if(!n){console.warn("code-editor node not found");return}return e.editor.create(n,{model:t,contextmenu:!1,minimap:{enabled:!1}})},gC=async e=>({model:e.editor.createModel("","json")}),_C=(e,t,n)=>{const s=e.editor.getModelMarkers({resource:t.uri}).find(o=>n.has(o.severity.valueOf()));return s?(console.log("editor code error",s),!0):!1},yC=async()=>{const e=await pC();if(!e)return;const t=await gC(e);if(await mC(e,t.model))return{monaco:e,textModel:t}};window.Alpine=ss;bC();ss.data("sections",()=>({sections:[{id:"all",label:"All"},{id:"me",label:"Me"},{id:"employmentHistory",label:"My Employment"},{id:"technologies",label:"Tecnologies"}]}));ss.start();async function bC(){const e=ss.reactive({resumeObject:{},resumeHtml:"<h1>My Resume</h1>",editorSection:"me",mode:"editor",editorHasError:!1});ss.store("state",e);const t=await yC(),n=await fetch("./resume-schema.json").then(i=>i.json());if(!t){console.warn("can not load editor");return}const r=i=>t.monaco.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"resume.json",fileMatch:["*"],schema:{...n,$ref:i}}]}),s=()=>{e.editorSection=="all"?(delete e.resumeObject.$schema,t.textModel.model.setValue(JSON.stringify(e.resumeObject,void 0,2)),r("#/$defs/ResumeObject")):(t.textModel.model.setValue(JSON.stringify(e.resumeObject[e.editorSection],void 0,2)),r(`#/$defs/ResumeObject/properties/${e.editorSection}`))};t.textModel.model.onDidChangeContent(()=>{const i=dC(t.textModel.model.getValue());console.log("parsed",i),i&&(e.editorSection=="all"?e.resumeObject=i:e.resumeObject[e.editorSection]=i,e.resumeHtml=Ac(e.resumeObject))}),document.addEventListener("section-changed",()=>{s()});const o=await fC();t.monaco.editor.onDidChangeMarkers(()=>{const i=_C(t.monaco,t.textModel.model,new Set([4,8]));console.log("markers changed",{hasErrors:i}),e.editorHasError=i,i||(e.resumeHtml=Ac(e.resumeObject))}),e.resumeObject=o,e.resumeHtml=Ac(o),s()}
