import{aM as q,aN as ee,aO as te,aP as ne,aQ as ae,aR as se,p as oe,N as re,d as j,Y as U,Z as $,aS as k,_ as I,a0 as w,ag as le,aT as g,aU as r,aa as b,aV as d,ad as ce,a9 as f,aW as u,aX as O,aY as ie,aZ as C,a_ as me,a$ as ue,a8 as A,a4 as de,as as v,b0 as pe,b1 as _,b2 as fe,ai as n,aj as ge,a1 as D,$ as he,ak as Ee,al as ye,a6 as H,am as R,b3 as L,y as be,b4 as ve,b5 as xe,b6 as Ne,b7 as we,aK as Se,aL as Me}from"./footer-D8e24wrQ.js";const x=Symbol.for("effect/DateTime"),ke={[x]:x,pipe(){return oe(this,arguments)},[re](){return this.toString()},toJSON(){return F(this).toJSON()}},Ce={...ke,_tag:"Utc",[te](){return ne(this,ae(this.epochMillis))},[se](e){return S(e)&&e._tag==="Utc"&&this.epochMillis===e.epochMillis},toString(){return`DateTime.Utc(${F(this).toJSON()})`}},S=e=>q(e,x),De=e=>S(e[0]),z=e=>{const t=Object.create(Ce);return t.epochMillis=e,Object.defineProperty(t,"partsUtc",{value:void 0,enumerable:!1,writable:!0}),t},E=e=>{const t=e.getTime();if(Number.isNaN(t))throw new ee("Invalid date");return z(t)},Re=e=>{if(S(e))return e;if(e instanceof Date)return E(e);if(typeof e=="object"){const t=new Date(0);return Ie(t,e),E(t)}else if(typeof e=="string"&&!Te(e))return E(new Date(e+"Z"));return E(new Date(e))},Te=e=>/Z|[+-]\d{2}$|[+-]\d{2}:\d{2}$|\]$/.test(e),Pe=()=>z(Date.now()),je=j(2,(e,t)=>T(t)-T(e)),F=e=>new Date(e.epochMillis),Ue=e=>{if(e._tag==="Utc")return new Date(e.epochMillis);if(e.zone._tag==="Offset")return new Date(e.epochMillis+e.zone.offset);if(e.adjustedEpochMillis!==void 0)return new Date(e.adjustedEpochMillis);const t=e.zone.format.formatToParts(e.epochMillis).filter(s=>s.type!=="literal"),a=new Date(0);return a.setUTCFullYear(Number(t[2].value),Number(t[0].value)-1,Number(t[1].value)),a.setUTCHours(Number(t[3].value),Number(t[4].value),Number(t[5].value),Number(t[6].value)),e.adjustedEpochMillis=a.getTime(),a},$e=e=>{const t=Math.abs(e);let a=Math.floor(t/(60*60*1e3)),s=Math.round(t%(60*60*1e3)/(60*1e3));return s===60&&(a+=1,s=0),`${e<0?"-":"+"}${String(a).padStart(2,"0")}:${String(s).padStart(2,"0")}`},T=e=>e.epochMillis,Ie=(e,t)=>{if(t.year!==void 0&&e.setUTCFullYear(t.year),t.month!==void 0&&e.setUTCMonth(t.month-1),t.day!==void 0&&e.setUTCDate(t.day),t.weekDay!==void 0){const a=t.weekDay-e.getUTCDay();e.setUTCDate(e.getUTCDate()+a)}t.hours!==void 0&&e.setUTCHours(t.hours),t.minutes!==void 0&&e.setUTCMinutes(t.minutes),t.seconds!==void 0&&e.setUTCSeconds(t.seconds),t.millis!==void 0&&e.setUTCMilliseconds(t.millis)},Oe=e=>e._tag==="Named"?e.id:$e(e.offset),Ae=j(De,(e,t)=>{try{return new Intl.DateTimeFormat(t==null?void 0:t.locale,{timeZone:e._tag==="Utc"?"UTC":Oe(e.zone),...t}).format(e.epochMillis)}catch{return new Intl.DateTimeFormat(t==null?void 0:t.locale,{timeZone:"UTC",...t}).format(Ue(e))}}),N=Re,Z=Pe,_e=je,P=Ae;class J extends U()("ResumeEditorProvider",{effect:$(function*(){const t=yield*I,a=yield*w;return yield*le("ResumeEditorProvider"),(yield*k).languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!0,trailingCommas:"ignore"}),{model:a,bindEditor:t.bindEditor}}),dependencies:[k.Default]}){}const V=/https:\/\//,B=["programming language","cloud computing","testing","framework","frontend","database","devops tool","collaboration tool","other"];class He extends g("ProjectTechnology")({id:r,name:r,category:b(...B),display:b("force","hide").pipe(d),version:r.pipe(d),url:r.pipe(d)}){}class Le extends g("ProjectDetails")({order:ce,client:f({name:r,description:r}).pipe(d),title:r,stack:r.pipe(u),tools:r.pipe(u),roles:r.pipe(u),achivements:f({technical:r,human:r.pipe(d)}).pipe(u)}){}class ze extends g("EmploymentRecord")({position:r,workType:b("hybrid","on-site","remote"),companyName:r,companyDescription:r,website:r.pipe(O(V)),start:r,end:r.pipe(d),location:f({city:r,country:r,timezone:r}).pipe(ie),projects:Le.pipe(u)}){get sortedProjects(){return[...this.projects].sort((t,a)=>a.order-t.order)}isMonthPast(t){const a=C(Z().epochMillis),s=C(N(this.start).epochMillis);return me(s)(a).pipe(ue)>t*30}}class Fe extends g("Me")({name:r,coverLetter:f({position:r,content:r.pipe(u)}).pipe(d),expertise:r.pipe(u),location:r.pipe(d),phone:r.pipe(d),email:r,profiles:f({url:r.pipe(O(V)),icon:r}).pipe(u),expertSummary:r.pipe(u)}){}class Y extends g("ResumeObject")({$schema:r.pipe(d),me:Fe,technologies:He.pipe(u),employmentHistory:ze.pipe(u)}){}class W extends U()("StoreProvider",{effect:$(function*(){const t=yield*K(),a=yield*Ze(),s=fe("resume")??"example",o=yield*w;return{availableResumes:a,exampleResume:t,currentResumeName:s,selectResume:m=>{const p=window.localStorage.getItem(m);p&&o.model.setValue(p)},saveCurrentResume:()=>{const m=o.model.getValue();localStorage.setItem(s,m)},duplicateResume:m=>{const p=o.model.getValue();localStorage.setItem(m,p),a.push({id:m,name:m})}}}),dependencies:[]}){}const Ze=A("get available resume")(function*(){const e=[];if(Object.keys(window.localStorage).length==0){const t=yield*K();t&&localStorage.setItem("example",JSON.stringify(t,void 0,2))}for(const t of Object.keys(localStorage))localStorage.getItem(t)&&e.push({id:t,name:t});return e}),K=A("get example resume")(function*(){const e=yield*de("/resume/john-doe.jsonc").pipe(v(a=>pe(a)));return!e||typeof e!="object"?void 0:("$schema"in e&&delete e.$schema,yield*_(Y)(e))}),G=n.createContext(null),Q=n.createContext(null),Je=ge(J.Default,W.Default).pipe(D(I.Default.pipe(he(w.json))),D(Ee)),Ve=ye(Je);async function Be(){const e=await Ve.runtimeEffect.pipe(H),t=R(e.context,J),a=R(e.context,W);return{editor:t,store:a}}function h(){const e=n.useContext(G);if(!e)throw Error("App context is undefined");return e}function M(){const e=n.useContext(Q);if(!e)throw Error("App state is undefined");return e}function Ye(){const{currentResume:e,availableResumes:t}=M(),{store:a}=h();return n.createElement(n.Fragment,null,n.createElement("label",{className:"font-light text-sm",htmlFor:"resumeSelect"},"Current resume:"),n.createElement("select",{id:"resumeSelect",className:"self-start select",value:e,onChange:s=>{a.selectResume(s.target.value)}},t.map(s=>n.createElement("option",{value:s.id,key:s.id},s.name))))}const We=[{id:"editor",name:"Editor"},{id:"view",name:"View"}];function Ke(){const{currentMode:e,changeMode:t}=M();return n.createElement("div",{className:"mx-auto flex gap-3"},We.map(a=>n.createElement("label",{key:a.id,className:"hover:cursor-pointer text-lg "+(a.id===e?"text-orange-400 border px-3":"hover:text-orange-300")},n.createElement("input",{type:"radio",className:"appearance-none",value:a.id,checked:e===a.id,onChange:()=>t(a.id)})," ",a.name)))}function Ge(){return n.createElement("div",{className:"no-print pb-2 flex gap-2 justify-center items-baseline"},n.createElement(Ye,null),n.createElement(Qe,null),n.createElement(Ke,null))}function Qe(){const{currentMode:e}=M();return n.createElement("button",{onClick:()=>window.print(),hidden:e!="view",className:"ml-5 no-print hover:cursor-pointer bg-blue-400 hover:bg-blue-500 text-white py-1.5 px-2.5 rounded-full"},n.createElement("i",{className:"fa fa-file-pdf text-lg","aria-hidden":"true"}," "),"Print")}function Xe(){const e=h();return n.useEffect(()=>{var s;const t=e.editor.bindEditor();return t.layout({height:100,width:10}),(s=e.editor.bindEditor().getAction("editor.foldLevel3"))==null||s.run(),()=>{console.log("editor umnounting"),t.dispose()}},[e]),n.createElement(n.Fragment,null,n.createElement("div",{className:"flex gap-2 pb-2 items-end"},n.createElement(et,null),n.createElement(qe,null)),n.createElement("div",{className:"w-full h-screen",id:"code-editor"}))}function qe(){const e=h(),t=()=>{window.confirm("Delete this resume?")&&localStorage.removeItem(e.store.currentResumeName)};return n.createElement("button",{hidden:e.store.availableResumes.length==1,className:"btn bg-[#DC382D] hover:bg-[#B93224]",onClick:()=>t()},"Delete")}function et(){const e=h(),t=()=>{const a=window.prompt("Enter name of your resume","");a&&e.store.duplicateResume(a)};return n.createElement("button",{className:"btn bg-sky-500 hover:bg-sky-700 text-sm",onClick:()=>t()},"Duplicate")}function tt({resume:e}){const t=e.me.coverLetter;return n.createElement("div",null,rt(e),t?n.createElement("div",null,n.createElement("div",{className:"section-header"},n.createElement("span",{id:"label"},`Why I'm the Right Choice for "`,t.position,'"')),n.createElement("div",{className:"p-2 bg-so"},t.content.map((a,s)=>n.createElement("p",{key:s,dangerouslySetInnerHTML:{__html:a}})))):null,n.createElement("div",{className:"section-header"},n.createElement("span",{id:"label"},"Summary")),n.createElement("div",{className:"bg-so p-2"},e.me.expertSummary.map((a,s)=>n.createElement("p",{key:s,dangerouslySetInnerHTML:{__html:a}}))),n.createElement("div",{className:"section-header"},n.createElement("span",{id:"label"},"Skills")),n.createElement("div",{className:"flex flex-wrap gap-1"},mt(e).map(([a,s])=>n.createElement("div",{key:a,className:"flex items-center gap-1"},n.createElement("span",{className:"uppercase font-medium"},a,":"),s.map((o,l)=>n.createElement("span",{key:l,className:"bg-so p-1 text-xs"},o.technology.name))))),n.createElement("div",{className:"section-header pt-1"},n.createElement("span",{id:"label"},"Employment history")),n.createElement("div",{id:"employment"},ct(e)))}function nt(e){var t;return n.createElement("div",{className:"flex gap-2 items-baseline"},n.createElement("span",{className:"text-2xl font-thin"},"Software Engineer"),n.createElement("span",{className:"text-base"},"Expertise: ",(t=e.me)==null?void 0:t.expertise.join("/")))}function at(e){return n.createElement("div",{className:"flex text-sm"},n.createElement("span",null,e.position),n.createElement("span",{className:"font-extralight"},"路 ",e.location.city,", ",e.location.country," 路 ",e.workType))}function st(e){return n.createElement("span",null,n.createElement("a",{target:"_blank",className:"text-sky-600 font-medium",href:e.website},e.companyName)," 路 ",e.companyDescription)}function ot(e){return n.createElement("span",null,e.stack.map((t,a)=>n.createElement("span",{key:a,className:"bg-so py-1 px-1 mr-1 text-sm"},t)))}function rt(e){return n.createElement("div",{id:"head",className:"pb-4"},n.createElement("div",{className:"text-4xl font-thin"},e.me.name),n.createElement("div",{className:"text-lg font-light"},nt(e)),n.createElement("div",{className:"flex gap-1.5 text-sm font-extralight"},n.createElement("span",null,e.me.location),n.createElement("div",null,n.createElement("span",{className:"fa-regular fa-envelope"}),n.createElement("a",{href:`mailto:${e.me.email}`}," ",e.me.email)),n.createElement("div",null,n.createElement("span",{className:"fa-solid fa-mobile-screen-button"}),n.createElement("a",{href:`tel:${e.me.phone}`}," ",e.me.phone))),n.createElement("div",{className:"pt-1"},e.me.profiles.map(t=>{const a=`fa-${t.icon.split(" ").at(0)}`;return n.createElement("a",{key:t.url,className:"inline-block py-2 px-1",href:t.url,target:"_blank",rel:"noopener noreferrer"},n.createElement("span",{className:`fa-brands fa-lg ${a}`,style:{color:t.icon.split(" ").at(1)}}))})))}function lt(e,t){let a="project no-break pb-3";return t||(a+=" border-b-1 border-gray-300 border-dashed mb-2"),n.createElement("div",{className:a,key:e.title},n.createElement("div",{className:"flex"},n.createElement("div",{className:"mb-0.5"},n.createElement("span",{className:"font-medium"},"Project: "),n.createElement("span",null,e.title)),n.createElement("div",{className:"ml-auto"},n.createElement("span",{className:"font-medium"},"Roles: "),n.createElement("span",null,e.roles.join("/")))),n.createElement("span",{className:"font-medium"},"Stack:"),n.createElement("span",null,ot(e)),n.createElement("ul",{className:"list-disc pt-2 pl-10 text-sm"},e.achivements.map((s,o)=>n.createElement("li",{key:o},s.human??s.technical))))}function ct(e){return n.createElement("div",{id:"employment"},e.employmentHistory.map((t,a)=>{const s=t.isMonthPast(60);let o="border-b-1 border-gray-300 mb-2 p-2";s&&(o+=" bg-neutral-100");const l=L(t.projects.flatMap(c=>c.roles),(c,i)=>c.toLowerCase()==i.toLocaleLowerCase()).join("/");return n.createElement("div",{className:o,key:a},n.createElement("div",{className:"flex"},n.createElement("span",{className:"font-extralight text-sm"},st(t)),n.createElement("span",{className:"ml-auto"},it(t))),n.createElement("span",{className:"block"},at(t)),s?n.createElement("div",null,n.createElement("span",{className:"font-medium"},"Roles: "),n.createElement("span",null,l)):n.createElement("div",{className:"flex flex-col"},t.sortedProjects.map((c,i)=>lt(c,i==t.projects.length-1))))}))}function it(e){const t=N(e.start),a=e.end?N(e.end):Z(),s=_e(t,a),o=365.25*24*60*60*1e3,l=o/12;let c=Math.floor(s/o),i=Math.ceil(s%o/l);i===12&&(c=c+1,i=0);const m=P(t,{month:"short",year:"numeric"}),p=P(a,{month:"short",year:"numeric"});let y=`${i} mos`;c&&(y=`${c} yr ${y}`);const X=e.end?n.createElement("span",null,p," 路 ",y):n.createElement("span",{className:"font-medium"},"now");return n.createElement("span",{className:"font-light text-sm"},m," - ",X)}function mt(e){var s;const t=(s=e.employmentHistory)==null?void 0:s.flatMap(o=>o.projects.flatMap(l=>[...l.stack,...l.tools].flatMap(c=>{var m;const i=(m=e.technologies)==null?void 0:m.find(p=>p.id==c);return!i||i.display=="hide"?[]:[{code:c,category:i.category,technology:i}]})));return t?be([...t,...e.technologies.filter(o=>o.display==="force").map(o=>({code:o.id,category:o.category,technology:o}))],L((o,l)=>o.code==l.code),Ne(o=>o.technology.category),o=>Object.entries(o),ve(o=>B.findIndex(l=>l==o[0]),xe)):(console.warn("Skill categories not found"),[])}function ut(){const{editor:e}=h(),[t,a]=n.useState();return n.useEffect(()=>{e.model.getCode().pipe(v(s=>_(we(Y))(s)),v(a),H)},[e]),n.createElement(n.Fragment,null,t&&n.createElement(tt,{resume:t}))}function dt(e){const[t,a]=n.useState("editor"),[s]=n.useState(e.appContext.store.availableResumes),o={currentMode:t,changeMode:l=>{a(l)},availableResumes:s,currentResume:""};return n.createElement(G,{value:e.appContext},n.createElement(Q,{value:o},n.createElement(Ge,null),t=="editor"&&n.createElement(Xe,null),t=="view"&&n.createElement(ut,null),n.createElement(Me,null)))}function pt(e,t){Se.createRoot(t).render(n.createElement(n.StrictMode,null,n.createElement(dt,{appContext:e})))}async function ft(){const e=await Be(),t=document.getElementById("root");if(!t){console.warn("root div container");return}console.log("initialized"),pt(e,t),e.editor.model.model.setValue(JSON.stringify(e.store.exampleResume,null,2))}ft();
