import{h as te,I as se,s as ne,a as oe,c as ie,n as ae,N as re,p as le,d as $,S as I,M as R,g as O,E as A,b as M,l as ce,C as x,e as i,L as y,o as m,f,i as de,j as c,k as me,m as H,q as T,r as ue,t as pe,u as _,v as he,w as fe,x as v,y as xe,z as L,A as ge,B as E,D as je,F as be,G as ye,H as z,J as P,K as s,O as ve,P as Ne,Q as we,R as Se,T as F,U as Me}from"./editor.CtDE6kzl.js";import{R as u,c as Ce}from"./client.BJwxA_Ca.js";const N=Symbol.for("effect/DateTime"),De={[N]:N,pipe(){return le(this,arguments)},[re](){return this.toString()},toJSON(){return B(this).toJSON()}},Re={...De,_tag:"Utc",[oe](){return ie(this,ae(this.epochMillis))},[ne](e){return C(e)&&e._tag==="Utc"&&this.epochMillis===e.epochMillis},toString(){return`DateTime.Utc(${B(this).toJSON()})`}},C=e=>te(e,N),Te=e=>C(e[0]),J=e=>{const t=Object.create(Re);return t.epochMillis=e,Object.defineProperty(t,"partsUtc",{value:void 0,enumerable:!1,writable:!0}),t},j=e=>{const t=e.getTime();if(Number.isNaN(t))throw new se("Invalid date");return J(t)},Ee=e=>{if(C(e))return e;if(e instanceof Date)return j(e);if(typeof e=="object"){const t=new Date(0);return Oe(t,e),j(t)}else if(typeof e=="string"&&!Pe(e))return j(new Date(e+"Z"));return j(new Date(e))},Pe=e=>/Z|[+-]\d{2}$|[+-]\d{2}:?\d{2}$|\]$/.test(e),ke=()=>J(Date.now()),Ue=$(2,(e,t)=>k(t)-k(e)),B=e=>new Date(e.epochMillis),$e=e=>{if(e._tag==="Utc")return new Date(e.epochMillis);if(e.zone._tag==="Offset")return new Date(e.epochMillis+e.zone.offset);if(e.adjustedEpochMillis!==void 0)return new Date(e.adjustedEpochMillis);const t=e.zone.format.formatToParts(e.epochMillis).filter(o=>o.type!=="literal"),n=new Date(0);return n.setUTCFullYear(Number(t[2].value),Number(t[0].value)-1,Number(t[1].value)),n.setUTCHours(Number(t[3].value),Number(t[4].value),Number(t[5].value),Number(t[6].value)),e.adjustedEpochMillis=n.getTime(),n},Ie=e=>{const t=Math.abs(e);let n=Math.floor(t/(60*60*1e3)),o=Math.round(t%(60*60*1e3)/(60*1e3));return o===60&&(n+=1,o=0),`${e<0?"-":"+"}${String(n).padStart(2,"0")}:${String(o).padStart(2,"0")}`},k=e=>e.epochMillis,Oe=(e,t)=>{if(t.year!==void 0&&e.setUTCFullYear(t.year),t.month!==void 0&&e.setUTCMonth(t.month-1),t.day!==void 0&&e.setUTCDate(t.day),t.weekDay!==void 0){const n=t.weekDay-e.getUTCDay();e.setUTCDate(e.getUTCDate()+n)}t.hours!==void 0&&e.setUTCHours(t.hours),t.minutes!==void 0&&e.setUTCMinutes(t.minutes),t.seconds!==void 0&&e.setUTCSeconds(t.seconds),t.millis!==void 0&&e.setUTCMilliseconds(t.millis)},Ae=e=>e._tag==="Named"?e.id:Ie(e.offset),He=$(Te,(e,t)=>{try{return new Intl.DateTimeFormat(t?.locale,{timeZone:e._tag==="Utc"?"UTC":Ae(e.zone),...t}).format(e.epochMillis)}catch{return new Intl.DateTimeFormat(t?.locale,{timeZone:"UTC",...t}).format($e(e))}}),w=Ee,V=ke,_e=Ue,U=He;class Z extends I()("ResumeEditorProvider",{effect:O(function*(){const t=yield*A,n=yield*M;return yield*ce("ResumeEditorProvider"),(yield*R).languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!0,trailingCommas:"ignore"}),{model:n,bindEditor:t.bindEditor}}),dependencies:[R.Default]}){}const W=/https:\/\//,Y=["programming language","cloud computing","testing","framework","frontend","database","devops tool","collaboration tool","other"];class Le extends x("ProjectTechnology")({id:i,name:i,category:y(...Y),display:y("force","hide").pipe(m),version:i.pipe(m),url:i.pipe(m)}){}class ze extends x("ProjectDetails")({order:de,client:f({name:i,description:i}).pipe(m),title:i,stack:i.pipe(c),tools:i.pipe(c),roles:i.pipe(c),achivements:f({technical:i,human:i.pipe(m)}).pipe(c)}){}class Fe extends x("EmploymentRecord")({position:i,workType:y("hybrid","on-site","remote"),companyName:i,companyDescription:i,website:i.pipe(H(W)),start:i,end:i.pipe(m),location:f({city:i,country:i,timezone:i}).pipe(me),projects:ze.pipe(c)}){get sortedProjects(){return[...this.projects].sort((t,n)=>n.order-t.order)}isMonthPast(t){const n=T(V().epochMillis),o=T(w(this.start).epochMillis);return ue(o)(n).pipe(pe)>t*30}}class Je extends x("Me")({name:i,coverLetter:f({position:i,content:i.pipe(c)}).pipe(m),expertise:i.pipe(c),location:i.pipe(m),phone:i.pipe(m),email:i,profiles:f({url:i.pipe(H(W)),icon:i}).pipe(c),expertSummary:i.pipe(c)}){}class G extends x("ResumeObject")({$schema:i.pipe(m),me:Je,technologies:Le.pipe(c),employmentHistory:Fe.pipe(c)}){}class K extends I()("StoreProvider",{effect:O(function*(){const t=yield*q(),n=yield*Be(),o=he("resume")??"example",a=yield*M;return{availableResumes:n,exampleResume:t,currentResumeName:o,selectResume:p=>{const h=window.localStorage.getItem(p);h&&a.model.setValue(h)},saveCurrentResume:()=>{const p=a.model.getValue();localStorage.setItem(o,p)},duplicateResume:p=>{const h=a.model.getValue();localStorage.setItem(p,h),n.push({id:p,name:p})}}}),dependencies:[]}){}const Be=_("get available resume")(function*(){const e=[];if(Object.keys(window.localStorage).length==0){const t=yield*q();t&&localStorage.setItem("example",JSON.stringify(t,void 0,2))}for(const t of Object.keys(localStorage))localStorage.getItem(t)&&e.push({id:t,name:t});return e}),q=_("get example resume")(function*(){const e=yield*fe("/resume/john-doe.jsonc").pipe(v(n=>xe(n)));return!e||typeof e!="object"?void 0:("$schema"in e&&delete e.$schema,yield*L(G)(e))}),Q=u.createContext(null),X=u.createContext(null),Ve=ge(Z.Default,K.Default).pipe(E(A.Default.pipe(je(M.json))),E(be)),Ze=ye(Ve);async function We(){const e=await Ze.runtimeEffect.pipe(z),t=P(e.context,Z),n=P(e.context,K);return{editor:t,store:n}}function g(){const e=u.useContext(Q);if(!e)throw Error("App context is undefined");return e}function D(){const e=u.useContext(X);if(!e)throw Error("App state is undefined");return e}function Ye(){const{currentResume:e,availableResumes:t}=D(),{store:n}=g();return s.jsxs(s.Fragment,{children:[s.jsx("label",{className:"font-light text-sm",htmlFor:"resumeSelect",children:"Current resume:"}),s.jsx("select",{id:"resumeSelect",className:"self-start select",value:e,onChange:o=>{n.selectResume(o.target.value)},children:t.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))})]})}const Ge=[{id:"editor",name:"Editor"},{id:"view",name:"View"}];function Ke(){const{currentMode:e,changeMode:t}=D();return s.jsx("div",{className:"mx-auto flex gap-3",children:Ge.map(n=>s.jsxs("label",{className:"hover:cursor-pointer text-lg "+(n.id===e?"text-orange-400 border px-3":"hover:text-orange-300"),children:[s.jsx("input",{type:"radio",className:"appearance-none",value:n.id,checked:e===n.id,onChange:()=>t(n.id)})," ",n.name]},n.id))})}function qe(){return s.jsxs("div",{className:"no-print pb-2 flex gap-2 justify-center items-baseline",children:[s.jsx(Ye,{}),s.jsx(Qe,{}),s.jsx(Ke,{})]})}function Qe(){const{currentMode:e}=D();return s.jsxs("button",{onClick:()=>window.print(),hidden:e!="view",className:"ml-5 no-print hover:cursor-pointer bg-blue-400 hover:bg-blue-500 text-white py-1.5 px-2.5 rounded-full",children:[s.jsx("i",{className:"fa fa-file-pdf text-lg","aria-hidden":"true",children:" "}),"Print"]})}function Xe(){const e=g();return u.useEffect(()=>{const t=e.editor.bindEditor();return t.layout({height:100,width:10}),e.editor.bindEditor().getAction("editor.foldLevel3")?.run(),()=>{console.log("editor umnounting"),t.dispose()}},[e]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2 pb-2 items-end",children:[s.jsx(tt,{}),s.jsx(et,{})]}),s.jsx("div",{className:"w-full h-screen",id:"code-editor"})]})}function et(){const e=g(),t=()=>{window.confirm("Delete this resume?")&&localStorage.removeItem(e.store.currentResumeName)};return s.jsx("button",{hidden:e.store.availableResumes.length==1,className:"btn bg-[#DC382D] hover:bg-[#B93224]",onClick:()=>t(),children:"Delete"})}function tt(){const e=g(),t=()=>{const n=window.prompt("Enter name of your resume","");n&&e.store.duplicateResume(n)};return s.jsx("button",{className:"btn bg-sky-500 hover:bg-sky-700 text-sm",onClick:()=>t(),children:"Duplicate"})}function st({resume:e}){const t=e.me.coverLetter;return s.jsxs("div",{children:[rt(e),t?s.jsxs("div",{children:[s.jsx("div",{className:"section-header",children:s.jsxs("span",{id:"label",children:[`Why I'm the Right Choice for "`,t.position,'"']})}),s.jsx("div",{className:"p-2 bg-so",children:t.content.map((n,o)=>s.jsx("p",{dangerouslySetInnerHTML:{__html:n}},o))})]}):null,s.jsx("div",{className:"section-header",children:s.jsx("span",{id:"label",children:"Summary"})}),s.jsx("div",{className:"bg-so p-2",children:e.me.expertSummary.map((n,o)=>s.jsx("p",{dangerouslySetInnerHTML:{__html:n}},o))}),s.jsx("div",{className:"section-header",children:s.jsx("span",{id:"label",children:"Skills"})}),s.jsx("div",{className:"flex flex-wrap gap-1",children:mt(e).map(([n,o])=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("span",{className:"uppercase font-medium",children:[n,":"]}),o.map((a,l)=>s.jsx("span",{className:"bg-so p-1 text-xs",children:a.technology.name},l))]},n))}),s.jsx("div",{className:"section-header pt-1",children:s.jsx("span",{id:"label",children:"Employment history"})}),s.jsx("div",{id:"employment",children:ct(e)})]})}function nt(e){return s.jsxs("div",{className:"flex gap-2 items-baseline",children:[s.jsx("span",{className:"text-2xl font-thin",children:"Software Engineer"}),s.jsxs("span",{className:"text-base",children:["Expertise: ",e.me?.expertise.join("/")]})]})}function ot(e){return s.jsxs("div",{className:"flex text-sm",children:[s.jsx("span",{children:e.position}),s.jsxs("span",{className:"font-extralight",children:["路 ",e.location.city,", ",e.location.country," 路 ",e.workType]})]})}function it(e){return s.jsxs("span",{children:[s.jsx("a",{target:"_blank",className:"text-sky-600 font-medium",href:e.website,children:e.companyName})," 路 ",e.companyDescription]})}function at(e){return s.jsx("span",{children:e.stack.map((t,n)=>s.jsx("span",{className:"bg-so py-1 px-1 mr-1 text-sm",children:t},n))})}function rt(e){return s.jsxs("div",{id:"head",className:"pb-4",children:[s.jsx("div",{className:"text-4xl font-thin",children:e.me.name}),s.jsx("div",{className:"text-lg font-light",children:nt(e)}),s.jsxs("div",{className:"flex gap-1.5 text-sm font-extralight",children:[s.jsx("span",{children:e.me.location}),s.jsxs("div",{children:[s.jsx("span",{className:"fa-regular fa-envelope"}),s.jsxs("a",{href:`mailto:${e.me.email}`,children:[" ",e.me.email]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"fa-solid fa-mobile-screen-button"}),s.jsxs("a",{href:`tel:${e.me.phone}`,children:[" ",e.me.phone]})]})]}),s.jsx("div",{className:"pt-1",children:e.me.profiles.map(t=>{const n=`fa-${t.icon.split(" ").at(0)}`;return s.jsx("a",{className:"inline-block py-2 px-1",href:t.url,target:"_blank",rel:"noopener noreferrer",children:s.jsx("span",{className:`fa-brands fa-lg ${n}`,style:{color:t.icon.split(" ").at(1)}})},t.url)})})]})}function lt(e,t){let n="project no-break pb-3";return t||(n+=" border-b-1 border-gray-300 border-dashed mb-2"),s.jsxs("div",{className:n,children:[s.jsxs("div",{className:"flex",children:[s.jsxs("div",{className:"mb-0.5",children:[s.jsx("span",{className:"font-medium",children:"Project: "}),s.jsx("span",{children:e.title})]}),s.jsxs("div",{className:"ml-auto",children:[s.jsx("span",{className:"font-medium",children:"Roles: "}),s.jsx("span",{children:e.roles.join("/")})]})]}),s.jsx("span",{className:"font-medium",children:"Stack:"}),s.jsx("span",{children:at(e)}),s.jsx("ul",{className:"list-disc pt-2 pl-10 text-sm",children:e.achivements.map((o,a)=>s.jsx("li",{children:o.human??o.technical},a))})]},e.title)}function ct(e){return s.jsx("div",{id:"employment",children:e.employmentHistory.map((t,n)=>{const o=t.isMonthPast(60);let a="border-b-1 border-gray-300 mb-2 p-2";o&&(a+=" bg-neutral-100");const l=F(t.projects.flatMap(r=>r.roles),(r,d)=>r.toLowerCase()==d.toLocaleLowerCase()).join("/");return s.jsxs("div",{className:a,children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"font-extralight text-sm",children:it(t)}),s.jsx("span",{className:"ml-auto",children:dt(t)})]}),s.jsx("span",{className:"block",children:ot(t)}),o?s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Roles: "}),s.jsx("span",{children:l})]}):s.jsx("div",{className:"flex flex-col",children:t.sortedProjects.map((r,d)=>lt(r,d==t.projects.length-1))})]},n)})})}function dt(e){const t=w(e.start),n=e.end?w(e.end):V(),o=_e(t,n),a=365.25*24*60*60*1e3,l=a/12;let r=Math.floor(o/a),d=Math.ceil(o%a/l);d===12&&(r=r+1,d=0);const p=U(t,{month:"short",year:"numeric"}),h=U(n,{month:"short",year:"numeric"});let b=`${d} mos`;r&&(b=`${r} yr ${b}`);const ee=e.end?s.jsxs("span",{children:[h," 路 ",b]}):s.jsx("span",{className:"font-medium",children:"now"});return s.jsxs("span",{className:"font-light text-sm",children:[p," - ",ee]})}function mt(e){const t=e.employmentHistory?.flatMap(o=>o.projects.flatMap(a=>[...a.stack,...a.tools].flatMap(l=>{const r=e.technologies?.find(d=>d.id==l);return!r||r.display=="hide"?[]:[{code:l,category:r.category,technology:r}]})));return t?ve([...t,...e.technologies.filter(o=>o.display==="force").map(o=>({code:o.id,category:o.category,technology:o}))],F((o,a)=>o.code==a.code),Se(o=>o.technology.category),o=>Object.entries(o),Ne(o=>Y.findIndex(a=>a==o[0]),we)):(console.warn("Skill categories not found"),[])}function ut(){const{editor:e}=g(),[t,n]=u.useState();return u.useEffect(()=>{e.model.getCode().pipe(v(o=>L(Me(G))(o)),v(n),z)},[e]),s.jsx(s.Fragment,{children:t&&s.jsx(st,{resume:t})})}function pt(e){const[t,n]=u.useState("editor"),[o]=u.useState(e.appContext.store.availableResumes),a={currentMode:t,changeMode:l=>{n(l)},availableResumes:o,currentResume:""};return s.jsx(Q,{value:e.appContext,children:s.jsxs(X,{value:a,children:[s.jsx(qe,{}),t=="editor"&&s.jsx(Xe,{}),t=="view"&&s.jsx(ut,{})]})})}function ht(e){const t=document.getElementById("root");if(!t){console.warn("root div container");return}Ce.createRoot(t).render(s.jsx(u.StrictMode,{children:s.jsx(pt,{appContext:e})}))}const S=await We();ht(S);S.editor.model.model.setValue(JSON.stringify(S.store.exampleResume,null,2));
